

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galaxy Tool XML File &mdash; Galaxy Project 23.1.5.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
    <link rel="canonical" href="https://docs.galaxyproject.org/en/master/dev/schema.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=da3e81e8"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Design Guidelines" href="api_guidelines.html" />
    <link rel="prev" title="Development Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Galaxy Project
          </a>
              <div class="version">
                23.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/23.1_announce_user.html">June 2023 Galaxy Release (v 23.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/23.0_announce_user.html">2023 Galaxy Release (v 23.0)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/22.05_announce_user.html">May 2022 Galaxy Release (v 22.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/22.01_announce_user.html">January 2022 Galaxy Release (v 22.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/21.09_announce_user.html">September 2021 Galaxy Release (v 21.09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/21.05_announce_user.html">May 2021 Galaxy Release (v 21.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/21.01_announce_user.html">January 2021 Galaxy Release (v 21.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/20.09_announce_user.html">September 2020 Galaxy Release (v 20.09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/20.05_announce_user.html">May 2020 Galaxy Release (v 20.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/20.01_announce_user.html">January 2020 Galaxy Release (v 20.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/19.09_announce_user.html">September 2019 Galaxy Release (v 19.09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/19.05_announce_user.html">May 2019 Galaxy Release (v 19.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/19.01_announce_user.html">January 2019 Galaxy Release (v 19.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/18.09_announce.html">September 2018 Galaxy Release (v 18.09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/18.05_announce.html">May 2018 Galaxy Release (v 18.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/18.01_announce.html">January 2018 Galaxy Release (v 18.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/17.09_announce.html">September 2017 Galaxy Release (v 17.09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/17.05_announce.html">May 2017 Galaxy Release (v 17.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/17.01_announce.html">January 2017 Galaxy Release (v 17.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/16.10_announce.html">October 2016 Galaxy Release (v 16.10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/16.07_announce.html">July 2016 Galaxy Release (v 16.07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/16.04_announce.html">April 2016 Galaxy Release (v 16.04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/16.01_announce.html">January 2016 Galaxy Release (v 16.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/15.10_announce.html">October 2015 Galaxy Release (v 15.10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/15.07_announce.html">July 2015 Galaxy Release (v 15.07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/15.05_announce.html">May 2015 Galaxy Release (v 15.05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/15.03_announce.html">March 2015 Galaxy Release (v 15.03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/15.01_announce.html">January 2015 Galaxy Release (v 15.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/14.10_announce.html">October 2014 Galaxy Release (v 14.10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/14.08_announce.html">August 2014 Galaxy Release (v 14.08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/14.06_announce.html">June 2014 Galaxy Release (v 14.06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/14.04_announce.html">April 2014 Galaxy Release (v 14.04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/14.02_announce.html">February 2014 Galaxy Release (v 14.02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.11_announce.html">November 2013 Galaxy Release (v 13.11)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.08_announce.html">August 2013 Galaxy Release (v 13.08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.06_announce.html">June 2013 Galaxy Release (v 13.06)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.04_announce.html">April 2013 Galaxy Release (v 13.04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.02_announce.html">February 2013 Galaxy Release (v 13.02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/13.01_announce.html">January 2013 Galaxy Release (v 13.01)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/older_releases.html">Galaxy Releases older than v 13.01</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Admin Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/python.html">Supported Python versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/framework_dependencies.html">Framework Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/config.html">Galaxy Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/config_logging.html">Logging Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/production.html">Production Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/security.html">Security considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/nginx.html">Proxying Galaxy with NGINX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/apache.html">Proxying Galaxy with Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/scaling.html">Scaling and Load Balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/cluster.html">Connecting to a Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/jobs.html">Galaxy Job Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/tool_panel.html">Tool Panel Administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/mq.html">Message queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/dependency_resolvers.html">Dependency Resolvers in Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/container_resolvers.html">Containers in Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/container_resolvers.html#other-considerations">Other considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/conda_faq.html">Conda for Tool Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/db_migration.html">Galaxy Database Schema Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/reports.html">Galaxy Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/useful_scripts.html">Scripts &amp; Tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/options.html">Configuration Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/migrating_to_gunicorn.html">Migrating from uWSGI to Gunicorn and FastAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/special_topics/index.html">Special topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/ftp.html">Galaxy FTP Uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/interactivetools.html">Galaxy InteractiveTools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/mulled_containers.html">Containers for Tool Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/grt.html">Galactic Radio Telescope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/gtn.html">Galaxy Training Materials Webhook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/job_metrics.html">Job Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/webhooks.html">Galaxy Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/vault.html">Storing secrets in the vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/performance_tracking.html">Galaxy Performance Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/bug_reports.html">Bug Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/special_topics/gdpr_compliance.html">GDPR Compliance</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Galaxy Tool XML File</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_guidelines.html">API Design Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_a_job_runner.html">Build a job runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="finding_and_improving_slow_code.html">Finding and improving slow Galaxy code</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_managers.html">Data managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_types.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">How Do I…</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing_tests.html">Writing Tests for Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging_tests.html">Debugging Galaxy Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging_tests.html#debugging-tests-that-run-out-of-memory">Debugging tests that run out of memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging_galaxy.html">Debugging Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging_galaxy_slurm.html">Debugging Galaxy: Slurm Compute Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="translating.html">Translating the Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_point_release.html">Creating Galaxy Point Releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc.html">Galaxy API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/quickstart.html"> Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/api.html"> Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ts_api_doc.html">Tool Shed API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/ts_api.html"> API Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/modules.html">Application Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/galaxy.html">galaxy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/galaxy_ext.html">galaxy_ext package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/galaxy_test.html">galaxy_test package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/tool_shed.html">tool_shed package</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/organization.html">Project Governance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/organization.html#procedure-documents">Procedure Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/organization.html#committers">Committers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/organization.html#release-branches">Release branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/organization.html#handling-pull-requests">Handling Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/organization.html#issue-reporting">Issue Reporting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project/issues.html">Issue Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#issue-reporting">Issue Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#milestones">Milestones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#labeling-structure">Labeling Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#the-roadmap">The Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#voting">Voting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project/issues.html#automation">Automation</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Galaxy Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Development Documentation</a></li>
      <li class="breadcrumb-item active">Galaxy Tool XML File</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/dev/schema.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="galaxy-tool-xml-file">
<h1>Galaxy Tool XML File<a class="headerlink" href="#galaxy-tool-xml-file" title="Link to this heading">¶</a></h1>
<p>The XML File for a Galaxy tool, generally referred to as the “tool config
file” or “wrapper”, serves a number of purposes. First, it lays out the user
interface for the tool (e.g. form fields, text, help, etc.). Second, it
provides the glue that links your tool to Galaxy by telling Galaxy how to
invoke it, what options to pass, and what files it will produce as output.</p>
<p>If you find a bug please report it <a class="reference external" href="https://github.com/galaxyproject/galaxy/issues/new">here</a>.</p>
<p>This document serves as reference documentation. If you would like to learn
how to build tools for Galaxy,
<a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing.html">Planemo</a> features a
number of tutorials on building Galaxy tools that would better serve that purpose.</p>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tool" id="id290"><code class="docutils literal notranslate"><span class="pre">tool</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-description" id="id291"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">description</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-macros" id="id292"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">macros</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-edam-topics" id="id293"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">edam_topics</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-edam-operations" id="id294"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">edam_operations</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-xrefs" id="id295"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xrefs</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-xrefs-xref" id="id296"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xrefs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xref</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-creator" id="id297"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-creator-person" id="id298"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">person</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-creator-organization" id="id299"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">organization</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-requirements" id="id300"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-requirements-requirement" id="id301"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirement</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-requirements-container" id="id302"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">container</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-required-files" id="id303"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-required-files-include" id="id304"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">include</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-required-files-exclude" id="id305"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">exclude</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-code" id="id306"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">code</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-stdio" id="id307"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-stdio-exit-code" id="id308"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">exit_code</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-stdio-regex" id="id309"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">regex</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-version-command" id="id310"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">version_command</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-command" id="id311"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">command</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-environment-variables" id="id312"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variables</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-environment-variables-environment-variable" id="id313"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variables</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variable</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-configfiles" id="id314"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-configfiles-configfile" id="id315"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfile</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-configfiles-inputs" id="id316"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs" id="id317"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-section" id="id318"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">section</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-repeat" id="id319"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">repeat</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-conditional" id="id320"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-conditional-when" id="id321"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param" id="id322"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-validator" id="id323"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">validator</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-option" id="id324"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">option</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-conversion" id="id325"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conversion</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-options" id="id326"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-options-column" id="id327"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">column</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-options-filter" id="id328"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer" id="id329"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-valid" id="id330"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-valid-add" id="id331"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">add</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-valid-remove" id="id332"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">remove</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-mapping" id="id333"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-mapping-add" id="id334"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">add</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-inputs-param-sanitizer-mapping-remove" id="id335"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">remove</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation" id="id336"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation-request-param" id="id337"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation-request-param-append-param" id="id338"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">append_param</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation-request-param-append-param-value" id="id339"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">append_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation-request-param-value-translation" id="id340"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value_translation</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-request-param-translation-request-param-value-translation-value" id="id341"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs" id="id342"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data" id="id343"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-filter" id="id344"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-change-format" id="id345"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">change_format</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-change-format-when" id="id346"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">change_format</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-actions" id="id347"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-actions-conditional" id="id348"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-actions-conditional-when" id="id349"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-actions-action" id="id350"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">action</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-actions-action-option" id="id351"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">action</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">option</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-data-discover-datasets" id="id352"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-collection" id="id353"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-collection-filter" id="id354"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-outputs-collection-discover-datasets" id="id355"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests" id="id356"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test" id="id357"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-param" id="id358"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-param-metadata" id="id359"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">metadata</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-param-collection" id="id360"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-repeat" id="id361"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">repeat</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-section" id="id362"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">section</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-conditional" id="id363"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-output" id="id364"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-output-discovered-dataset" id="id365"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discovered_dataset</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-output-metadata" id="id366"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">metadata</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-output-assert-contents" id="id367"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_contents</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-output-collection" id="id368"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output_collection</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-assert-command" id="id369"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_command</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-assert-stdout" id="id370"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_stdout</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-tests-test-assert-stderr" id="id371"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_stderr</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-help" id="id372"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">help</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-citations" id="id373"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citations</span></code></a></p></li>
<li><p><a class="reference internal" href="#tool-citations-citation" id="id374"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citations</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citation</span></code></a></p></li>
</ul>
</nav>
<section id="tool">
<h2><a class="toc-backref" href="#id290" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code></a><a class="headerlink" href="#tool" title="Link to this heading">¶</a></h2>
<p>The outer-most tag set of tool XML files. Attributes on this tag apply to the
tool as a whole.</p>
<section id="tool-profile">
<h3>Tool profile<a class="headerlink" href="#tool-profile" title="Link to this heading">¶</a></h3>
<p>List of behavior changes associated with profile versions:</p>
<section id="id1">
<h4>16.04<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Disable implicit extra file collection. All dynamic extra file collection requires a <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code> tag.</p></li>
<li><p>Disable <code class="docutils literal notranslate"><span class="pre">format=&quot;input&quot;</span></code> and require explicit metadata targets (<code class="docutils literal notranslate"><span class="pre">metadata_source</span></code>, <code class="docutils literal notranslate"><span class="pre">format_source</span></code>).</p></li>
<li><p>Disable <code class="docutils literal notranslate"><span class="pre">interpreter</span></code> use <code class="docutils literal notranslate"><span class="pre">$__tool_directory__</span></code>.</p></li>
<li><p>Disable <code class="docutils literal notranslate"><span class="pre">$param_file</span></code> use <code class="docutils literal notranslate"><span class="pre">configfile</span></code>.</p></li>
<li><p>Disable default tool version of 1.0.0.</p></li>
<li><p>Use non zero exit code as default stdio error condition (before non-empty stderr).</p></li>
</ul>
</section>
<section id="id2">
<h4>18.01<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Use a separate home directory for each job.</p></li>
<li><p>Introduce <code class="docutils literal notranslate"><span class="pre">provided_metadata_style</span></code> with default <code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> before <code class="docutils literal notranslate"><span class="pre">&quot;legacy&quot;</span></code>.</p></li>
</ul>
</section>
<section id="id3">
<h4>18.09<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>References to other inputs need to be fully qualified by using <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p></li>
<li><p>Do not allow provided but illegal default values.</p></li>
<li><p>Do not use Galaxy python environment for <code class="docutils literal notranslate"><span class="pre">manage_data</span></code> tools.</p></li>
</ul>
</section>
<section id="id4">
<h4>19.05<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Change default Python version from 2.7 to 3.5</p></li>
</ul>
</section>
<section id="id5">
<h4>20.05<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>json config files:</p>
<ul>
<li><p>unselected optional <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">data_column</span></code> parameters get <code class="docutils literal notranslate"><span class="pre">None</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&quot;None&quot;</span></code></p></li>
<li><p>multiple <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">data_column</span></code> parameters are lists (before comma separated string)</p></li>
</ul>
</li>
</ul>
</section>
<section id="id6">
<h4>20.09<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Exit immediately if a command exits with a non-zero status (<code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">-e</span></code>).</p></li>
<li><p>Assume sort order for collection elements.</p></li>
</ul>
</section>
</section>
<section id="id7">
<h3>21.09<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Do not strip leading and trailing whitespaces in <code class="docutils literal notranslate"><span class="pre">from_work_dir</span></code> attribute.</p></li>
</ul>
</section>
<section id="id8">
<h3>23.0<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Text parameters that are inferred to be optional (i.e the <code class="docutils literal notranslate"><span class="pre">optional</span></code> tag is not set, but the tool parameter accepts an empty string)
are set to <code class="docutils literal notranslate"><span class="pre">None</span></code> for templating in Cheetah. Older tools receive the empty string <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> as the templated value.</p></li>
</ul>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h3>
<p>A normal tool:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tool</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;seqtk_seq&quot;</span>
<span class="w">      </span><span class="na">name=</span><span class="s">&quot;Convert FASTQ to FASTA&quot;</span>
<span class="w">      </span><span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span>
<span class="w">      </span><span class="na">profile=</span><span class="s">&quot;16.04&quot;</span>
<span class="nt">&gt;</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">data_source</span></code> tool contains a few more relevant attributes.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tool</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ucsc_table_direct1&quot;</span>
<span class="w">      </span><span class="na">name=</span><span class="s">&quot;UCSC Main&quot;</span>
<span class="w">      </span><span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span>
<span class="w">      </span><span class="na">hidden=</span><span class="s">&quot;false&quot;</span>
<span class="w">      </span><span class="na">profile=</span><span class="s">&quot;16.01&quot;</span>
<span class="w">      </span><span class="na">tool_type=</span><span class="s">&quot;data_source&quot;</span>
<span class="w">      </span><span class="na">URL_method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</section>
<section id="best-practices">
<h3>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h3>
<p>Find the Intergalactic Utilities Commision suggested best practices for this
element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tools">here</a>.</p>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>Must be unique across all tools; should be lowercase and contain only letters, numbers, and underscores. It allows for tool versioning and metrics of the number of times a tool is used, among other things. Find the Intergalactic Utilities Commision suggested best practices for this element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tool-ids">here</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This string is what is displayed as a hyperlink in the tool menu. Find the Intergalactic Utilities Commision suggested best practices for this element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tool-names">here</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p>This string allows for tool versioning and should be increased with each new version of the tool. The value should follow the <a class="reference external" href="https://www.python.org/dev/peps/pep-0440/">PEP 440</a> specification. It defaults to <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> if it is not included in the tag. Find the Intergalactic Utilities Commision suggested best practices for this element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tool-versions">here</a>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code></p></td>
<td><p>Allows for tools to be loaded upon server startup, but not displayed in the tool menu. This attribute should be applied in the toolbox configuration instead and so should be considered deprecated.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">display_interface</span></code></p></td>
<td><p>Disable the display the tool’s graphical tool form by setting this to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tool_type</span></code></p></td>
<td><p>Allows for certain framework functionality to be performed on certain types of tools. Normal tools that execute typical command-line jobs do not need to specify this, special kinds of tools such as <a class="reference external" href="https://galaxyproject.org/admin/internals/data-sources/">Data Source</a> and <a class="reference external" href="https://galaxyproject.org/admin/tools/data-managers/">Data Manager</a> tools should set this to have values such as <code class="docutils literal notranslate"><span class="pre">data_source</span></code> or <code class="docutils literal notranslate"><span class="pre">manage_data</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">profile</span></code></p></td>
<td><p>This string specifies the minimum Galaxy version that should be required to run this tool. Certain legacy behaviors such as using standard error content to detect errors instead of exit code are disabled automatically if profile is set to any version newer than <code class="docutils literal notranslate"><span class="pre">16.01</span></code>. See above for the list of behavior changes associated with profile versions.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">license</span></code></p></td>
<td><p>This string specifies any full URI or a a short <a class="reference external" href="https://spdx.org/licenses/">SPDX</a> identifier for a license for this tool wrapper. The tool wrapper version can be indepedent of the underlying tool. This license covers the tool XML and associated scripts shipped with the tool.  This is interpreted as <a class="reference external" href="https://schema.org/license">schema.org/license</a> property.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">python_template_version</span></code></p></td>
<td><p>This string specifies the minimum Python version that is able to fill the Cheetah sections of the tool. If unset defaults to 2.7 if the profile is older than 19.05, otherwise defaults to 3.5. Galaxy will attempt to convert Python statements in Cheetah sections using <a class="reference external" href="http://python-future.org/">future</a> if Galaxy is run on Python 3 and <code class="docutils literal notranslate"><span class="pre">python_template_version</span></code> is below 3.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">workflow_compatible</span></code></p></td>
<td><p>This attribute indicates if this tool is usable within a workflow (defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code> for normal tools and <code class="docutils literal notranslate"><span class="pre">false</span></code> for data sources).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">URL_method</span></code></p></td>
<td><p>Only used if <code class="docutils literal notranslate"><span class="pre">tool_type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_source</span></code> - this attribute defines the HTTP request method to use when communicating with an external data source application (the default is <code class="docutils literal notranslate"><span class="pre">get</span></code>).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-description">
<h2><a class="toc-backref" href="#id291" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">description</span></code></a><a class="headerlink" href="#tool-description" title="Link to this heading">¶</a></h2>
<p>The value is displayed in
the tool menu immediately following the hyperlink for the tool (based on the
<code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">&lt;tool&gt;</span></code> tag set described above).</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;description&gt;</span>table<span class="w"> </span>browser<span class="nt">&lt;/description&gt;</span>
</pre></div>
</div>
</section>
<section id="id9">
<h3>Best Practices<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h3>
<p>Find the Intergalactic Utilities Commision suggested best practices for this
element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tool-descriptions">here</a>.</p>
</section>
</section>
<section id="tool-macros">
<h2><a class="toc-backref" href="#id292" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">macros</span></code></a><a class="headerlink" href="#tool-macros" title="Link to this heading">¶</a></h2>
<p>Frequently, tools may require the same XML
fragments be repeated in a file (for instance similar conditional branches,
repeated options, etc…) or among tools in the same repository. Galaxy tools
have a macro system to address this problem.</p>
<p>For more information, see <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#macros-reusable-elements">planemo documentation</a></p>
</section>
<section id="tool-edam-topics">
<h2><a class="toc-backref" href="#id293" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">edam_topics</span></code></a><a class="headerlink" href="#tool-edam-topics" title="Link to this heading">¶</a></h2>
<p>Container tag set for the <code class="docutils literal notranslate"><span class="pre">&lt;edam_topic&gt;</span></code> tags.
A tool can have any number of EDAM topic references.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Example: this tool is about &#39;Statistics and probability&#39; (http://edamontology.org/topic_2269) --&gt;</span>
<span class="nt">&lt;edam_topics&gt;</span>
<span class="w">    </span><span class="nt">&lt;edam_topic&gt;</span>topic_2269<span class="nt">&lt;/edam_topic&gt;</span>
<span class="nt">&lt;/edam_topics&gt;</span>
</pre></div>
</div>
</section>
<section id="tool-edam-operations">
<h2><a class="toc-backref" href="#id294" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">edam_operations</span></code></a><a class="headerlink" href="#tool-edam-operations" title="Link to this heading">¶</a></h2>
<p>Container tag set for the <code class="docutils literal notranslate"><span class="pre">&lt;edam_operation&gt;</span></code> tags.
A tool can have any number of EDAM operation references.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Example: this tool performs a &#39;Conversion&#39; operation (http://edamontology.org/operation_3434) --&gt;</span>
<span class="nt">&lt;edam_operations&gt;</span>
<span class="w">    </span><span class="nt">&lt;edam_operation&gt;</span>operation_3434<span class="nt">&lt;/edam_operation&gt;</span>
<span class="nt">&lt;/edam_operations&gt;</span>
</pre></div>
</div>
</section>
<section id="tool-xrefs">
<h2><a class="toc-backref" href="#id295" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xrefs</span></code></a><a class="headerlink" href="#tool-xrefs" title="Link to this heading">¶</a></h2>
<p>Container tag set for the <code class="docutils literal notranslate"><span class="pre">&lt;xref&gt;</span></code> tags.
A tool can refer multiple reference IDs.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="cm">&lt;!-- Example: this tool is dada2 --&gt;</span>
<span class="w">   </span><span class="nt">&lt;xrefs&gt;</span>
<span class="w">       </span><span class="nt">&lt;xref</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;bio.tools&quot;</span><span class="nt">&gt;</span>dada2<span class="nt">&lt;/xref&gt;</span>
<span class="w">       </span><span class="nt">&lt;xref</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;bioconductor&quot;</span><span class="nt">&gt;</span>dada2<span class="nt">&lt;/xref&gt;</span>
<span class="w">   </span><span class="nt">&lt;/xrefs&gt;</span>
<span class="w">   </span><span class="cm">&lt;!-- https://bio.tools/dada2 --&gt;</span>
</pre></div>
</div>
</section>
<section id="tool-xrefs-xref">
<h2><a class="toc-backref" href="#id296" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xrefs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">xref</span></code></a><a class="headerlink" href="#tool-xrefs-xref" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">xref</span></code> element specifies reference
information according to a catalog.</p>
<section id="id10">
<h3>Attributes<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of reference - currently <code class="docutils literal notranslate"><span class="pre">bio.tools</span></code>, <code class="docutils literal notranslate"><span class="pre">bioconductor</span></code>, and <code class="docutils literal notranslate"><span class="pre">biii</span></code> are the only supported options.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-creator">
<h2><a class="toc-backref" href="#id297" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code></a><a class="headerlink" href="#tool-creator" title="Link to this heading">¶</a></h2>
<p>The creator(s) of this work. See <a class="reference external" href="https://schema.org/creator">schema.org/creator</a>.</p>
</section>
<section id="tool-creator-person">
<h2><a class="toc-backref" href="#id298" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">person</span></code></a><a class="headerlink" href="#tool-creator-person" title="Link to this heading">¶</a></h2>
<p>Describes a person. Tries to stay close to <a class="reference external" href="https://schema.org/Person">schema.org/Person</a>.</p>
<section id="id11">
<h3>Attributes<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">givenName</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/givenName">schema.org/givenName</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">familyName</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/familyName">schema.org/familyName</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">honorificPrefix</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/honorificPrefix">schema.org/honorificPrefix</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">honorificSuffix</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/honorificSuffix">schema.org/honorificSuffix</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">jobTitle</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/jobTitle">schema.org/jobTitle</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/name">schema.org/name</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/url">schema.org/url</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">identifier</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/identifier">schema.org/identifier</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">image</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/image">schema.org/image</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/address">schema.org/address</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">email</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/email">schema.org/email</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">telephone</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/telephone">schema.org/telephone</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">faxNumber</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/faxNumber">schema.org/faxNumber</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alternateName</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/alternateName">schema.org/alternateName</a></p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-creator-organization">
<h2><a class="toc-backref" href="#id299" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">creator</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">organization</span></code></a><a class="headerlink" href="#tool-creator-organization" title="Link to this heading">¶</a></h2>
<p>Describes an organization. Tries to stay close to <a class="reference external" href="https://schema.org/Organization">schema.org/Organization</a>.</p>
<section id="id12">
<h3>Attributes<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/name">schema.org/name</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/url">schema.org/url</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">identifier</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/identifier">schema.org/identifier</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">image</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/image">schema.org/image</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/address">schema.org/address</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">email</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/email">schema.org/email</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">telephone</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/telephone">schema.org/telephone</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">faxNumber</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/faxNumber">schema.org/faxNumber</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alternateName</span></code></p></td>
<td><p><a class="reference external" href="https://schema.org/alternateName">schema.org/alternateName</a></p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-requirements">
<h2><a class="toc-backref" href="#id300" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code></a><a class="headerlink" href="#tool-requirements" title="Link to this heading">¶</a></h2>
<p>This is a container tag set for the <code class="docutils literal notranslate"><span class="pre">requirement</span></code>, <code class="docutils literal notranslate"><span class="pre">resource</span></code> and <code class="docutils literal notranslate"><span class="pre">container</span></code> tags
described in greater detail below. <code class="docutils literal notranslate"><span class="pre">requirement</span></code>s describe software packages
and other individual computing requirements required to execute a tool, while
<code class="docutils literal notranslate"><span class="pre">container</span></code>s describe Docker or Singularity containers that should be able to
serve as complete descriptions of the runtime of a tool.</p>
</section>
<section id="tool-requirements-requirement">
<h2><a class="toc-backref" href="#id301" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirement</span></code></a><a class="headerlink" href="#tool-requirements-requirement" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;requirements&gt;</span></code> tag set. Third party
programs or modules that the tool depends upon are included in this tag set.</p>
<p>When a tool runs, Galaxy attempts to <em>resolve</em> these requirements (also called
dependencies). <code class="docutils literal notranslate"><span class="pre">requirement</span></code>s are meant to be abstract and resolvable by
multiple different <a class="reference internal" href="../admin/dependency_resolvers.html"><span class="doc std std-doc">dependency resolvers</span></a> (e.g. <a class="reference external" href="https://conda.io/">conda</a>, the
<a class="reference external" href="https://galaxyproject.org/toolshed/tool-features/">Galaxy Tool Shed dependency management system</a>,
or <a class="reference external" href="https://modules.sourceforge.net/">environment modules</a>).</p>
<p>The current best practice for tool dependencies is to <a class="reference internal" href="../admin/conda_faq.html"><span class="doc std std-doc">target Conda</span></a>.</p>
<section id="id13">
<h3>Examples<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h3>
<p>This example shows a tool that requires the samtools 0.0.18 package.</p>
<p>This package is available via the Tool Shed (see
<a class="reference external" href="https://galaxyproject.org/toolshed/tool-features/">Tool Shed dependency management</a>
) as well as <a class="reference internal" href="../admin/conda_faq.html"><span class="doc std std-doc">Conda</span></a>
and can be configured locally to adapt to any other package management system.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;requirements&gt;</span>
<span class="w">    </span><span class="nt">&lt;requirement</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;package&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;0.1.18&quot;</span><span class="nt">&gt;</span>samtools<span class="nt">&lt;/requirement&gt;</span>
<span class="nt">&lt;/requirements&gt;</span>
</pre></div>
</div>
<p>This older example shows a tool that requires R version 2.15.1. The
<code class="docutils literal notranslate"><span class="pre">tool_dependencies.xml</span></code> should contain matching declarations for Galaxy to
actually install the R runtime. The <code class="docutils literal notranslate"><span class="pre">set_envirornment</span></code> type is only respected
by the tool shed and is ignored by the newer and preferred conda dependency
resolver.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;requirements&gt;</span>
<span class="w">    </span><span class="nt">&lt;requirement</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;set_environment&quot;</span><span class="nt">&gt;</span>R_SCRIPT_PATH<span class="nt">&lt;/requirement&gt;</span>
<span class="w">    </span><span class="nt">&lt;requirement</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;package&quot;</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;2.15.1&quot;</span><span class="nt">&gt;</span>R<span class="nt">&lt;/requirement&gt;</span>
<span class="nt">&lt;/requirements&gt;</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3>Attributes<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Valid values are <code class="docutils literal notranslate"><span class="pre">package</span></code>, <code class="docutils literal notranslate"><span class="pre">set_environment</span></code>, <code class="docutils literal notranslate"><span class="pre">python-module</span></code> (deprecated), <code class="docutils literal notranslate"><span class="pre">binary</span></code> (deprecated)</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p>For requirements of type <code class="docutils literal notranslate"><span class="pre">package</span></code> this value defines a specific version of the tool dependency.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-requirements-container">
<h2><a class="toc-backref" href="#id302" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">requirements</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">container</span></code></a><a class="headerlink" href="#tool-requirements-container" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the ‘requirements’ tag set. Galaxy can be
configured to run tools within <a class="reference external" href="https://www.docker.com/">Docker</a> or <a class="reference external" href="https://www.sylabs.io/singularity/">Singularity</a>
containers - this tag allows the tool to suggest possible valid containers for this tool. The contents of the tag should
be a container image identifier appropriate for the particular container runtime being used, e.g.
<code class="docutils literal notranslate"><span class="pre">quay.io/biocontainers/fastqc:0.11.2--1</span></code> for Docker or <code class="docutils literal notranslate"><span class="pre">docker://quay.io/biocontainers/fastqc:0.11.2--1</span></code>
(or alternatively <code class="docutils literal notranslate"><span class="pre">/opt/containers/fastqc.simg</span></code> if your Galaxy installation will be loading the image from a filesystem path)
for Singularity. The <code class="docutils literal notranslate"><span class="pre">requirements</span></code> tag can contain multiple <code class="docutils literal notranslate"><span class="pre">container</span></code> tags describing suitable container options, in
which case the first container that is found by the Galaxy container resolver at runtime will be used.</p>
<p>Example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;requirements&gt;</span>
<span class="w">  </span><span class="nt">&lt;container</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;docker&quot;</span><span class="nt">&gt;</span>quay.io/biocontainers/fastqc:0.11.2--1<span class="nt">&lt;/container&gt;</span>
<span class="nt">&lt;/requirements&gt;</span>
</pre></div>
</div>
<p>Read more about configuring Galaxy to run Docker jobs
<a class="reference external" href="https://docs.galaxyproject.org/en/master/admin/container_resolvers.html">here</a>.</p>
<section id="id15">
<h3>Attributes<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>This value describes the type of container that the tool may be executed in and currently may be <code class="docutils literal notranslate"><span class="pre">docker</span></code> or <code class="docutils literal notranslate"><span class="pre">singularity</span></code>.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-required-files">
<h2><a class="toc-backref" href="#id303" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code></a><a class="headerlink" href="#tool-required-files" title="Link to this heading">¶</a></h2>
<p>This declaration is used to define files that must be shipped from the tool directory
for the tool to function properly in remote environments where the tool directory
is not available to the job.</p>
<p>All includes should be list before excludes. By default, the exclude list includes
the tool-data/<strong>, test-data/</strong>, and .hg/** glob patterns.</p>
<p>Pulsar hacks to implicitly find referenced files from the tool directory will be disabled
when this block is used. A future Galaxy tool profile version may disable these hacks
altogether and specifying this block for all referenced files should be considered a best
practice.</p>
<section id="id16">
<h3>Attributes<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">extend_default_excludes</span></code></p></td>
<td><p>Set this to <code class="docutils literal notranslate"><span class="pre">false</span></code> to override the default excludes for mercurial, reference, and test data.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-required-files-include">
<h2><a class="toc-backref" href="#id304" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">include</span></code></a><a class="headerlink" href="#tool-required-files-include" title="Link to this heading">¶</a></h2>
<p>Describe files to include when relocating tool directory for remote execution.</p>
<section id="id17">
<h3>Attributes<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of file reference <code class="docutils literal notranslate"><span class="pre">path</span></code> is.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to referenced files - this should be relative to the tool’s directory (this is the file the tool is located in not the repository directory if these conflict).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-required-files-exclude">
<h2><a class="toc-backref" href="#id305" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">required_files</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">exclude</span></code></a><a class="headerlink" href="#tool-required-files-exclude" title="Link to this heading">¶</a></h2>
<p>Describe files to exclude when relocating tool directory for remote execution.</p>
<section id="id18">
<h3>Attributes<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of file reference <code class="docutils literal notranslate"><span class="pre">path</span></code> is.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to referenced files - this should be relative to the tool’s directory (this is the file the tool is located in not the repository directory if these conflict).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-code">
<h2><a class="toc-backref" href="#id306" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">code</span></code></a><a class="headerlink" href="#tool-code" title="Link to this heading">¶</a></h2>
<p><em>Deprecated</em>. Do not use this unless absolutely necessary.</p>
<p>The extensions described here can cause problems using your tool with certain components
of Galaxy (like the workflow system). It is highly recommended to avoid these constructs
unless absolutely necessary.</p>
<p>This tag set provides detailed control of the way the tool is executed. This
(optional) code can be deployed in a separate file in the same directory as the
tool’s config file. These hooks are being replaced by new tool config features
and methods in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/__init__.py">/lib/galaxy/tools/_<em>init</em>_.py</a> code file.</p>
<section id="id19">
<h3>Examples<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h3>
<section id="dynamic-options">
<h4>Dynamic Options<a class="headerlink" href="#dynamic-options" title="Link to this heading">¶</a></h4>
<p>Use associated dynamic select lists where selecting an option in the first
select list dynamically re-renders the options in the second select list. In
this example, we are populating both dynamic select lists from metadata elements
associated with a tool’s single input dataset. The 2 metadata elements we’re
using look like this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MetadataElement</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;field_names&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Field names&quot;</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">no_value</span><span class="o">=</span><span class="p">[])</span>
<span class="c1"># The keys in the field_components map to the list of field_names in the above element</span>
<span class="c1"># which ensures order for select list options that are built from it.</span>
<span class="n">MetadataElement</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;field_components&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">{},</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Field names and components&quot;</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">no_value</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>Our tool config includes a code file tag like this.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;code</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;tool_form_utils.py&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Here are the relevant input parameters in our tool config. The first parameter
is the input dataset that includes the above metadata elements.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;vtkascii,vtkbinary&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Shape with uncolored surface field&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;expression&quot;</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;Shape must have an uncolored surface field.&quot;</span><span class="nt">&gt;</span>value<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>None<span class="w"> </span>and<span class="w"> </span>len(value.metadata.field_names)<span class="w"> </span>&gt;<span class="w"> </span>0<span class="nt">&lt;/validator&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>The following parameter dynamically renders a select list consisting of the
elements in the <code class="docutils literal notranslate"><span class="pre">field_names</span></code> metadata element associated with the selected
input dataset.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;field_name&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Field name&quot;</span><span class="w"> </span><span class="na">refresh_on_change=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_meta&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;field_names&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;no_options&quot;</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;The selected shape has no uncolored surface fields.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>The following parameter calls the <code class="docutils literal notranslate"><span class="pre">get_field_components_options()</span></code> function in
the <code class="docutils literal notranslate"><span class="pre">tool_form_utils.py</span></code> code file discussed above. This function returns the
value of the input dataset’s <code class="docutils literal notranslate"><span class="pre">field_components</span></code> metadata element dictionary
whose key is the currently selected <code class="docutils literal notranslate"><span class="pre">field_name</span></code> from the select list parameter
above.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;field_component_index&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Field component index&quot;</span><span class="w"> </span><span class="na">dynamic_options=</span><span class="s">&quot;get_field_components_options(input, field_name=field_name)&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;Color will be applied to the selected field&#39;s component associated with this index.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Changing the selected option in the <code class="docutils literal notranslate"><span class="pre">field_name</span></code> select list will dynamically
re-render the options available in the associated <code class="docutils literal notranslate"><span class="pre">field_component_index</span></code> select
list, which is the behavior we want.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">get_field_components_options()</span></code> method looks like this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_field_components_options</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">options</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span> <span class="s1">&#39;field_names&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">options</span>
    <span class="k">if</span> <span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">field_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">options</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># The expression validator that helps populate the select list of input</span>
        <span class="c1"># datsets in the icqsol_color_surface_field tool does not filter out</span>
        <span class="c1"># datasets with no field field_names, so we need this check.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">field_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">options</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">field_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">field_components</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">field_components</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="p">[])</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">field_component</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">field_components</span><span class="p">):</span>
        <span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">field_component</span><span class="p">,</span> <span class="n">field_component</span><span class="p">,</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">options</span>
</pre></div>
</div>
</section>
<section id="parameter-validation">
<h4>Parameter Validation<a class="headerlink" href="#parameter-validation" title="Link to this heading">¶</a></h4>
<p>This function is called before the tool is executed. If it raises any exceptions the tool execution will be aborted and the exception’s value will be displayed in an error message box. Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="n">incoming</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validator for the plotting program&quot;&quot;&quot;</span>


    <span class="n">bins</span> <span class="o">=</span> <span class="n">incoming</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bins&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">col</span> <span class="o">=</span> <span class="n">incoming</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;col&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>


    <span class="k">if</span> <span class="ow">not</span> <span class="n">bins</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">col</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s2">&quot;You need to specify a number for bins and columns&quot;</span>


    <span class="k">try</span><span class="p">:</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bins</span><span class="p">)</span>
        <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s2">&quot;Parameters are not integers, columns:</span><span class="si">%s</span><span class="s2">, bins:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>


    <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span><span class="o">&lt;</span><span class="n">bins</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">,</span> <span class="s2">&quot;The number of bins </span><span class="si">%s</span><span class="s2"> must be a number between 1 and 100&quot;</span> <span class="o">%</span> <span class="n">bins</span>
</pre></div>
</div>
<p>This code will intercept a number of parameter errors and return corresponding error messages. The parameter <code class="docutils literal notranslate"><span class="pre">incoming</span></code> contains a dictionary with all the parameters that were sent through the web.</p>
</section>
<section id="pre-job-and-pre-process-code">
<h4>Pre-job and pre-process code<a class="headerlink" href="#pre-job-and-pre-process-code" title="Link to this heading">¶</a></h4>
<p>The signature of both of these is the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">exec_before_job</span><span class="p">(</span><span class="n">inp_data</span><span class="p">,</span> <span class="n">out_data</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">,</span> <span class="n">tool</span><span class="p">):</span>
<span class="k">def</span> <span class="nf">exec_before_process</span><span class="p">(</span><span class="n">inp_data</span><span class="p">,</span> <span class="n">out_data</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">,</span> <span class="n">tool</span><span class="p">):</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">param_dict</span></code> is a dictionary that contains all the values in the <code class="docutils literal notranslate"><span class="pre">incoming</span></code> parameter above plus a number of keys and values generated internally by galaxy. The <code class="docutils literal notranslate"><span class="pre">inp_data</span></code> and the <code class="docutils literal notranslate"><span class="pre">out_data</span></code> are dictionaries keyed by parameter name containing the classes that represent the data.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">exec_before_process</span><span class="p">(</span><span class="n">inp_data</span><span class="p">,</span> <span class="n">out_data</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">,</span> <span class="n">tool</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">out_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;New name&#39;</span>
</pre></div>
</div>
<p>This custom code will change the name of the data that was created for this tool to <strong>New name</strong>. The difference between these two functions is that the <code class="docutils literal notranslate"><span class="pre">exec_before_job</span></code> executes before the page returns and the user will see the new name right away. If one were to use <code class="docutils literal notranslate"><span class="pre">exec_before_process</span></code> the new name would be set only once the job starts to execute.</p>
</section>
<section id="post-process-code">
<h4>Post-process code<a class="headerlink" href="#post-process-code" title="Link to this heading">¶</a></h4>
<p>This code executes after the background process running the tool finishes its run. The example below is more advanced one that replaces the type of the output data depending on the parameter named <code class="docutils literal notranslate"><span class="pre">extension</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">galaxy</span> <span class="kn">import</span> <span class="n">datatypes</span>
<span class="k">def</span> <span class="nf">exec_after_process</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">inp_data</span><span class="p">,</span> <span class="n">out_data</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">,</span> <span class="n">tool</span><span class="p">,</span> <span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span><span class="p">):</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">param_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;extension&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">out_data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="n">newdata</span> <span class="o">=</span> <span class="n">datatypes</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">ext</span><span class="p">)(</span><span class="nb">id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span> <span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">newdata</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">newdata</span><span class="o">.</span><span class="n">ext</span> <span class="o">=</span> <span class="n">ext</span>
        <span class="n">out_data</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">newdata</span>
</pre></div>
</div>
<p>The content of <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> are strings containing the output of the process.</p>
</section>
</section>
<section id="id20">
<h3>Attributes<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><p>This value is the name of the executable code file, and is called in the <code class="docutils literal notranslate"><span class="pre">exec_before_process()</span></code>, <code class="docutils literal notranslate"><span class="pre">exec_before_job()</span></code>, <code class="docutils literal notranslate"><span class="pre">exec_after_process()</span></code> and <code class="docutils literal notranslate"><span class="pre">exec_after_job()</span></code> methods.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-stdio">
<h2><a class="toc-backref" href="#id307" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code></a><a class="headerlink" href="#tool-stdio" title="Link to this heading">¶</a></h2>
<p>Tools write the bulk of useful data to datasets, but they can also write messages to standard I/O (stdio) channels known as standard output (stdout) and standard error (stderr). Both stdout and stderr are typically written to the executing program’s console or terminal. Previous versions of Galaxy checked stderr for execution errors - if any text showed up on stderr, then the tool’s execution was marked as failed. However, many tools write messages to stderr that are not errors, and using stderr allows programs to redirect other interesting messages to a separate file. Programs may also exit with codes that indicate success or failure. One convention is for programs to return 0 on success and a non-zero exit code on failure.</p>
<p>Legacy tools (ones with <code class="docutils literal notranslate"><span class="pre">profile</span></code> unspecified or a <code class="docutils literal notranslate"><span class="pre">profile</span></code> of less than
16.04) will default to checking stderr for errors as described above. Newer
tools will instead treat an exit code other than 0 as an error. The
<code class="docutils literal notranslate"><span class="pre">detect_errors</span></code> on <code class="docutils literal notranslate"><span class="pre">command</span></code> can swap between these behaviors but the
<code class="docutils literal notranslate"><span class="pre">stdio</span></code> directive allows more options in defining error conditions (though
these aren’t always intuitive).</p>
<p>With <code class="docutils literal notranslate"><span class="pre">stdio</span></code> directive, Galaxy can use regular expressions to scan stdout and
stderr, and it also allows exit codes to be scanned for ranges. The <code class="docutils literal notranslate"><span class="pre">&lt;stdio&gt;</span></code>
tag has two subtags, <code class="docutils literal notranslate"><span class="pre">&lt;regex&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code>, to define regular
expressions and exit code processing, respectively. They are defined below. If a
tool does not have any valid <code class="docutils literal notranslate"><span class="pre">&lt;regex&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tags, then Galaxy
will use the previous technique for finding errors.</p>
<p>A note should be made on the order in which exit codes and regular expressions
are applied and how the processing stops. Exit code rules are applied before
regular expression rules. The rationale is that exit codes are more clearly
defined and are easier to check computationally, so they are applied first. Exit
code rules are applied in the order in which they appear in the tool’s
configuration file, and regular expressions are also applied in the order in
which they appear in the tool’s configuration file. However, once a rule is
triggered that causes a fatal error, no further rules are
checked.</p>
</section>
<section id="tool-stdio-exit-code">
<h2><a class="toc-backref" href="#id308" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">exit_code</span></code></a><a class="headerlink" href="#tool-stdio-exit-code" title="Link to this heading">¶</a></h2>
<p>Tools may use exit codes to indicate specific execution errors. Many programs use 0 to indicate success and non-zero exit codes to indicate errors. Galaxy allows each tool to specify exit codes that indicate errors. Each <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tag defines a range of exit codes, and each range can be associated with a description of the error (e.g., “Out of Memory”, “Invalid Sequence File”) and an error level. The description just describes the condition and can be anything. The error level is either log, warning, fatal error, or fatal_oom. A warning means that stderr will be updated with the error’s description. A fatal error means that the tool’s execution will be marked as having an error and the workflow will stop. A fatal_oom indicates an out of memory condition and the job might be resubmitted if Galaxy is configured appropriately. Note that, if the error level is not supplied, then a fatal error is assumed to have occurred.</p>
<p>The exit code’s range can be any consecutive group of integers. More advanced ranges, such as noncontiguous ranges, are currently not supported. Ranges can be specified in the form “m:n”, where m is the start integer and n is the end integer. If “:n” is specified, then the exit code will be compared against all integers less than or equal to n. If “m:” is used, then the exit code will be compared against all integers greater than or equal to m. If the exit code matches, then the error level is applied and the error’s description is added to stderr. If a tool’s exit code does not match any of the supplied <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tags’ ranges, then no errors are applied to the tool’s execution.</p>
<p>Note that most Unix and Linux variants only support positive integers 0 to 255 for exit codes. If an exit code falls outside of this range, the usual convention is to only use the lower 8 bits for the exit code. The only known exception is if a job is broken into subtasks using the tasks runner and one of those tasks is stopped with a POSIX signal. (Note that signals should be used as a last resort for terminating processes.) In those cases, the task will receive -1 times the signal number. For example, suppose that a job uses the tasks runner and 8 tasks are created for the job. If one of the tasks hangs, then a sysadmin may choose to send the “kill” signal, SIGKILL, to the process. In that case, the task (and its job) will exit with an exit code of -9. More on POSIX signals can be found on <a class="reference external" href="https://en.wikipedia.org/wiki/Signal_(IPC)">Wikipedia</a> as well as on the man page for “signal” (<code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">7</span> <span class="pre">signal</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tag’s supported attributes are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code>: This indicates the range of exit codes to check. The range can be one of the following:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>: the exit code will only be compared to n;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m:n</span></code>: the exit code must be greater than or equal to m and less than or equal to n;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m:</span></code>: the exit code must be greater than or equal to m;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:n</span></code>: the exit code must be less than or equal to n.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: This indicates the error level of the exit code. If no level is specified, then the fatal error level will be assumed to have occurred. The level can have one of following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">qc</span></code>, and <code class="docutils literal notranslate"><span class="pre">warning</span></code>: If an exit code falls in the given range, then a description of the error will be added to the beginning of the source, prepended with either ‘QC:’, ‘Log:’ or ‘Warning:’. This will not cause the tool to fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fatal</span></code>: If an exit code falls in the given range, then a description of the error will be added to the beginning of stderr. A fatal-level error will cause the tool to fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fatal_oom</span></code>: If an exit code falls in the given range, then a description of the error will be added to the beginning of stderr. Depending on the job configuration, a fatal_oom-level error will cause the tool to be resubmitted or fail.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: This is an optional description of the error that corresponds to the exit code.</p></li>
</ul>
<p>The following is an example of the <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tag:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;stdio&gt;</span>
<span class="w">    </span><span class="nt">&lt;exit_code</span><span class="w"> </span><span class="na">range=</span><span class="s">&quot;3:5&quot;</span><span class="w"> </span><span class="na">level=</span><span class="s">&quot;warning&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Low disk space&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;exit_code</span><span class="w"> </span><span class="na">range=</span><span class="s">&quot;6:&quot;</span><span class="w"> </span><span class="na">level=</span><span class="s">&quot;fatal&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Bad input dataset&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Catching fatal_oom allows the job runner to potentially resubmit to a resource with more</span>
<span class="cm">         memory if Galaxy is configured to do this. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;exit_code</span><span class="w"> </span><span class="na">range=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">level=</span><span class="s">&quot;fatal_oom&quot;</span><span class="w"> </span><span class="na">description=</span><span class="s">&quot;Out of Memory&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/stdio&gt;</span>
</pre></div>
</div>
<p>If the tool returns 0 or 1, then the tool will not be marked as having an error.
If the exit code is 2, then the tool will fail with the description <code class="docutils literal notranslate"><span class="pre">Out</span> <span class="pre">of</span> <span class="pre">Memory</span></code> added to stderr. If the tool returns 3, 4, or 5, then the tool will not
be marked as having failed, but <code class="docutils literal notranslate"><span class="pre">Low</span> <span class="pre">disk</span> <span class="pre">space</span></code> will be added to stderr.
Finally, if the tool returns any number greater than or equal to 6, then the
description <code class="docutils literal notranslate"><span class="pre">Bad</span> <span class="pre">input</span> <span class="pre">dataset</span></code> will be added to stderr and the tool will be
marked as having failed.</p>
</section>
<section id="tool-stdio-regex">
<h2><a class="toc-backref" href="#id309" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">stdio</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">regex</span></code></a><a class="headerlink" href="#tool-stdio-regex" title="Link to this heading">¶</a></h2>
<p>A regular expression defines a pattern of characters. The patterns include the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GCTA</span></code>, which matches on the fixed string “GCTA”;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[abcd]</span></code>, which matches on the characters a, b, c, or d;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[CG]{12}</span></code>, which matches on 12 consecutive characters that are C or G;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a.*z</span></code>, which matches on the character “a”, followed by 0 or more characters of any type, followed by a “z”;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">^X</span></code>, which matches the letter X at the beginning of a string;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Y$</span></code>, which matches the letter Y at the end of a string.</p></li>
</ul>
<p>There are many more possible regular expressions. A reference to all supported
regular expressions can be found under
<a class="reference external" href="https://docs.python.org/3/library/re.html#regular-expression-syntax">Python Regular Expression Syntax</a>.</p>
<p>A regular expression includes the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: This tells whether the regular expression should be matched against stdout, stderr, or both. If this attribute is missing or is incorrect, then both stdout and stderr will be checked. The source can be one of the following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">stdout</span></code>: the regular expression will be applied to stdout;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stderr</span></code>: the regular expression will be applied to stderr;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">both</span></code>: the regular expression will be applied to both stderr and stdout (which is the default case).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">match</span></code>: This is the regular expression that will be used to match against stdout and/or stderr. If the <code class="docutils literal notranslate"><span class="pre">&lt;regex&gt;</span></code> tag does not contain the match attribute, then the <code class="docutils literal notranslate"><span class="pre">&lt;regex&gt;</span></code> tag will be ignored. The regular expression can be any valid Python regular expression. All regular expressions are performed case insensitively. For example, if match contains the regular expression “actg”, then the regular expression will match against “actg”, “ACTG”, “AcTg”, and so on. Also note that, if double quotes (”) are to be used in the match attribute, then the value “ can be used in place of double quotes. Likewise, if single quotes (’) are to be used in the match attribute, then the value ‘ can be used if necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: This works very similarly to the <code class="docutils literal notranslate"><span class="pre">&lt;exit_code&gt;</span></code> tag, except that, when a regular expression matches against its source, the description is added to the beginning of the source. For example, if stdout matches on a regular expression, then the regular expression’s description is added to the beginning of stdout (instead of stderr). If no level is specified, then the fatal error level will be assumed to have occurred. The level can have one of following values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>, <code class="docutils literal notranslate"><span class="pre">qc</span></code>, and <code class="docutils literal notranslate"><span class="pre">warning</span></code>: If the regular expression matches against its source input (i.e., stdout and/or stderr), then a description of the error will be added to the beginning of the source, prepended with either ‘QC:’, ‘Log:’, or ‘Warning:’. This will not cause the tool to fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fatal</span></code>: If the regular expression matches against its source input, then a description of the error will be added to the beginning of the source. A fatal-level error will cause the tool to fail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fatal_oom</span></code>: In contrast to fatal the job might be resubmitted if possible according to the job configuration.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: Just like its <code class="docutils literal notranslate"><span class="pre">exit_code</span></code> counterpart, this is an optional description of the regular expression that has matched.</p></li>
</ul>
<p>The following is an example of regular expressions that may be used:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;stdio&gt;</span>
<span class="w">    </span><span class="nt">&lt;regex</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;low space&quot;</span>
<span class="w">           </span><span class="na">source=</span><span class="s">&quot;both&quot;</span>
<span class="w">           </span><span class="na">level=</span><span class="s">&quot;warning&quot;</span>
<span class="w">           </span><span class="na">description=</span><span class="s">&quot;Low space on device&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;regex</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;error&quot;</span>
<span class="w">           </span><span class="na">source=</span><span class="s">&quot;stdout&quot;</span>
<span class="w">           </span><span class="na">level=</span><span class="s">&quot;fatal&quot;</span>
<span class="w">           </span><span class="na">description=</span><span class="s">&quot;Unknown error encountered&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Catching fatal_oom allows the job runner to potentially resubmit to a resource with more</span>
<span class="cm">         memory if Galaxy is configured to do this. --&gt;</span>
<span class="w">    </span><span class="nt">&lt;regex</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;out of memory&quot;</span>
<span class="w">           </span><span class="na">source=</span><span class="s">&quot;stdout&quot;</span>
<span class="w">           </span><span class="na">level=</span><span class="s">&quot;fatal_oom&quot;</span>
<span class="w">           </span><span class="na">description=</span><span class="s">&quot;Out of memory error occurred&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;regex</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;[CG]{12}&quot;</span>
<span class="w">           </span><span class="na">description=</span><span class="s">&quot;Fatal error - CG island 12 nts long found&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;regex</span><span class="w"> </span><span class="na">match=</span><span class="s">&quot;^Branch A&quot;</span>
<span class="w">           </span><span class="na">level=</span><span class="s">&quot;warning&quot;</span>
<span class="w">           </span><span class="na">description=</span><span class="s">&quot;Branch A was taken in execution&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/stdio&gt;</span>
</pre></div>
</div>
<p>The regular expression matching proceeds as follows. First, if either stdout or
stderr match on <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">space</span></code>, then a warning is registered. If stdout contained
the string <code class="docutils literal notranslate"><span class="pre">---LOW</span> <span class="pre">SPACE---</span></code>, then stdout has the string <code class="docutils literal notranslate"><span class="pre">Warning:</span> <span class="pre">Low</span> <span class="pre">space</span> <span class="pre">on</span> <span class="pre">device</span></code> added to its beginning. The same goes for if stderr had contained the
string <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">space</span></code>. Since only a warning could have occurred, the processing
continues.</p>
<p>Next, the regular expression <code class="docutils literal notranslate"><span class="pre">error</span></code> is matched only against stdout. If stdout
contains the string <code class="docutils literal notranslate"><span class="pre">error</span></code> regardless of its capitalization, then a fatal
error has occurred and the processing stops. In that case, stdout would be
prepended with the string <code class="docutils literal notranslate"><span class="pre">Fatal:</span> <span class="pre">Unknown</span> <span class="pre">error</span> <span class="pre">encountered</span></code>. Note that, if
stderr contained <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, or <code class="docutils literal notranslate"><span class="pre">ErRor</span></code> then it would not matter -
stderr was not being scanned.</p>
<p>If the second regular expression does not match, the regular expression “out of memory”
is checked on stdout. If found, Galaxy tries to resubmit the job with more memory
if configured correctly, otherwise the job fails.</p>
<p>If the previous regular expressions does not match, then the fourth regular
expression is checked. The fourth regular expression does not contain an error
level, so an error level of <code class="docutils literal notranslate"><span class="pre">fatal</span></code> is assumed. The fourth regular expression
also does not contain a source, so both stdout and stderr are checked. The fourth
regular expression looks for 12 consecutive “C”s or “G”s in any order and in
uppercase or lowercase. If stdout contained <code class="docutils literal notranslate"><span class="pre">cgccGGCCcGGcG</span></code> or stderr
contained <code class="docutils literal notranslate"><span class="pre">CCCCCCgggGGG</span></code>, then the regular expression would match, the tool
would be marked with a fatal error, and the stream that contained the
12-nucleotide CG island would be prepended with <code class="docutils literal notranslate"><span class="pre">Fatal:</span> <span class="pre">Fatal</span> <span class="pre">error</span> <span class="pre">-</span> <span class="pre">CG</span> <span class="pre">island</span> <span class="pre">12</span> <span class="pre">nts</span> <span class="pre">long</span> <span class="pre">found</span></code>.</p>
<p>Finally, if the tool did not match any of the fatal errors, then the fifth
regular expression is checked. Since no source is specified, both stdout and
stderr are checked. If <code class="docutils literal notranslate"><span class="pre">Branch</span> <span class="pre">A</span></code> is at the beginning of stdout or stderr, then
a warning will be registered and the source that contained <code class="docutils literal notranslate"><span class="pre">Branch</span> <span class="pre">A</span></code> will be
prepended with the warning <code class="docutils literal notranslate"><span class="pre">Warning:</span> <span class="pre">Branch</span> <span class="pre">A</span> <span class="pre">was</span> <span class="pre">taken</span> <span class="pre">in</span> <span class="pre">execution</span></code>.</p>
</section>
<section id="tool-version-command">
<h2><a class="toc-backref" href="#id310" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">version_command</span></code></a><a class="headerlink" href="#tool-version-command" title="Link to this heading">¶</a></h2>
<p>Specifies the command to be run in
order to get the tool’s version string. The resulting value will be found in the
“Info” field of the history dataset.</p>
<p>Unlike the <a class="reference internal" href="#tool-command">command</a> tag, with the exception of the string
<code class="docutils literal notranslate"><span class="pre">$__tool_directory__</span></code> this value is taken as a literal and so there is no
need to escape values like <code class="docutils literal notranslate"><span class="pre">$</span></code> and command inputs are not available for variable
substitution.</p>
<section id="id21">
<h3>Examples<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h3>
<p>A simple example for a <a class="reference external" href="https://ccb.jhu.edu/software/tophat/index.shtml">TopHat</a>
tool definition might just be:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;version_command&gt;</span>tophat<span class="w"> </span>-version<span class="nt">&lt;/version_command&gt;</span>
</pre></div>
</div>
<p>An example that leverages a Python script (e.g. <code class="docutils literal notranslate"><span class="pre">count_reads.py</span></code>) shipped with
the tool might be:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;version_command&gt;</span>python<span class="w"> </span>&#39;$__tool_directory__/count_reads.py&#39;<span class="nt">&lt;/version_command&gt;</span>
</pre></div>
</div>
<p>Examples are included in the test tools directory including:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/version_command_plain.xml">version_command_plain.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/version_command_tool_dir.xml">version_command_tool_dir.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/version_command_interpreter.xml">version_command_interpreter.xml</a> (<em>deprecated</em>)</p></li>
</ul>
</section>
<section id="id22">
<h3>Attributes<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interpreter</span></code></p></td>
<td><p><em>Deprecated</em>. This will prefix the version command with the value of this attribute (e.g. <code class="docutils literal notranslate"><span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">perl</span></code>) and the tool directory, in order to run an executable file shipped with the tool. It is recommended to instead use <code class="docutils literal notranslate"><span class="pre">&lt;interpreter&gt;</span> <span class="pre">'$__tool_directory__/&lt;executable_name&gt;'</span></code> in the tag content. If this attribute is not specified, the tag should contain a Bash command calling executable(s) available in the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>, as modified after loading the requirements.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-command">
<h2><a class="toc-backref" href="#id311" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">command</span></code></a><a class="headerlink" href="#tool-command" title="Link to this heading">¶</a></h2>
<p>This tag specifies how Galaxy should invoke the tool’s executable, passing its
required input parameter values (the command line specification links the
parameters supplied in the form with the actual tool executable). Any word
inside it starting with a dollar sign (<code class="docutils literal notranslate"><span class="pre">$</span></code>) will be treated as a variable whose
values can be acquired from one of three sources: parameters, metadata, or
output files. After the substitution of variables with their values, the content
is interpreted with <a class="reference external" href="https://pythonhosted.org/Cheetah/">Cheetah</a> and finally given
to the interpreter specified in the corresponding attribute (if any).</p>
<section id="id23">
<h3>Examples<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h3>
<p>The following uses a compiled executable (<a class="reference external" href="https://bedtools.readthedocs.io/en/latest/">bedtools</a>).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">bed12ToBed6 -i &#39;$input&#39; &gt; &#39;$output&#39;</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
<p>A few things to note about even this simple example:</p>
<ul class="simple">
<li><p>Input and output variables (boringly named <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code>)
are expanded into paths using the <code class="docutils literal notranslate"><span class="pre">$</span></code> Cheetah directive.</p></li>
<li><p>Paths should be quoted so that the Galaxy database files may contain spaces.</p></li>
<li><p>We are building up a shell script - so special characters like <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> can be used
(in this case the standard output of the bedtools call is written to the path
specified by <code class="docutils literal notranslate"><span class="pre">'$output'</span></code>).</p></li>
</ul>
<p>The bed12ToBed6 tool can be found <a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/bedtools/bed12ToBed6.xml">here</a>.</p>
<p>A more sophisticated bedtools example demonstrates the use of loops, conditionals,
and uses whitespace to make a complex command very readable can be found in
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/bedtools/annotateBed.xml">annotateBed</a>
tool.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">bedtools annotate</span>
<span class="cp">-i &#39;${inputA}&#39;</span>
<span class="cp">#if $names.names_select == &#39;yes&#39;:</span>
<span class="cp">    -files</span>
<span class="cp">    #for $bed in $names.beds:</span>
<span class="cp">        &#39;${bed.input}&#39;</span>
<span class="cp">    #end for</span>
<span class="cp">    -names</span>
<span class="cp">    #for $bed in $names.beds:</span>
<span class="cp">        &#39;${bed.inputName}&#39;</span>
<span class="cp">    #end for</span>
<span class="cp">#else:</span>
<span class="cp">    #set files = &#39;&quot; &quot;&#39;.join([str($file) for $file in $names.beds])</span>
<span class="cp">    -files &#39;${files}&#39;</span>
<span class="cp">    #set names = &#39;&quot; &quot;&#39;.join([str($name.display_name) for $name in $names.beds])</span>
<span class="cp">    -names &#39;${names}&#39;</span>
<span class="cp">#end if</span>
<span class="cp">$strand</span>
<span class="cp">$counts</span>
<span class="cp">$both</span>
<span class="cp">&gt; &#39;${output}&#39;</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
<p>The following example (taken from <a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/xpath/xpath.xml">xpath</a> tool)
uses an interpreted executable. In this case a Perl script is shipped with the
tool and the directory of the tool itself is referenced with <code class="docutils literal notranslate"><span class="pre">$__tool_directory__</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">perl &#39;$__tool_directory__/xpath&#39; -q -e &#39;$expression&#39; &#39;$input&#39; &gt; &#39;$output&#39;</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
<p>The following example demonstrates accessing metadata from datasets. Metadata values
(e.g., <code class="docutils literal notranslate"><span class="pre">${input.metadata.chromCol}</span></code>) are acquired from the <code class="docutils literal notranslate"><span class="pre">Metadata</span></code> model associated
with the objects selected as the values of each of the relative form field
parameters in the tool form. Accessing this information is generally enabled using
the following feature components.</p>
<p>A set of “metadata information” is defined for each supported data type (see the
<code class="docutils literal notranslate"><span class="pre">MetadataElement</span></code> objects in the various data types classes in
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/lib/galaxy/datatypes">/lib/galaxy/datatypes</a>.
The <code class="docutils literal notranslate"><span class="pre">DatasetFilenameWrapper</span></code> class in the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/wrappers.py">/lib/galaxy/tools/wrappers.py</a>
code file wraps a metadata collection to return metadata parameters wrapped
according to the Metadata spec.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span><span class="cp">&lt;![CDATA[</span>
<span class="cp">        #set genome = $input.metadata.dbkey</span>
<span class="cp">        #set datatype = $input.datatype</span>
<span class="cp">        mkdir -p output_dir &amp;&amp;</span>
<span class="cp">        python &#39;$__tool_directory__/extract_genomic_dna.py&#39;</span>
<span class="cp">        --input &#39;$input&#39;</span>
<span class="cp">        --genome &#39;$genome&#39;</span>
<span class="cp">        #if $input.is_of_type(&quot;gff&quot;):</span>
<span class="cp">            --input_format &quot;gff&quot;</span>
<span class="cp">            --columns &quot;1,4,5,7&quot;</span>
<span class="cp">            --interpret_features $interpret_features</span>
<span class="cp">        #else:</span>
<span class="cp">            --input_format &quot;interval&quot;</span>
<span class="cp">            --columns &quot;${input.metadata.chromCol},${input.metadata.startCol},${input.metadata.endCol},${input.metadata.strandCol},${input.metadata.nameCol}&quot;</span>
<span class="cp">        #end if</span>
<span class="cp">        --reference_genome_source $reference_genome_cond.reference_genome_source</span>
<span class="cp">        #if str($reference_genome_cond.reference_genome_source) == &quot;cached&quot;</span>
<span class="cp">            --reference_genome $reference_genome_cond.reference_genome.fields.path</span>
<span class="cp">        #else:</span>
<span class="cp">            --reference_genome $reference_genome_cond.reference_genome</span>
<span class="cp">        #end if</span>
<span class="cp">        --output_format $output_format_cond.output_format</span>
<span class="cp">        #if str($output_format_cond.output_format) == &quot;fasta&quot;:</span>
<span class="cp">            --fasta_header_type $output_format_cond.fasta_header_type_cond.fasta_header_type</span>
<span class="cp">            #if str($output_format_cond.fasta_header_type_cond.fasta_header_type) == &quot;char_delimited&quot;:</span>
<span class="cp">                --fasta_header_delimiter $output_format_cond.fasta_header_type_cond.fasta_header_delimiter</span>
<span class="cp">            #end if</span>
<span class="cp">        #end if</span>
<span class="cp">        --output &#39;$output&#39;</span>
<span class="cp">]]&gt;</span><span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
<p>In additon to demonstrating accessing metadata, this example demonstrates:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$input.is_of_type(&quot;gff&quot;)</span></code> which can be used to check if an input is of a
given datatype.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#set</span> <span class="pre">datatype</span> <span class="pre">=</span> <span class="pre">$input.datatype</span></code> which is the syntax for defining variables
in Cheetah.</p></li>
</ul>
</section>
<section id="reserved-variables">
<h3>Reserved Variables<a class="headerlink" href="#reserved-variables" title="Link to this heading">¶</a></h3>
<p>Galaxy provides a few pre-defined variables which can be used in your command line,
even though they don’t appear in your tool’s parameters.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$__tool_directory__</span></code></p></td>
<td><p>The directory the tool description (XML file) currently resides in (new in 15.03)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$__new_file_path__</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">config/galaxy.ini</span></code>’s <code class="docutils literal notranslate"><span class="pre">new_file_path</span></code> value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$__tool_data_path__</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">config/galaxy.ini</span></code>’s tool_data_path value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$__root_dir__</span></code></p></td>
<td><p>Top-level Galaxy source directory made absolute via <code class="docutils literal notranslate"><span class="pre">os.path.abspath()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$__datatypes_config__</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">config/galaxy.ini</span></code>’s datatypes_config value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$__user_id__</span></code></p></td>
<td><p>Email’s numeric ID (id column of <code class="docutils literal notranslate"><span class="pre">galaxy_user</span></code> table in the database)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$__user_email__</span></code></p></td>
<td><p>User’s email address</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">$__app__</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">galaxy.app.UniverseApplication</span></code> instance, gives access to all other configuration file variables (e.g. $<strong>app</strong>.config.output_size_limit). Should be used as a last resort, may go away in future releases.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">$__target_datatype__</span></code></p></td>
<td><p>Only available in converter tools when run internally by Galaxy. Contains the target datatype of the conversion</p></td>
</tr>
</tbody>
</table>
<p>Additional runtime properties are available as environment variables. Since these
are not Cheetah variables (the values aren’t available until runtime) these should likely
be escaped with a backslash (<code class="docutils literal notranslate"><span class="pre">\</span></code>) when appearing in <code class="docutils literal notranslate"><span class="pre">command</span></code> or <code class="docutils literal notranslate"><span class="pre">configfile</span></code> elements.</p>
<p>For internal converter tools using <code class="docutils literal notranslate"><span class="pre">$__target_datatype__</span></code> it is recommended to add a select
input parameter with name <code class="docutils literal notranslate"><span class="pre">__target_datatype__</span></code> in order to make the tool testable, see
for instance the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/datatypes/converters/biom.xml">biom converter</a>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\${GALAXY_SLOTS:-4}</span></code></p></td>
<td><p>Number of cores/threads allocated by the job runner or resource manager to the tool for the given job (here 4 is the default number of threads to use if running via custom runner that does not configure GALAXY_SLOTS or in an older Galaxy runtime).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\$GALAXY_MEMORY_MB</span></code></p></td>
<td><p>Total amount of memory in megabytes (1024^2 bytes) allocated by the administrator (via the resource manager) to the tool for the given job. If unset, tools should not attempt to limit memory usage.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">\$GALAXY_MEMORY_MB_PER_SLOT</span></code></p></td>
<td><p>Amount of memory per slot in megabytes (1024^2 bytes) allocated by the administrator (via the resource manager) to the tool for the given job. If unset, tools should not attempt to limit memory usage.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">\$_GALAXY_JOB_TMP_DIR</span></code></p></td>
<td><p>Path to an empty directory in the job’s working directory that can be used as a temporary directory.</p></td>
</tr>
</tbody>
</table>
<p>See the <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#cluster-usage">Planemo docs</a>
on the topic of <code class="docutils literal notranslate"><span class="pre">GALAXY_SLOTS</span></code> for more information and examples.</p>
</section>
<section id="error-detection">
<h3>Error detection<a class="headerlink" href="#error-detection" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">detect_errors</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">command</span></code>, if present, loads a preset of error detection checks (for exit codes and content of stdio to indicate fatal tool errors or fatal out of memory errors). It can be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: for non-legacy tools with absent stdio block non-zero exit codes are added. For legacy tools or if a stdio block is present nothing is added.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exit_code</span></code>: adds checks for non zero exit codes (The &#64;jmchilton recommendation). The <code class="docutils literal notranslate"><span class="pre">oom_exit_code</span></code> parameter can be used to add an additional out of memory indicating exit code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggressive</span></code>: adds checks for non zero exit codes, and checks for <code class="docutils literal notranslate"><span class="pre">Exception:</span></code>, <code class="docutils literal notranslate"><span class="pre">Error:</span></code> in the standard error. Additionally checks for messages in the standard error that indicate an out of memory error (<code class="docutils literal notranslate"><span class="pre">MemoryError</span></code>, <code class="docutils literal notranslate"><span class="pre">std::bad_alloc</span></code>, <code class="docutils literal notranslate"><span class="pre">java.lang.OutOfMemoryError</span></code>, <code class="docutils literal notranslate"><span class="pre">Out</span> <span class="pre">of</span> <span class="pre">memory</span></code>). (The &#64;bgruening recommendation).</p></li>
</ul>
<p>Prior to Galaxy release 19.01 the stdio block has only been used for non-legacy tools using <code class="docutils literal notranslate"><span class="pre">default</span></code>. From release 19.01 checks defined in the stdio tag are prepended to the checks defined by the presets loaded in the command block.</p>
</section>
<section id="id24">
<h3>Best Practices<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h3>
<p>Find the Intergalactic Utilities Commision suggested best practices for this
element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#command-tag">here</a>.</p>
</section>
<section id="id25">
<h3>Attributes<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">detect_errors</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">detect_errors</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">command</span></code>, if present, loads a preset of error detection checks (for exit codes and content of stdio to indicate fatal tool errors or fatal out of memory errors). It can be one of:  * <code class="docutils literal notranslate"><span class="pre">default</span></code>: for non-legacy tools with absent stdio block non-zero exit codes are added. For legacy tools or if a stdio block is present nothing is added. * <code class="docutils literal notranslate"><span class="pre">exit_code</span></code>: adds checks for non zero exit codes. The <code class="docutils literal notranslate"><span class="pre">oom_exit_code</span></code> parameter can be used to add an additional out of memory indicating exit code. This is the default when a tool specifies a <code class="docutils literal notranslate"><span class="pre">profile</span></code> &gt;= 16.04. * <code class="docutils literal notranslate"><span class="pre">aggressive</span></code>: adds checks for non zero exit codes, and checks for <code class="docutils literal notranslate"><span class="pre">Exception:</span></code>, <code class="docutils literal notranslate"><span class="pre">Error:</span></code> in the standard error. Additionally checks for messages in the standard error that indicate an out of memory error (<code class="docutils literal notranslate"><span class="pre">MemoryError</span></code>, <code class="docutils literal notranslate"><span class="pre">std::bad_alloc</span></code>, <code class="docutils literal notranslate"><span class="pre">java.lang.OutOfMemoryError</span></code>, <code class="docutils literal notranslate"><span class="pre">Out</span> <span class="pre">of</span> <span class="pre">memory</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">oom_exit_code</span></code></p></td>
<td><p>Only used if <code class="docutils literal notranslate"><span class="pre">detect_errors=&quot;exit_code&quot;</span></code>, tells Galaxy the specified exit code indicates an out of memory error. Galaxy instances may be configured to retry such jobs on resources with more memory.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">use_shared_home</span></code></p></td>
<td><p>When running a job for this tool, do not isolate its <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> directory within the job’s directory - use either the <code class="docutils literal notranslate"><span class="pre">shared_home_dir</span></code> setting in Galaxy or the default <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> specified in the job’s default environment.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interpreter</span></code></p></td>
<td><p><em>Deprecated</em>. This will prefix the command with the value of this attribute (e.g. <code class="docutils literal notranslate"><span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">perl</span></code>) and the tool directory, in order to run an executable file shipped with the tool. It is recommended to instead use <code class="docutils literal notranslate"><span class="pre">&lt;interpreter&gt;</span> <span class="pre">'$__tool_directory__/&lt;executable_name&gt;'</span></code> in the tag content. If this attribute is not specified, the tag should contain a Bash command calling executable(s) available in the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>, as modified after loading the requirements.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strict</span></code></p></td>
<td><p>This boolean forces the <code class="docutils literal notranslate"><span class="pre">#set</span> <span class="pre">-e</span></code> directive on in shell scripts - so that in a multi-part command if any part fails the job exits with a non-zero exit code. This is enabled by default for tools with <code class="docutils literal notranslate"><span class="pre">profile&gt;=20.09</span></code> and disabled on legacy tools.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-environment-variables">
<h2><a class="toc-backref" href="#id312" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variables</span></code></a><a class="headerlink" href="#tool-environment-variables" title="Link to this heading">¶</a></h2>
<p>This directive should contain one or more <code class="docutils literal notranslate"><span class="pre">environment_variable</span></code> definition.</p>
</section>
<section id="tool-environment-variables-environment-variable">
<h2><a class="toc-backref" href="#id313" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variables</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">environment_variable</span></code></a><a class="headerlink" href="#tool-environment-variables-environment-variable" title="Link to this heading">¶</a></h2>
<p>This directive defines an environment variable that will be available when the
tool executes. The body should be a Cheetah template block that may reference
the tool’s inputs as demonstrated below.</p>
<section id="id26">
<h3>Example<a class="headerlink" href="#id26" title="Link to this heading">¶</a></h3>
<p>The following demonstrates a couple <code class="docutils literal notranslate"><span class="pre">environment_variable</span></code> definitions.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;environment_variables&gt;</span>
<span class="w">    </span><span class="nt">&lt;environment_variable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;INTVAR&quot;</span><span class="nt">&gt;</span>$inttest<span class="nt">&lt;/environment_variable&gt;</span>
<span class="w">    </span><span class="nt">&lt;environment_variable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;IFTEST&quot;</span><span class="nt">&gt;</span>#if<span class="w"> </span>int($inttest)<span class="w"> </span>==<span class="w"> </span>3
ISTHREE
#else#
NOTTHREE
#end<span class="w"> </span>if#<span class="nt">&lt;/environment_variable&gt;</span>
<span class="w">    </span><span class="nt">&lt;/environment_variables&gt;</span>
<span class="nt">&lt;/environment_variables&gt;</span>
</pre></div>
</div>
<p>If these environment variables are used in another Cheetah context, such as in
the <code class="docutils literal notranslate"><span class="pre">command</span></code> block, the <code class="docutils literal notranslate"><span class="pre">$</span></code> used indicate shell expansion of a variable
should be escaped with a <code class="docutils literal notranslate"><span class="pre">\</span></code> so prevent it from being evaluated as a Cheetah
variable instead of shell variable.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span>
<span class="w">    </span>echo<span class="w"> </span>&quot;\$INTVAR&quot;<span class="w">  </span>&gt;<span class="w">  </span>$out_file1;
<span class="w">    </span>echo<span class="w"> </span>&quot;\$IFTEST&quot;<span class="w">  </span>&gt;&gt;<span class="w"> </span>$out_file1;
<span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
</section>
<section id="inject">
<h3>inject<a class="headerlink" href="#inject" title="Link to this heading">¶</a></h3>
<p>The Galaxy user’s API key can be injected into an environment variable by setting <code class="docutils literal notranslate"><span class="pre">inject</span></code>
attribute to <code class="docutils literal notranslate"><span class="pre">api_key</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">inject=&quot;api_key&quot;</span></code>).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;environment_variables&gt;</span>
<span class="w">    </span><span class="nt">&lt;environment_variable</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;GALAXY_API_KEY&quot;</span><span class="w"> </span><span class="na">inject=</span><span class="s">&quot;api_key&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/environment_variables&gt;</span>
</pre></div>
</div>
<p>The framework allows setting this via environment variable and not via templating variables
in order to discourage setting the actual values of these keys as command line arguments.
On shared systems this provides some security by preventing a simple process listing command
from exposing keys.</p>
</section>
<section id="id27">
<h3>Attributes<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the environment variable to define.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">inject</span></code></p></td>
<td><p>Special variable to inject into the environment variable. Currently ‘api_key’ is the only option and will cause the user’s API key to be injected via this environment variable.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">strip</span></code></p></td>
<td><p>Whether to strip leading and trailing whitespace from the calculated value before exporting the environment variable.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-configfiles">
<h2><a class="toc-backref" href="#id314" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code></a><a class="headerlink" href="#tool-configfiles" title="Link to this heading">¶</a></h2>
<p>See
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/xy_plot/xy_plot.xml">xy_plot.xml</a>
for an example of how this tag set is used in a tool. This tag set is a
container for <code class="docutils literal notranslate"><span class="pre">&lt;configfile&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> tag sets - which can be used
to setup configuration files for use by tools.</p>
</section>
<section id="tool-configfiles-configfile">
<h2><a class="toc-backref" href="#id315" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfile</span></code></a><a class="headerlink" href="#tool-configfiles-configfile" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;configfiles&gt;</span></code> tag set. It allows for
the creation of a temporary file for file-based parameter transfer.</p>
<p><em>Example</em></p>
<p>The following is taken from the <a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/xy_plot/xy_plot.xml">xy_plot.xml</a>
tool config.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;configfiles&gt;</span>
<span class="w">    </span><span class="nt">&lt;configfile</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;script_file&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span>##<span class="w"> </span>Setup<span class="w"> </span>R<span class="w"> </span>error<span class="w"> </span>handling<span class="w"> </span>to<span class="w"> </span>go<span class="w"> </span>to<span class="w"> </span>stderr
<span class="w">      </span>options(show.error.messages=F,<span class="w"> </span>error<span class="w"> </span>=<span class="w"> </span>function<span class="w"> </span>()<span class="w"> </span>{<span class="w"> </span>cat(geterrmessage(),<span class="w"> </span>file=stderr());<span class="w"> </span>q(&quot;no&quot;,<span class="w"> </span>1,<span class="w"> </span>F)<span class="w"> </span>})
<span class="w">      </span>##<span class="w"> </span>Determine<span class="w"> </span>range<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>series<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>plot
<span class="w">      </span>xrange<span class="w"> </span>=<span class="w"> </span>c(NULL,<span class="w"> </span>NULL)
<span class="w">      </span>yrange<span class="w"> </span>=<span class="w"> </span>c(NULL,<span class="w"> </span>NULL)
<span class="w">      </span>#for<span class="w"> </span>$i,<span class="w"> </span>$s<span class="w"> </span>in<span class="w"> </span>enumerate($series)
<span class="w">          </span>s${i}<span class="w"> </span>=<span class="w"> </span>read.table(&quot;${s.input.file_name}&quot;)
<span class="w">          </span>x${i}<span class="w"> </span>=<span class="w"> </span>s${i}[,${s.xcol}]
<span class="w">          </span>y${i}<span class="w"> </span>=<span class="w"> </span>s${i}[,${s.ycol}]
<span class="w">          </span>xrange<span class="w"> </span>=<span class="w"> </span>range(x${i},<span class="w"> </span>xrange)
<span class="w">          </span>yrange<span class="w"> </span>=<span class="w"> </span>range(y${i},<span class="w"> </span>yrange)
<span class="w">      </span>#end<span class="w"> </span>for
<span class="w">      </span>##<span class="w"> </span>Open<span class="w"> </span>output<span class="w"> </span>PDF<span class="w"> </span>file
<span class="w">      </span>pdf(&quot;${out_file1}&quot;)
<span class="w">      </span>##<span class="w"> </span>Dummy<span class="w"> </span>plot<span class="w"> </span>for<span class="w"> </span>axis<span class="w"> </span>/<span class="w"> </span>labels
<span class="w">      </span>plot(NULL,<span class="w"> </span>type=&quot;n&quot;,<span class="w"> </span>xlim=xrange,<span class="w"> </span>ylim=yrange,<span class="w"> </span>main=&quot;${main}&quot;,<span class="w"> </span>xlab=&quot;${xlab}&quot;,<span class="w"> </span>ylab=&quot;${ylab}&quot;)
<span class="w">      </span>##<span class="w"> </span>Plot<span class="w"> </span>each<span class="w"> </span>series
<span class="w">      </span>#for<span class="w"> </span>$i,<span class="w"> </span>$s<span class="w"> </span>in<span class="w"> </span>enumerate($series)
<span class="w">          </span>#if<span class="w"> </span>$s.series_type[&#39;type&#39;]<span class="w"> </span>==<span class="w"> </span>&quot;line&quot;
<span class="w">              </span>lines(x${i},<span class="w"> </span>y${i},<span class="w"> </span>lty=${s.series_type.lty},<span class="w"> </span>lwd=${s.series_type.lwd},<span class="w"> </span>col=${s.series_type.col})
<span class="w">          </span>#elif<span class="w"> </span>$s.series_type.type<span class="w"> </span>==<span class="w"> </span>&quot;points&quot;
<span class="w">              </span>points(x${i},<span class="w"> </span>y${i},<span class="w"> </span>pch=${s.series_type.pch},<span class="w"> </span>cex=${s.series_type.cex},<span class="w"> </span>col=${s.series_type.col})
<span class="w">          </span>#end<span class="w"> </span>if
<span class="w">      </span>#end<span class="w"> </span>for
<span class="w">      </span>##<span class="w"> </span>Close<span class="w"> </span>the<span class="w"> </span>PDF<span class="w"> </span>file
<span class="w">      </span>devname<span class="w"> </span>=<span class="w"> </span>dev.off()
<span class="w">    </span><span class="nt">&lt;/configfile&gt;</span>
<span class="nt">&lt;/configfiles&gt;</span>
</pre></div>
</div>
<p>This file is then used in the <code class="docutils literal notranslate"><span class="pre">command</span></code> block of the tool as follows:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;command&gt;</span>bash<span class="w"> </span>&#39;$__tool_directory__/r_wrapper.sh&#39;<span class="w"> </span>&#39;$script_file&#39;<span class="nt">&lt;/command&gt;</span>
</pre></div>
</div>
<section id="id28">
<h3>Attributes<a class="headerlink" href="#id28" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Cheetah variable used to reference the path to the file created with this directive.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>Path relative to the working directory of the tool for the configfile created in response to this directive.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-configfiles-inputs">
<h2><a class="toc-backref" href="#id316" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">configfiles</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code></a><a class="headerlink" href="#tool-configfiles-inputs" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;configfiles&gt;</span></code> tag set. It tells Galaxy to
write out a JSON representation of the tool parameters.</p>
<p><em>Example</em></p>
<p>The following will create a Cheetah variable that can be evaluated as <code class="docutils literal notranslate"><span class="pre">$inputs</span></code> that
will contain the tool parameter inputs.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;configfiles&gt;</span>
<span class="w">    </span><span class="nt">&lt;inputs</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;inputs&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/configfiles&gt;</span>
</pre></div>
</div>
<p>The following will instead write the inputs to the tool’s working directory with
the specified name (i.e. <code class="docutils literal notranslate"><span class="pre">inputs.json</span></code>).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;configfiles&gt;</span>
<span class="w">    </span><span class="nt">&lt;inputs</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;inputs&quot;</span><span class="w"> </span><span class="na">filename=</span><span class="s">&quot;inputs.json&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/configfiles&gt;</span>
</pre></div>
</div>
<p>A contrived example of a tool that uses this is the test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/inputs_as_json.xml">inputs_as_json.xml</a>.</p>
<p>By default this file will not contain paths for data or collection inputs. To include simple
paths for data or collection inputs set the <code class="docutils literal notranslate"><span class="pre">data_style</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">paths</span></code> (see <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/inputs_as_json_with_paths.xml">inputs_as_json_with_paths.xml</a> for an example).
To include a dictionary with staging paths, paths and metadata files set the <code class="docutils literal notranslate"><span class="pre">data_style</span></code> attribute to <code class="docutils literal notranslate"><span class="pre">staging_path_and_source_path</span></code>.
An example tool that uses <code class="docutils literal notranslate"><span class="pre">staging_path_and_source_path</span></code> is <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/inputs_as_json_with_staging_path_and_source_path.xml">inputs_as_json_with_staging_path_and_source_path.xml</a></p>
<p>For tools with profile &gt;= 20.05 a select with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> is rendered as an array which is empty if nothing is selected. For older profile versions select lists are rendered as comma separated strings or a literal <code class="docutils literal notranslate"><span class="pre">null</span></code> in case nothing is selected.</p>
<section id="id29">
<h3>Attributes<a class="headerlink" href="#id29" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Cheetah variable to populate the path to the inputs JSON file created in response to this directive.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>Path relative to the working directory of the tool for the inputs JSON file created in response to this directive.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">data_style</span></code></p></td>
<td><p>Set to ‘paths’ to include dataset paths in the resulting file. Set to ‘staging_path_and_source_path’ to include a staging path, a source path and all metadata files.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs">
<h2><a class="toc-backref" href="#id317" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code></a><a class="headerlink" href="#tool-inputs" title="Link to this heading">¶</a></h2>
<p>Consists of all elements that define the
tool’s input parameters. Each <a class="reference internal" href="#tool-inputs-param">param</a> element contained in this element
can be used as a command line parameter within the <a class="reference internal" href="#tool-command">command</a> text content. Most
tools will not need to specify any attributes on this tag itself.</p>
<section id="id30">
<h3>Attributes<a class="headerlink" href="#id30" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td><p>URL used by data source tools.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">check_values</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to disable parameter checking in data source tools.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">method</span></code></p></td>
<td><p>Data source HTTP action (e.g. <code class="docutils literal notranslate"><span class="pre">get</span></code> or <code class="docutils literal notranslate"><span class="pre">put</span></code>) to use.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>UI link target to use for data source tools (e.g. <code class="docutils literal notranslate"><span class="pre">_top</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nginx_upload</span></code></p></td>
<td><p>This boolean indicates if this is an upload tool or not.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-section">
<h2><a class="toc-backref" href="#id318" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">section</span></code></a><a class="headerlink" href="#tool-inputs-section" title="Link to this heading">¶</a></h2>
<p>This tag is used to group parameters into sections of the interface. Sections
are implemented to replace the commonly used tactic of hiding advanced options
behind a conditional, with sections you can easily visually group a related set
of options.</p>
<section id="id31">
<h3>Example<a class="headerlink" href="#id31" title="Link to this heading">¶</a></h3>
<p>The XML configuration is relatively trivial for sections:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;section</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;section_name&quot;</span><span class="w"> </span><span class="na">title=</span><span class="s">&quot;Section Title&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;parameter_name&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;A parameter  label&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/inputs&gt;</span>
</pre></div>
</div>
<p>In your command template, you’ll need to include the section name to access the
variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$section_name.parameter_name
</pre></div>
</div>
<p>In output filters sections are represented as dictionary with the same name as the section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">filter</span><span class="o">&gt;</span><span class="n">section_name</span><span class="p">[</span><span class="s1">&#39;parameter_name&#39;</span><span class="p">]</span><span class="o">&lt;/</span><span class="nb">filter</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In order to reference parameters in sections from tags in the <code class="docutils literal notranslate"><span class="pre">&lt;outputs&gt;</span></code> section, e.g. in the <code class="docutils literal notranslate"><span class="pre">format_source</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tags, the syntax is currently:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">data</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;output&quot;</span> <span class="n">format_source</span><span class="o">=</span><span class="s2">&quot;parameter_name&quot;</span> <span class="n">metadata_source</span><span class="o">=</span><span class="s2">&quot;parameter_name&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Note that references to other parameters in the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> section are only possible if the reference is in the same section or its parents (and is defined earlier), therefore only <code class="docutils literal notranslate"><span class="pre">parameter_name</span></code> is used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data&quot;</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;tabular&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data_column&quot;</span> <span class="n">data_ref</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">section</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;qux&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data_column&quot;</span> <span class="n">data_ref</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data&quot;</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;tabular&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;baz&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data_column&quot;</span> <span class="n">data_ref</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">section</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In the above example <code class="docutils literal notranslate"><span class="pre">bar</span></code> and <code class="docutils literal notranslate"><span class="pre">qux</span></code> will refer to the first foo outside of the section and <code class="docutils literal notranslate"><span class="pre">baz</span></code> to the <code class="docutils literal notranslate"><span class="pre">foo</span></code> inside the section. This illustrates why non-unique parameter names are strongly discouraged.</p>
<p>The following will not work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">&lt;</span><span class="n">section</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data&quot;</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;tabular&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">section</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">param</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;data_column&quot;</span> <span class="n">data_ref</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Further examples can be found in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/section.xml">test case</a> from <a class="reference external" href="https://github.com/galaxyproject/galaxy/pull/35">pull request #35</a>.</p>
</section>
<section id="id32">
<h3>Attributes<a class="headerlink" href="#id32" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>The internal key used for the section.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">title</span></code></p></td>
<td><p>Human readable label for the section.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expanded</span></code></p></td>
<td><p>Whether the section should be expanded by default or not. If not, the default set values are used.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">help</span></code></p></td>
<td><p>Short help description for section, rendered just below the section.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-repeat">
<h2><a class="toc-backref" href="#id319" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">repeat</span></code></a><a class="headerlink" href="#tool-inputs-repeat" title="Link to this heading">¶</a></h2>
<p>See
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/xy_plot/xy_plot.xml">xy_plot.xml</a>
for an example of how to use this tag set. This is a container for any tag sets
that can be contained within the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> tag set. When this is used, the
tool will allow the user to add any number of additional sets of the contained
parameters (an option to add new iterations will be displayed on the tool form).
All input parameters contained within the <code class="docutils literal notranslate"><span class="pre">&lt;repeat&gt;</span></code> tag can be retrieved by
enumerating over <code class="docutils literal notranslate"><span class="pre">$&lt;name_of_repeat_tag_set&gt;</span></code> in the relevant Cheetah code.
This returns the rank and the parameter objects of the repeat container. See the
Cheetah code below.</p>
<section id="id33">
<h3>Example<a class="headerlink" href="#id33" title="Link to this heading">¶</a></h3>
<p>This part is contained in the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> tag set.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series&quot;</span><span class="w"> </span><span class="na">title=</span><span class="s">&quot;Series&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Dataset&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xcol&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_column&quot;</span><span class="w"> </span><span class="na">data_ref=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Column for x axis&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ycol&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_column&quot;</span><span class="w"> </span><span class="na">data_ref=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Column for y axis&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/repeat&gt;</span>
</pre></div>
</div>
<p>This Cheetah code can be used in the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag set or the
<code class="docutils literal notranslate"><span class="pre">&lt;configfile&gt;</span></code> tag set.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#for $i, $s in enumerate($series)
    rank_of_series=$i
    input_path=&#39;${s.input}&#39;
    x_colom=${s.xcol}
    y_colom=${s.ycol}
#end for
</pre></div>
</div>
</section>
<section id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Link to this heading">¶</a></h3>
<p>This is an example test case with multiple repeat elements for the example above.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tabular1.tsv&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xcol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ycol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tabular2.tsv&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xcol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ycol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;cool.pdf&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;pdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>See the documentation on the <a class="reference internal" href="#tool-tests-test-repeat">repeat test directive</a>.</p>
<p>An older way to specify repeats in a test is by instances that are created by referring to names with a special format: <code class="docutils literal notranslate"><span class="pre">&lt;repeat</span> <span class="pre">name&gt;_&lt;repeat</span> <span class="pre">index&gt;|&lt;param</span> <span class="pre">name&gt;</span></code></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_0|input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tabular1.tsv&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_0|xcol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_0|ycol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_1|input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tabular2.tsv&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_1|xcol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;series_1|ycol&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;cool.pdf&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;pdf&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>The test tool <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/disambiguate_repeats.xml">disambiguate_repeats.xml</a>
demonstrates both testing strategies.</p>
</section>
<section id="id34">
<h3>Attributes<a class="headerlink" href="#id34" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this element</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">title</span></code></p></td>
<td><p>The title of the repeat section, which will be displayed on the tool form.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>The minimum number of repeat units.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>The maximum number of repeat units.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></td>
<td><p>The default number of repeat units.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">help</span></code></p></td>
<td><p>Short help description for repeat element.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-conditional">
<h2><a class="toc-backref" href="#id320" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a><a class="headerlink" href="#tool-inputs-conditional" title="Link to this heading">¶</a></h2>
<p>This is a container for conditional parameters in the tool (must contain ‘when’
tag sets) - the command line (or portions thereof) are then wrapped in an if-else
statement. A good example tool that demonstrates many conditional parameters is
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/biom_format/biom_convert.xml">biom_convert.xml</a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_type&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_type_selector&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Choose the source BIOM format&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tsv&quot;</span><span class="w"> </span><span class="na">selected=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>Tabular<span class="w"> </span>File<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;biom&quot;</span><span class="nt">&gt;</span>BIOM<span class="w"> </span>File<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;/param&gt;</span>
<span class="w">    </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tsv&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_table&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Tabular File&quot;</span><span class="w"> </span><span class="na">argument=</span><span class="s">&quot;--input-fp&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">argument=</span><span class="s">&quot;--process-obs-metadata&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Process metadata associated with observations when converting&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="na">selected=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>Do<span class="w"> </span>Not<span class="w"> </span>process<span class="w"> </span>metadata<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;taxonomy&quot;</span><span class="nt">&gt;</span>taxonomy<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;naive&quot;</span><span class="nt">&gt;</span>naive<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;sc_separated&quot;</span><span class="nt">&gt;</span>sc_separated<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">    </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;biom&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_table&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;biom1&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Tabular File&quot;</span><span class="w"> </span><span class="na">argument=</span><span class="s">&quot;--input-fp&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/when&gt;</span>
<span class="nt">&lt;/conditional&gt;</span>
</pre></div>
</div>
<p>The first directive following the conditional is a <a class="reference internal" href="#tool-inputs-param">param</a>,
this param must be of type <code class="docutils literal notranslate"><span class="pre">select</span></code> or <code class="docutils literal notranslate"><span class="pre">boolean</span></code>. Depending on the value a
user selects for this “test” parameter - different UI elements will be shown.
These different paths are described by the following the <code class="docutils literal notranslate"><span class="pre">when</span></code> blocks shown
above.</p>
<p>The following Cheetah block demonstrates the use of the <code class="docutils literal notranslate"><span class="pre">conditional</span></code>
shown above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">biom</span> <span class="n">convert</span> <span class="o">-</span><span class="n">i</span> <span class="s2">&quot;$</span><span class="si">{input_type.input_table}</span><span class="s2">&quot;</span> <span class="o">-</span><span class="n">o</span> <span class="s2">&quot;$</span><span class="si">{output_table}</span><span class="s2">&quot;</span>
<span class="c1">#if str($input_type.input_type_selector) == &quot;tsv&quot;:</span>
    <span class="c1">#if $input_type.process_obs_metadata:</span>
        <span class="o">--</span><span class="n">process</span><span class="o">-</span><span class="n">obs</span><span class="o">-</span><span class="n">metadata</span> <span class="s2">&quot;$</span><span class="si">{input_type.process_obs_metadata}</span><span class="s2">&quot;</span>
    <span class="c1">#end if</span>
<span class="c1">#end if</span>
</pre></div>
</div>
<p>Notice that the parameter <code class="docutils literal notranslate"><span class="pre">input_table</span></code> appears down both <code class="docutils literal notranslate"><span class="pre">when</span></code> clauses
so <code class="docutils literal notranslate"><span class="pre">${input_type.input_table}</span></code> appears unconditionally but we need to
conditionally reference <code class="docutils literal notranslate"><span class="pre">${input_type.process_obs_metadata}</span></code> with a Cheetah
<code class="docutils literal notranslate"><span class="pre">if</span></code> statement.</p>
<p>A common use of the conditional wrapper is to select between reference data
managed by the Galaxy admins (for instance via
<a class="reference external" href="https://galaxyproject.org/admin/tools/data-managers/">data managers</a>
) and
history files. A good example tool that demonstrates this is
the <a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/bowtie2/bowtie2_wrapper.xml">Bowtie 2</a> wrapper.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;source&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Will you select a reference genome from your history or use a built-in index?&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;Built-ins were indexed using default options. See `Indexes` section of help below&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>a<span class="w"> </span>built-in<span class="w"> </span>genome<span class="w"> </span>index<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;history&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>a<span class="w"> </span>genome<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>history<span class="w"> </span>and<span class="w"> </span>build<span class="w"> </span>index<span class="nt">&lt;/option&gt;</span>
<span class="w">  </span><span class="nt">&lt;/param&gt;</span>
<span class="w">  </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;index&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select reference genome&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;If your genome of interest is not listed, contact the Galaxy team&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_data_table=</span><span class="s">&quot;bowtie2_indexes&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;sort_by&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/options&gt;</span>
<span class="w">      </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;no_options&quot;</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;No indexes are available for the selected input dataset&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/param&gt;</span>
<span class="w">  </span><span class="nt">&lt;/when&gt;</span>
<span class="w">  </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;history&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;own_file&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select reference genome&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/when&gt;</span>
<span class="nt">&lt;/conditional&gt;</span>
</pre></div>
</div>
<p>The Bowtie 2 wrapper also demonstrates other conditional paths - such as choosing
between paired inputs of single stranded inputs.</p>
<section id="id35">
<h3>Attributes<a class="headerlink" href="#id35" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this element</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value_from</span></code></p></td>
<td><p>Infrequently used option to dynamically access Galaxy internals, this should be avoided.  Galaxy method to execute.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value_ref</span></code></p></td>
<td><p>Infrequently used option to dynamically access Galaxy internals, this should be avoided.  Referenced parameter to pass method.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value_ref_in_group</span></code></p></td>
<td><p>Infrequently used option to dynamically access Galaxy internals, this should be avoided.  Is referenced parameter is the same group.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>Human readable description for the conditional, unused in the Galaxy UI currently.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-conditional-when">
<h2><a class="toc-backref" href="#id321" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a><a class="headerlink" href="#tool-inputs-conditional-when" title="Link to this heading">¶</a></h2>
<p>This directive describes one potential
set of input for the tool at this depth. See documentation for the
<a class="reference internal" href="#tool-inputs-conditional">conditional</a> block for more details and examples (XML
and corresponding Cheetah conditionals).</p>
<section id="id36">
<h3>Attributes<a class="headerlink" href="#id36" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Value for the tool form test parameter corresponding to this <code class="docutils literal notranslate"><span class="pre">when</span></code> block.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param">
<h2><a class="toc-backref" href="#id322" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code></a><a class="headerlink" href="#tool-inputs-param" title="Link to this heading">¶</a></h2>
<p>Contained within the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> tag set - each of these specifies a field that
will be displayed on the tool form. Ultimately, the values of these form fields
will be passed as the command line parameters to the tool’s executable.</p>
<section id="common-attributes">
<h3>Common Attributes<a class="headerlink" href="#common-attributes" title="Link to this heading">¶</a></h3>
<p>The attributes valid for this tag vary wildly based on the <code class="docutils literal notranslate"><span class="pre">type</span></code> of the
parameter being described. All the attributes for the <code class="docutils literal notranslate"><span class="pre">param</span></code> element are
documented below for completeness, but here are the common ones for each
type are as follows:</p>
<section id="id37">
<h4>Attributes<a class="headerlink" href="#id37" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Describes the parameter type - each different type as different semantics and the tool form widget is different. Currently valid parameter types are: <code class="docutils literal notranslate"><span class="pre">text</span></code>,  <code class="docutils literal notranslate"><span class="pre">integer</span></code>,  <code class="docutils literal notranslate"><span class="pre">float</span></code>,  <code class="docutils literal notranslate"><span class="pre">boolean</span></code>,  <code class="docutils literal notranslate"><span class="pre">genomebuild</span></code>,  <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>,  <code class="docutils literal notranslate"><span class="pre">data_column</span></code>,  <code class="docutils literal notranslate"><span class="pre">hidden</span></code>,  <code class="docutils literal notranslate"><span class="pre">hidden_data</span></code>,  <code class="docutils literal notranslate"><span class="pre">baseurl</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code>,  <code class="docutils literal notranslate"><span class="pre">ftpfile</span></code>,  <code class="docutils literal notranslate"><span class="pre">data</span></code>,  <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>,  <code class="docutils literal notranslate"><span class="pre">library_data</span></code>, <code class="docutils literal notranslate"><span class="pre">drill_down</span></code>. The definition of supported parameter types as defined in the <code class="docutils literal notranslate"><span class="pre">parameter_types</span></code> dictionary in <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/parameters/basic.py">/lib/galaxy/tools/parameters/basic.py</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this element. This <code class="docutils literal notranslate"><span class="pre">name</span></code> is used as the Cheetah variable containing the user-supplied parameter name in <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">configfile</span></code> elements. The name should not contain pipes or periods (e.g. <code class="docutils literal notranslate"><span class="pre">.</span></code>). Some “reserved” names are <code class="docutils literal notranslate"><span class="pre">REDIRECT_URL</span></code>, <code class="docutils literal notranslate"><span class="pre">DATA_URL</span></code>, <code class="docutils literal notranslate"><span class="pre">GALAXY_URL</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">argument</span></code></p></td>
<td><p>If the parameter reflects just one command line argument of a certain tool, this tag should be set to that particular argument. It is rendered in parenthesis after the help section, and it will create the name attribute (if not given explicitly) from the argument attribute by stripping leading dashes and replacing all remaining dashes by underscores (e.g. if <code class="docutils literal notranslate"><span class="pre">argument=&quot;--long-parameter&quot;</span></code> then <code class="docutils literal notranslate"><span class="pre">name=&quot;long_parameter&quot;</span></code> is implicit).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>The attribute value will be displayed on the tool page as the label of the form field (<code class="docutils literal notranslate"><span class="pre">label=&quot;Sort</span> <span class="pre">Query&quot;</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">help</span></code></p></td>
<td><p>Short bit of text, rendered on the tool form just below the associated field to provide information about the field. Find the Intergalactic Utilities Commision suggested best practices for this element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#parameter-help">here</a>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">optional</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, parameter must have a value. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code> except when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">multiple</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">refresh_on_change</span></code></p></td>
<td><p>Force a reload of the tool panel when the value of this parameter changes to allow <code class="docutils literal notranslate"><span class="pre">code</span></code> file processing. See deprecation-like notice for <code class="docutils literal notranslate"><span class="pre">code</span></code> blocks.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="parameter-types">
<h3>Parameter Types<a class="headerlink" href="#parameter-types" title="Link to this heading">¶</a></h3>
<section id="text">
<h4><code class="docutils literal notranslate"><span class="pre">text</span></code><a class="headerlink" href="#text" title="Link to this heading">¶</a></h4>
<p>When <code class="docutils literal notranslate"><span class="pre">type=&quot;text&quot;</span></code>, the parameter is free form text and appears as a text box
in the tool form.</p>
<section id="id38">
<h5>Examples<a class="headerlink" href="#id38" title="Link to this heading">¶</a></h5>
<p>Sometimes you need labels for data or graph axes, chart titles, etc. This can be
done using a text field. The following will create a text box with the default
value of “V1”.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xlab&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;V1&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Label for x axis&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">area</span></code> boolean attribute can be used to change the <code class="docutils literal notranslate"><span class="pre">text</span></code> parameter to a
two-dimensional text area instead of a single line text box.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">area=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Since release 17.01, <code class="docutils literal notranslate"><span class="pre">text</span></code> parameters can also supply a static list of preset
defaults options. The user <strong>may</strong> be presented with the option to select one of
these but will be allowed to supply an arbitrary text value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;foo 1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;foo 1&quot;</span><span class="nt">&gt;</span>Foo<span class="w"> </span>1<span class="w"> </span>Display<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;foo 2&quot;</span><span class="nt">&gt;</span>Foo<span class="w"> </span>2<span class="w"> </span>Display<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/param_text_option.xml">param_text_option.xml</a>
for a demonstration of this.</p>
</section>
<section id="id39">
<h5>Attributes<a class="headerlink" href="#id39" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">area</span></code></p></td>
<td><p>Boolean indicating if this should be rendered as a one line text box (if <code class="docutils literal notranslate"><span class="pre">false</span></code>, the default) or a multi-line text  area (if <code class="docutils literal notranslate"><span class="pre">true</span></code>). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>The default value for this parameter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td><p><em>Deprecated</em>. Completely ignored since release 16.10. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="integer-and-float">
<h4><code class="docutils literal notranslate"><span class="pre">integer</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code><a class="headerlink" href="#integer-and-float" title="Link to this heading">¶</a></h4>
<p>These parameters represent whole number and real numbers, respectively.</p>
<section id="id40">
<h5>Example<a class="headerlink" href="#id40" title="Link to this heading">¶</a></h5>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;region_size&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;integer&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Size of the flanking regions&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
</section>
<section id="id41">
<h5>Attributes<a class="headerlink" href="#id41" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>The default value for this parameter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="boolean">
<h4><code class="docutils literal notranslate"><span class="pre">boolean</span></code><a class="headerlink" href="#boolean" title="Link to this heading">¶</a></h4>
<p>This represents a binary true or false value.</p>
<section id="id42">
<h5>Attributes<a class="headerlink" href="#id42" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">checked</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if the <code class="docutils literal notranslate"><span class="pre">boolean</span></code> parameter should be checked (or <code class="docutils literal notranslate"><span class="pre">true</span></code>) by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">truevalue</span></code></p></td>
<td><p>The parameter value in the Cheetah template if the parameter is <code class="docutils literal notranslate"><span class="pre">true</span></code> or checked by the user. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">falsevalue</span></code></p></td>
<td><p>The parameter value in the Cheetah template if the parameter is <code class="docutils literal notranslate"><span class="pre">false</span></code> or not checked by the user. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data">
<h4><code class="docutils literal notranslate"><span class="pre">data</span></code><a class="headerlink" href="#data" title="Link to this heading">¶</a></h4>
<p>A dataset from the current history. Multiple types might be used for the param form.</p>
<section id="id43">
<h5>Examples<a class="headerlink" href="#id43" title="Link to this heading">¶</a></h5>
<p>The following will find all “coordinate interval files” contained within the
current history and dynamically populate a select list with them. If they are
selected, their destination and internal file name will be passed to the
appropriate command line variable.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;interval_file&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;near intervals in&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The following demonstrates a <code class="docutils literal notranslate"><span class="pre">param</span></code> which may accept multiple files and
multiple formats.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;sam,bam&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bamOrSamFile&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span>
<span class="w">       </span><span class="na">label=</span><span class="s">&quot;Alignments in BAM or SAM format&quot;</span>
<span class="w">       </span><span class="na">help=</span><span class="s">&quot;The set of aligned reads.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Perhaps counter-intuitively, a <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> data parameter requires at least one
data input. If <code class="docutils literal notranslate"><span class="pre">optional=&quot;true&quot;</span></code> is specified, this condition is relaxed and the user
is allowed to select 0 datasets. Unfortunately, if 0 datasets are selected the resulting
value for the parameter during Cheetah templating (such as in a <code class="docutils literal notranslate"><span class="pre">command</span></code> block) will
effectively be a list with one <code class="docutils literal notranslate"><span class="pre">None</span></code>-like entity in it.</p>
<p>The following idiom can be used to iterate over such a list and build a hypothetical <code class="docutils literal notranslate"><span class="pre">-B</span></code>
parameter for each file - the <code class="docutils literal notranslate"><span class="pre">if</span></code> block is used to handle the case where a <code class="docutils literal notranslate"><span class="pre">None</span></code>-like
entity appears in the list because no files were selected:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#for $input in $input1</span>
    <span class="c1">#if $input</span>
        <span class="o">-</span><span class="n">B</span> <span class="s2">&quot;$input&quot;</span>
    <span class="c1">#end if</span>
<span class="c1">#end for</span>
</pre></div>
</div>
<p>Some example tools using <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> data parameters include:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_data_param.xml">multi_data_param.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_data_optional.xml">multi_data_optional.xml</a></p></li>
</ul>
<p>Additionally, a detailed discussion of handling multiple homogenous files can be found in the
the <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#consuming-collections">Planemo Documentation</a>
on this topic.</p>
</section>
<section id="id44">
<h5>Attributes<a class="headerlink" href="#id44" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">load_contents</span></code></p></td>
<td><p>Number of bytes that should be loaded into the <code class="docutils literal notranslate"><span class="pre">contents</span></code> attribute of the jobs dictionary provided to Expression Tools. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">optional</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, parameter must have a value. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code> except when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">multiple</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>The comma-separated list of accepted data formats for this input. The list of supported data formats is contained in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> file (use the file extension). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="group-tag">
<h4><code class="docutils literal notranslate"><span class="pre">group_tag</span></code><a class="headerlink" href="#group-tag" title="Link to this heading">¶</a></h4>
<section id="id45">
<h5>Attributes<a class="headerlink" href="#id45" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="select">
<h4><code class="docutils literal notranslate"><span class="pre">select</span></code><a class="headerlink" href="#select" title="Link to this heading">¶</a></h4>
<p>The following will create a select list containing the options “Downstream” and
“Upstream”. Depending on the selection, a <code class="docutils literal notranslate"><span class="pre">d</span></code> or <code class="docutils literal notranslate"><span class="pre">u</span></code> value will be passed to
the <code class="docutils literal notranslate"><span class="pre">$upstream_or_down</span></code> variable on the command line.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;upstream_or_down&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Get&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;u&quot;</span><span class="nt">&gt;</span>Upstream<span class="nt">&lt;/option&gt;</span>
<span class="w">  </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>Downstream<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>The following will create a checkbox list allowing the user to select
“Downstream”, “Upstream”, both, or neither. Depending on the selection, the
value of <code class="docutils literal notranslate"><span class="pre">$upstream_or_down</span></code> will be <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">u</span></code>, <code class="docutils literal notranslate"><span class="pre">u,d</span></code>, or “”.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;upstream_or_down&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Get&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">display=</span><span class="s">&quot;checkboxes&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;u&quot;</span><span class="nt">&gt;</span>Upstream<span class="nt">&lt;/option&gt;</span>
<span class="w">  </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>Downstream<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<section id="id46">
<h5>Attributes<a class="headerlink" href="#id46" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">data_ref</span></code></p></td>
<td><p>Used with select lists whose options are dynamically generated based on certain metadata attributes of the dataset or collection upon which this parameter depends (usually but not always the tool’s input dataset). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">display</span></code></p></td>
<td><p>Render a select list as a set of checkboxes (<code class="docutils literal notranslate"><span class="pre">checkboxes</span></code>; note this is incompatible with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;false&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">optional=&quot;false&quot;</span></code>) or radio buttons (<code class="docutils literal notranslate"><span class="pre">radio</span></code>; note this is incompatible with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">optional=&quot;true&quot;</span></code>). Defaults to a drop-down menu select list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic_options</span></code></p></td>
<td><p>Deprecated/discouraged method to allow access to Python code to generate options for a select list. See <code class="docutils literal notranslate"><span class="pre">code</span></code>’s documentation for an example.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-column">
<h4><code class="docutils literal notranslate"><span class="pre">data_column</span></code><a class="headerlink" href="#data-column" title="Link to this heading">¶</a></h4>
<p>This parameter type is used to select columns from a parameter.</p>
<section id="id47">
<h5>Attributes<a class="headerlink" href="#id47" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">force_select</span></code></p></td>
<td><p><em>Deprecated</em>. This is the inverse of <code class="docutils literal notranslate"><span class="pre">optional</span></code>. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to not force user to select an option in the list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numerical</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> a data column will be treated as numerical when filtering columns based on metadata. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="drill-down">
<h4><code class="docutils literal notranslate"><span class="pre">drill_down</span></code><a class="headerlink" href="#drill-down" title="Link to this heading">¶</a></h4>
<p>Allows to select values from a hierarchy. The default (<code class="docutils literal notranslate"><span class="pre">hierarchy=&quot;exact&quot;</span></code>) is
that only exactly the selected options are used. With <code class="docutils literal notranslate"><span class="pre">hierarchy=&quot;recurse&quot;</span></code>
all leaf nodes in the subtree are used.</p>
<p>See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/drill_down.xml">drill_down.xml</a></p>
<section id="id48">
<h5>Attributes<a class="headerlink" href="#id48" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hierarchy</span></code></p></td>
<td><p>Determine if a drill down is <code class="docutils literal notranslate"><span class="pre">recursive</span></code> or <code class="docutils literal notranslate"><span class="pre">exact</span></code>. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">drill_down</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-collection">
<h4><code class="docutils literal notranslate"><span class="pre">data_collection</span></code><a class="headerlink" href="#data-collection" title="Link to this heading">¶</a></h4>
<p>The following will create a parameter that only accepts paired FASTQ files grouped into a collection.</p>
<section id="id49">
<h5>Examples<a class="headerlink" href="#id49" title="Link to this heading">¶</a></h5>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;inputs&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_collection&quot;</span><span class="w"> </span><span class="na">collection_type=</span><span class="s">&quot;paired&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Input FASTQs&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fastq&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>More detailed information on writing tools that consume collections can be found
in the <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#collections">planemo documentation</a>.</p>
</section>
<section id="id50">
<h5>Attributes<a class="headerlink" href="#id50" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>The comma-separated list of accepted data formats for this input. The list of supported data formats is contained in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> file (use the file extension). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">collection_type</span></code></p></td>
<td><p>Restrict the kind of collection that can be consumed by this parameter. Simple collections are either <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">paired</span></code>), nested collections are specified as colon separated list of simple collection types (the most common types are <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">paired</span></code>, <code class="docutils literal notranslate"><span class="pre">list:paired</span></code>, or <code class="docutils literal notranslate"><span class="pre">list:list</span></code>). Multiple such collection types can be specified here as a comma-separated list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="color">
<h4><code class="docutils literal notranslate"><span class="pre">color</span></code><a class="headerlink" href="#color" title="Link to this heading">¶</a></h4>
<section id="id51">
<h5>Examples<a class="headerlink" href="#id51" title="Link to this heading">¶</a></h5>
<p>The following example will create a color selector parameter.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;feature_color&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Default feature color&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;#ff00ff&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>Given that the output includes a pound sign, it is often convenient to use a
sanitizer to prevent Galaxy from escaping the result.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;feature_color&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Default feature color&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;#ff00ff&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;sanitizer&gt;</span>
<span class="w">    </span><span class="nt">&lt;valid</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;string.ascii_letters,string.digits&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/valid&gt;</span>
<span class="w">  </span><span class="nt">&lt;/sanitizer&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
</section>
<section id="id52">
<h5>Attributes<a class="headerlink" href="#id52" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>The default value for this parameter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rgb</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, the returned value will be in Hex color code. If <code class="docutils literal notranslate"><span class="pre">true</span></code>, it will be a RGB value e.g. <code class="docutils literal notranslate"><span class="pre">0,0,255</span></code>. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">color</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="directory-uri">
<h4><code class="docutils literal notranslate"><span class="pre">directory_uri</span></code><a class="headerlink" href="#directory-uri" title="Link to this heading">¶</a></h4>
<p>This is used to tie into galaxy.files URI infrastructure. This should only be used by
core Galaxy tools until the interface around files has stabilized.</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">directory_uri</span></code> parameters provide user’s the option of selecting a writable
directory destination for unstructured outputs of tools (e.g. history exports).</p>
<p>This covers examples of the most common parameter types, the remaining parameter
types are more obsecure and less likely to be useful for most tool authors.</p>
</section>
</section>
<section id="id53">
<h3>Attributes<a class="headerlink" href="#id53" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Describes the parameter type - each different type as different semantics and the tool form widget is different. Currently valid parameter types are: <code class="docutils literal notranslate"><span class="pre">text</span></code>,  <code class="docutils literal notranslate"><span class="pre">integer</span></code>,  <code class="docutils literal notranslate"><span class="pre">float</span></code>,  <code class="docutils literal notranslate"><span class="pre">boolean</span></code>,  <code class="docutils literal notranslate"><span class="pre">genomebuild</span></code>,  <code class="docutils literal notranslate"><span class="pre">select</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>,  <code class="docutils literal notranslate"><span class="pre">data_column</span></code>,  <code class="docutils literal notranslate"><span class="pre">hidden</span></code>,  <code class="docutils literal notranslate"><span class="pre">hidden_data</span></code>,  <code class="docutils literal notranslate"><span class="pre">baseurl</span></code>, <code class="docutils literal notranslate"><span class="pre">file</span></code>,  <code class="docutils literal notranslate"><span class="pre">ftpfile</span></code>,  <code class="docutils literal notranslate"><span class="pre">data</span></code>,  <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>,  <code class="docutils literal notranslate"><span class="pre">library_data</span></code>, <code class="docutils literal notranslate"><span class="pre">drill_down</span></code>. The definition of supported parameter types as defined in the <code class="docutils literal notranslate"><span class="pre">parameter_types</span></code> dictionary in <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/parameters/basic.py">/lib/galaxy/tools/parameters/basic.py</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this element. This <code class="docutils literal notranslate"><span class="pre">name</span></code> is used as the Cheetah variable containing the user-supplied parameter name in <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">configfile</span></code> elements. The name should not contain pipes or periods (e.g. <code class="docutils literal notranslate"><span class="pre">.</span></code>). Some “reserved” names are <code class="docutils literal notranslate"><span class="pre">REDIRECT_URL</span></code>, <code class="docutils literal notranslate"><span class="pre">DATA_URL</span></code>, <code class="docutils literal notranslate"><span class="pre">GALAXY_URL</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">area</span></code></p></td>
<td><p>Boolean indicating if this should be rendered as a one line text box (if <code class="docutils literal notranslate"><span class="pre">false</span></code>, the default) or a multi-line text  area (if <code class="docutils literal notranslate"><span class="pre">true</span></code>). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">argument</span></code></p></td>
<td><p>If the parameter reflects just one command line argument of a certain tool, this tag should be set to that particular argument. It is rendered in parenthesis after the help section, and it will create the name attribute (if not given explicitly) from the argument attribute by stripping leading dashes and replacing all remaining dashes by underscores (e.g. if <code class="docutils literal notranslate"><span class="pre">argument=&quot;--long-parameter&quot;</span></code> then <code class="docutils literal notranslate"><span class="pre">name=&quot;long_parameter&quot;</span></code> is implicit).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>The attribute value will be displayed on the tool page as the label of the form field (<code class="docutils literal notranslate"><span class="pre">label=&quot;Sort</span> <span class="pre">Query&quot;</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">help</span></code></p></td>
<td><p>Short bit of text, rendered on the tool form just below the associated field to provide information about the field. Find the Intergalactic Utilities Commision suggested best practices for this element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#parameter-help">here</a>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">load_contents</span></code></p></td>
<td><p>Number of bytes that should be loaded into the <code class="docutils literal notranslate"><span class="pre">contents</span></code> attribute of the jobs dictionary provided to Expression Tools. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>The default value for this parameter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default_value</span></code></p></td>
<td><p><em>Deprecated</em>. Specify default value for column parameters (use <code class="docutils literal notranslate"><span class="pre">value</span></code> instead).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">optional</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, parameter must have a value. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code> except when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code> and <code class="docutils literal notranslate"><span class="pre">multiple</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rgb</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">false</span></code>, the returned value will be in Hex color code. If <code class="docutils literal notranslate"><span class="pre">true</span></code>, it will be a RGB value e.g. <code class="docutils literal notranslate"><span class="pre">0,0,255</span></code>. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">color</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum valid parameter value. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, or <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>The comma-separated list of accepted data formats for this input. The list of supported data formats is contained in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> file (use the file extension). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">collection_type</span></code></p></td>
<td><p>Restrict the kind of collection that can be consumed by this parameter. Simple collections are either <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">paired</span></code>), nested collections are specified as colon separated list of simple collection types (the most common types are <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">paired</span></code>, <code class="docutils literal notranslate"><span class="pre">list:paired</span></code>, or <code class="docutils literal notranslate"><span class="pre">list:list</span></code>). Multiple such collection types can be specified here as a comma-separated list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_collection</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">data_ref</span></code></p></td>
<td><p>Used with select lists whose options are dynamically generated based on certain metadata attributes of the dataset or collection upon which this parameter depends (usually but not always the tool’s input dataset). Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accept_default</span></code></p></td>
<td><p>Deprecated. Take the value given by <code class="docutils literal notranslate"><span class="pre">default_value</span></code> (or <code class="docutils literal notranslate"><span class="pre">value</span></code>) and <code class="docutils literal notranslate"><span class="pre">1</span></code> if no <code class="docutils literal notranslate"><span class="pre">value</span></code> is given. Applies to <code class="docutils literal notranslate"><span class="pre">data_column</span></code> and <code class="docutils literal notranslate"><span class="pre">group_tag</span></code> parameters.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">refresh_on_change</span></code></p></td>
<td><p>Force a reload of the tool panel when the value of this parameter changes to allow <code class="docutils literal notranslate"><span class="pre">code</span></code> file processing. See deprecation-like notice for <code class="docutils literal notranslate"><span class="pre">code</span></code> blocks.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">force_select</span></code></p></td>
<td><p><em>Deprecated</em>. This is the inverse of <code class="docutils literal notranslate"><span class="pre">optional</span></code>. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> to not force user to select an option in the list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_header_names</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, Galaxy assumes the first row of <code class="docutils literal notranslate"><span class="pre">data_ref</span></code> is a header and builds the select list with these values rather than the more generic <code class="docutils literal notranslate"><span class="pre">c1</span></code> … <code class="docutils literal notranslate"><span class="pre">cN</span></code> (i.e. it will be <code class="docutils literal notranslate"><span class="pre">c1:</span> <span class="pre">head1</span></code> … <code class="docutils literal notranslate"><span class="pre">cN:</span> <span class="pre">headN</span></code>). Note that the content of the Cheetah variable is still the column index. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">display</span></code></p></td>
<td><p>Render a select list as a set of checkboxes (<code class="docutils literal notranslate"><span class="pre">checkboxes</span></code>; note this is incompatible with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;false&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">optional=&quot;false&quot;</span></code>) or radio buttons (<code class="docutils literal notranslate"><span class="pre">radio</span></code>; note this is incompatible with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">optional=&quot;true&quot;</span></code>). Defaults to a drop-down menu select list. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>Allow multiple values to be selected. <code class="docutils literal notranslate"><span class="pre">select</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> are optional by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">group_tag</span></code>, or <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numerical</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code> a data column will be treated as numerical when filtering columns based on metadata. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data_column</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hierarchy</span></code></p></td>
<td><p>Determine if a drill down is <code class="docutils literal notranslate"><span class="pre">recursive</span></code> or <code class="docutils literal notranslate"><span class="pre">exact</span></code>. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">drill_down</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">checked</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if the <code class="docutils literal notranslate"><span class="pre">boolean</span></code> parameter should be checked (or <code class="docutils literal notranslate"><span class="pre">true</span></code>) by default. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">truevalue</span></code></p></td>
<td><p>The parameter value in the Cheetah template if the parameter is <code class="docutils literal notranslate"><span class="pre">true</span></code> or checked by the user. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">falsevalue</span></code></p></td>
<td><p>The parameter value in the Cheetah template if the parameter is <code class="docutils literal notranslate"><span class="pre">false</span></code> or not checked by the user. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">boolean</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td><p><em>Deprecated</em>. Completely ignored since release 16.10. Used only when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic_options</span></code></p></td>
<td><p>Deprecated/discouraged method to allow access to Python code to generate options for a select list. See <code class="docutils literal notranslate"><span class="pre">code</span></code>’s documentation for an example.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-validator">
<h2><a class="toc-backref" href="#id323" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">validator</span></code></a><a class="headerlink" href="#tool-inputs-param-validator" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;param&gt;</span></code> tag set - it applies a
validator to the containing parameter. Tool submission will fail if a
single validator fails. See the
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/annotation_profiler/annotation_profiler.xml">annotation_profiler</a>
tool for an example of how to use this tag set.</p>
<p>Note that validators for parameters with <code class="docutils literal notranslate"><span class="pre">optional=&quot;true&quot;</span></code> are not
executed if no value is given.</p>
<section id="generic-validators">
<h3>Generic validators<a class="headerlink" href="#generic-validators" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expression</span></code>: Check if a one line python expression given expression
evaluates to True. The expression is given is the content of the validator tag.</p></li>
</ul>
</section>
<section id="validators-for-data-and-data-collection-parameters">
<h3>Validators for <code class="docutils literal notranslate"><span class="pre">data</span></code> and <code class="docutils literal notranslate"><span class="pre">data_collection</span></code> parameters<a class="headerlink" href="#validators-for-data-and-data-collection-parameters" title="Link to this heading">¶</a></h3>
<p>In case of <code class="docutils literal notranslate"><span class="pre">data_collection</span></code> parameters and
<code class="docutils literal notranslate"><span class="pre">data</span></code> parameters with <code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code> these validators are executed
separately for each of the contained data sets. Note that, for <code class="docutils literal notranslate"><span class="pre">data</span></code>
parameters a <code class="docutils literal notranslate"><span class="pre">metadata</span></code> validator is added automatically.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metadata</span></code>: Check for missing metadata. The set of (optional) metadata
to be checked can be set using either the <code class="docutils literal notranslate"><span class="pre">check</span></code> or <code class="docutils literal notranslate"><span class="pre">skip</span></code> attribute.
Note that each data parameter has automatically a metadata validator that checks
if all non-optional metadata are set, i.e. <code class="docutils literal notranslate"><span class="pre">&lt;validator</span> <span class="pre">type=&quot;metadata/&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unspecified_build</span></code>: Check of a build is defined.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_ok_validator</span></code>: Check if the data set is in state OK.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code>: Check if a numeric metadata value is within
a given range.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>: Check if a metadata value is contained in a column of a data table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_metadata_not_in_data_table</span></code>: Equivalent to <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code> with <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code>.</p></li>
</ul>
<p>Deprecated data validators:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code>: Use data tables with <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>.
Check if a metadata value is contained in a specific column of a file in the <code class="docutils literal notranslate"><span class="pre">tool_data_path</span></code>
(which is set in Galaxy’s config).</p></li>
</ul>
</section>
<section id="validators-for-textual-inputs-text-select">
<h3>Validators for textual inputs (<code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">select</span></code>, …)<a class="headerlink" href="#validators-for-textual-inputs-text-select" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">regex</span></code>: Check if a regular expression <strong>matches</strong> the value, i.e. appears
at the beginning of the value. To enforce a match of the complete value use
<code class="docutils literal notranslate"><span class="pre">$</span></code> at the end of the expression. The expression is given is the content
of the validator tag. Note that for <code class="docutils literal notranslate"><span class="pre">selects</span></code> each option is checked
separately.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length</span></code>: Check if the length of the value is within a range.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">empty_field</span></code>: Check if the string is not empty</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_in_data_table</span></code>: Check if the value is
contained in a column of a given data table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_not_in_data_table</span></code>: Equivalent to <code class="docutils literal notranslate"><span class="pre">value_in_data_table</span></code> with <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code>.</p></li>
</ul>
<p>For selects (in particular with dynamically defined options) the following
validator is useful:</p>
<p><code class="docutils literal notranslate"><span class="pre">no_options</span></code>: Check if options are available for a <code class="docutils literal notranslate"><span class="pre">select</span></code> parameter.
Useful for parameters with dynamically defined options.</p>
</section>
<section id="validators-for-numeric-inputs-integer-float">
<h3>Validators for numeric inputs (<code class="docutils literal notranslate"><span class="pre">integer</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>)<a class="headerlink" href="#validators-for-numeric-inputs-integer-float" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">in_range</span></code>: Check if the value is in a given range.</p>
</section>
<section id="id54">
<h3>Examples<a class="headerlink" href="#id54" title="Link to this heading">¶</a></h3>
<p>The following demonstrates a simple validator <code class="docutils literal notranslate"><span class="pre">unspecified_build</span></code> ensuring
that a dbkey is present on the selected dataset. This example is taken from the
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/extract_genomic_dna/extract_genomic_dna.xml#L42">extract_genomic_dna</a>
tool.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;gff,interval&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Fetch sequences for intervals in&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;unspecified_build&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>Along the same line, the following example taken from
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tool_collections/samtools/samtools_mpileup/samtools_mpileup.xml">samtools_mpileup</a>
ensures that a dbkey is present and that FASTA indices in the <code class="docutils literal notranslate"><span class="pre">fasta_indexes</span></code>
tool data table are present.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;bam&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;BAM file(s)&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_bam&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;unspecified_build&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;dataset_metadata_in_data_table&quot;</span><span class="w"> </span><span class="na">metadata_name=</span><span class="s">&quot;dbkey&quot;</span><span class="w"> </span><span class="na">table_name=</span><span class="s">&quot;fasta_indexes&quot;</span><span class="w"> </span><span class="na">metadata_column=</span><span class="s">&quot;1&quot;</span>
<span class="w">               </span><span class="na">message=</span><span class="s">&quot;Sequences are not currently available for the specified build.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>In this older, somewhat deprecated example - a genome build of the dataset must
be stored in Galaxy clusters and the name of the genome (<code class="docutils literal notranslate"><span class="pre">dbkey</span></code>) must be one
of the values in the first column of file <code class="docutils literal notranslate"><span class="pre">alignseq.loc</span></code> - that could be
expressed with the validator. In general, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code> should be
considered deprecated in favor of</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;dataset_metadata_in_data_table&quot;</span>
<span class="w">           </span><span class="na">metadata_name=</span><span class="s">&quot;dbkey&quot;</span>
<span class="w">           </span><span class="na">metadata_column=</span><span class="s">&quot;1&quot;</span>
<span class="w">           </span><span class="na">message=</span><span class="s">&quot;Sequences are not currently available for the specified build.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>A very common validator is simply ensure a Python expression is valid for a
specified value. In the following example - paths/names that downstream tools
use in filenames may not contain <code class="docutils literal notranslate"><span class="pre">..</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;expression&quot;</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;No two dots (..) allowed&quot;</span><span class="nt">&gt;</span>&#39;..&#39;<span class="w"> </span>not<span class="w"> </span>in<span class="w"> </span>value<span class="nt">&lt;/validator&gt;</span>
</pre></div>
</div>
</section>
<section id="id55">
<h3>Attributes<a class="headerlink" href="#id55" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Valid values are: <code class="docutils literal notranslate"><span class="pre">expression</span></code>, <code class="docutils literal notranslate"><span class="pre">regex</span></code>, <code class="docutils literal notranslate"><span class="pre">in_range</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata</span></code>, <code class="docutils literal notranslate"><span class="pre">unspecified_build</span></code>, <code class="docutils literal notranslate"><span class="pre">no_options</span></code>, <code class="docutils literal notranslate"><span class="pre">empty_field</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_not_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">value_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">value_not_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_ok_validator</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code>. Deprecated validator: <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code>. The list of supported validators is in the <code class="docutils literal notranslate"><span class="pre">validator_types</span></code> dictionary in <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/parameters/validation.py">/lib/galaxy/tools/parameters/validation.py</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p></td>
<td><p>The error message displayed on the tool form if validation fails. A placeholder string <code class="docutils literal notranslate"><span class="pre">%s</span></code> will be repaced by the <code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negates the result of the validator.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">check</span></code></p></td>
<td><p>Comma-seperated list of metadata fields to check for if type is <code class="docutils literal notranslate"><span class="pre">metadata</span></code>. If not specified, all non-optional metadata fields will be checked unless they appear in the list of fields specified by the <code class="docutils literal notranslate"><span class="pre">skip</span></code> attribute.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">table_name</span></code></p></td>
<td><p>Tool data table name to check against if <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_not_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">value_in_data_table</span></code>, or <code class="docutils literal notranslate"><span class="pre">value_not_in_data_table</span></code>. See the documentation for <a class="reference external" href="https://galaxyproject.org/admin/tools/data-tables">tool data tables</a> and <a class="reference external" href="https://galaxyproject.org/admin/tools/data-managers/">data managers</a> for more information.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>Deprecated: use <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>. Tool data filename to check against if <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code>. File should be present Galaxy’s <code class="docutils literal notranslate"><span class="pre">tool-data</span></code> directory.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata_name</span></code></p></td>
<td><p>Target metadata attribute name for <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_not_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code> and <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code> options.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metadata_column</span></code></p></td>
<td><p>Target column for metadata attribute in <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">dataset_metadata_not_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">value_in_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">value_not_in_data_table</span></code>, and <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code> options. This can be an integer index to the column or a column name.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>When the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">in_range</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>, or <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code> - this is the minimum number allowed.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>When the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">in_range</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>, or <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code> - this is the maximum number allowed.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exclude_min</span></code></p></td>
<td><p>When the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">in_range</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>, or <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code> - this boolean indicates if the <code class="docutils literal notranslate"><span class="pre">min</span></code> value is allowed.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exclude_max</span></code></p></td>
<td><p>When the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">in_range</span></code>, <code class="docutils literal notranslate"><span class="pre">length</span></code>, or <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_range</span></code> - this boolean indicates if the <code class="docutils literal notranslate"><span class="pre">max</span></code> value is allowed.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">split</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code>, this attribute is the column separator to use for values in the specified file. This default is <code class="docutils literal notranslate"><span class="pre">\t</span></code> and due to a bug in older versions of Galaxy, should not be modified.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skip</span></code></p></td>
<td><p>Comma-seperated list of metadata fields to skip if type is <code class="docutils literal notranslate"><span class="pre">metadata</span></code>. If not specified, all non-optional metadata fields will be checked unless <code class="docutils literal notranslate"><span class="pre">check</span></code> attribute is specified.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">line_startswith</span></code></p></td>
<td><p>Deprecated. Used to indicate lines in the file being used for validation start with a this attribute value. For use with validator <code class="docutils literal notranslate"><span class="pre">dataset_metadata_in_file</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">substitute_value_in_message</span></code></p></td>
<td><p>Deprecated. This is now always done.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-option">
<h2><a class="toc-backref" href="#id324" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">option</span></code></a><a class="headerlink" href="#tool-inputs-param-option" title="Link to this heading">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/filters/sorter.xml">/tools/filters/sorter.xml</a>
for typical examples of how to use this tag set. This directive is used to described
static lists of options and is contained
within the <a class="reference internal" href="#tool-inputs-param">param</a> directive when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute
value is <code class="docutils literal notranslate"><span class="pre">select</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">&lt;param</span> <span class="pre">type=&quot;select&quot;</span> <span class="pre">...&gt;</span></code>).</p>
<section id="id56">
<h3>Example<a class="headerlink" href="#id56" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;style&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;with flavor&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;num&quot;</span><span class="nt">&gt;</span>Numerical<span class="w"> </span>sort<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;gennum&quot;</span><span class="nt">&gt;</span>General<span class="w"> </span>numeric<span class="w"> </span>sort<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;alpha&quot;</span><span class="nt">&gt;</span>Alphabetical<span class="w"> </span>sort<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>An option can also be annotated with <code class="docutils literal notranslate"><span class="pre">selected=&quot;true&quot;</span></code> to specify a
default option (note that the first option is selected automatically
if <code class="docutils literal notranslate"><span class="pre">optional=&quot;false&quot;</span></code>).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;col&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;From&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>Column<span class="w"> </span>1<span class="w"> </span>/<span class="w"> </span>Sequence<span class="w"> </span>name<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">selected=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>Column<span class="w"> </span>2<span class="w"> </span>/<span class="w"> </span>Source<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Column<span class="w"> </span>3<span class="w"> </span>/<span class="w"> </span>Feature<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>Column<span class="w"> </span>7<span class="w"> </span>/<span class="w"> </span>Strand<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;7&quot;</span><span class="nt">&gt;</span>Column<span class="w"> </span>8<span class="w"> </span>/<span class="w"> </span>Frame<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>In general the values and the texts for the options need to be unique,
but it is possible to specify an option two times if the 2nd has a different
value for the <code class="docutils literal notranslate"><span class="pre">selected</span></code> attribute. This is handy if an option list is
defined in a macro and different default value(s) are used.</p>
</section>
<section id="id57">
<h3>Attributes<a class="headerlink" href="#id57" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>The value of the corresponding variable when used the Cheetah template. Also the value that should be used in building test cases and used when building requests for the API.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">selected</span></code></p></td>
<td><p>A boolean parameter indicating if the corresponding option is selected by default (the default is <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-conversion">
<h2><a class="toc-backref" href="#id325" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conversion</span></code></a><a class="headerlink" href="#tool-inputs-param-conversion" title="Link to this heading">¶</a></h2>
<p>A contrived example of a tool that uses this is the test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/explicit_conversion.xml">explicit_conversion.xml</a>.</p>
<p>This directive is optionally contained within the <code class="docutils literal notranslate"><span class="pre">&lt;param&gt;</span></code> tag when the
<code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">data</span></code> and is used to dynamically generated a converted
dataset for the contained input of the type specified using the <code class="docutils literal notranslate"><span class="pre">type</span></code> tag.</p>
<section id="id58">
<h3>Attributes<a class="headerlink" href="#id58" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of Cheetah variable to create for converted dataset.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>The short extension describing the datatype to convert to - Galaxy must have a datatype converter from the parent input’s type to this.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-options">
<h2><a class="toc-backref" href="#id326" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code></a><a class="headerlink" href="#tool-inputs-param-options" title="Link to this heading">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/extract/liftOver_wrapper.xml">/tools/extract/liftOver_wrapper.xml</a>
for an example of how to use this tag set. This tag set is optionally contained
within the <code class="docutils literal notranslate"><span class="pre">&lt;param&gt;</span></code> tag when the <code class="docutils literal notranslate"><span class="pre">type</span></code> attribute value is <code class="docutils literal notranslate"><span class="pre">select</span></code> or
<code class="docutils literal notranslate"><span class="pre">data</span></code> and used to dynamically generated lists of options.</p>
<p>For data parameters this tag can be used to restrict possible input datasets to datasets that match the <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> of another data input by including a <code class="docutils literal notranslate"><span class="pre">data_meta</span></code> filter. See for
instance here: <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/maf/interval2maf.xml">/tools/maf/interval2maf.xml</a></p>
<p>For select parameters this tag set dynamically creates a list of options whose
values can be obtained from a predefined file stored locally or a dataset
selected from the current history.</p>
<p>There are at least five basic ways to use this tag - four of these correspond to
a <code class="docutils literal notranslate"><span class="pre">from_XXX</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">options</span></code> directive and the other is to
exclusively use <code class="docutils literal notranslate"><span class="pre">filter</span></code>s to populate options.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_data_table</span></code> - The options for the select list are dynamically obtained
from a file specified in the Galaxy configuration file
<code class="docutils literal notranslate"><span class="pre">tool_data_table_conf.xml</span></code> or from a Tool Shed installed data manager.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_dataset</span></code> - The options for the select list are dynamically obtained
from input dataset selected for the tool from the current history.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_file</span></code> - The options for the select list are dynamically obtained from
a file. This mechanism is discouraged in favor of the more generic
<code class="docutils literal notranslate"><span class="pre">from_data_table</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_parameter</span></code> - The options for the select list are dynamically obtained
from a parameter.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">filter</span></code>s - various filters can be used to populate options, see
examples in the <a class="reference internal" href="#tool-inputs-param-options-filter">filter</a> documentation.</p></li>
</ul>
<section id="from-data-table">
<h3><code class="docutils literal notranslate"><span class="pre">from_data_table</span></code><a class="headerlink" href="#from-data-table" title="Link to this heading">¶</a></h3>
<p>See Galaxy’s
<a class="reference external" href="https://galaxyproject.org/admin/tools/data-tables">data tables documentation</a>
for information on setting up data tables.</p>
<p>Once a data table has been configured and populated, these can be easily
leveraged via tools.</p>
<p>This <code class="docutils literal notranslate"><span class="pre">conditional</span></code> block in the
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/bowtie2/bowtie2_wrapper.xml">bowtie2</a>
wrapper demonstrates using <code class="docutils literal notranslate"><span class="pre">from_data_table</span></code> options as an
alternative to local reference data.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;source&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Will you select a reference genome from your history or use a built-in index?&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;Built-ins were indexed using default options. See `Indexes` section of help below&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>a<span class="w"> </span>built-in<span class="w"> </span>genome<span class="w"> </span>index<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;history&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>a<span class="w"> </span>genome<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>history<span class="w"> </span>and<span class="w"> </span>build<span class="w"> </span>index<span class="nt">&lt;/option&gt;</span>
<span class="w">  </span><span class="nt">&lt;/param&gt;</span>
<span class="w">  </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;index&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select reference genome&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;If your genome of interest is not listed, contact the Galaxy team&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_data_table=</span><span class="s">&quot;bowtie2_indexes&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;sort_by&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/options&gt;</span>
<span class="w">      </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;no_options&quot;</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;No indexes are available for the selected input dataset&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/param&gt;</span>
<span class="w">  </span><span class="nt">&lt;/when&gt;</span>
<span class="w">  </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;history&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;own_file&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select reference genome&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/when&gt;</span>
<span class="nt">&lt;/conditional&gt;</span>
</pre></div>
</div>
<p>A minimal example wouldn’t even need the <code class="docutils literal notranslate"><span class="pre">filter</span></code> or <code class="docutils literal notranslate"><span class="pre">validator</span></code> above, but
they are frequently nice features to add to your wrapper and can improve the user
experience of a tool.</p>
</section>
<section id="from-dataset">
<h3><code class="docutils literal notranslate"><span class="pre">from_dataset</span></code><a class="headerlink" href="#from-dataset" title="Link to this heading">¶</a></h3>
<p>The following example is taken from the Mothur tool
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/mothur/remove.lineage.xml">remove.lineage.xml</a>
and demonstrates generating options from a dataset directly.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;taxonomy&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;mothur.seq.taxonomy&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;taxonomy - Taxonomy&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;please make sure your file has no quotation marks in it&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;taxons&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Browse Taxons from Taxonomy&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_dataset=</span><span class="s">&quot;taxonomy&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;unique_value&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;unique_taxon&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;sort_by&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sorted_taxon&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="w">    </span><span class="nt">&lt;sanitizer&gt;</span>
<span class="w">        </span><span class="nt">&lt;valid</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">preset=</span><span class="s">&quot;string.printable&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;;&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;remove</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&amp;quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;remove</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&amp;apos;&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/valid&gt;</span>
<span class="w">    </span><span class="nt">&lt;/sanitizer&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>Starting from Galaxy v21.01, <code class="docutils literal notranslate"><span class="pre">meta_file_key</span></code> can be used together with
<code class="docutils literal notranslate"><span class="pre">from_dataset</span></code>. In such cases, options are generated using the dataset’s
medadata file that the <code class="docutils literal notranslate"><span class="pre">meta_file_key</span></code> implies, instead of the dataset
itself.</p>
<p>Note that in any case only the first mega byte of the referred dataset (or file)
is considered. Lines starting with <code class="docutils literal notranslate"><span class="pre">#</span></code> are ignored. By using the <code class="docutils literal notranslate"><span class="pre">startswith</span></code>
attribute also lines starting with other strings can be ignored.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;maf&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;MAF File&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;species&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;False&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select species for the input dataset&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;True&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_dataset=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">meta_file_key=</span><span class="s">&quot;species_chromosomes&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_collection&quot;</span><span class="w"> </span><span class="na">collection_type=</span><span class="s">&quot;list&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;maf&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;MAF Collection&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;species_2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select species for the input dataset&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_dataset=</span><span class="s">&quot;input_2&quot;</span><span class="w"> </span><span class="na">meta_file_key=</span><span class="s">&quot;species_chromosomes&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;unique_value&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;unique_param&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>Filters can be used to generate options from dataset directly also as the
example below demonstrates (many more examples are present in the
<a class="reference internal" href="#tool-inputs-param-options-filter">filter</a> documentation).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;species1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;When Species&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_meta&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;species&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
</section>
<section id="from-file">
<h3><code class="docutils literal notranslate"><span class="pre">from_file</span></code><a class="headerlink" href="#from-file" title="Link to this heading">¶</a></h3>
<p>The following example is for Blast databases. In this example users maybe select
a database that is pre-formatted and cached in Galaxy clusters. When a new
dataset is available, admins must add the database to the local file named
“blastdb.loc”. All such databases in that file are included in the options of
the select list. For a local instance, the file (e.g. <code class="docutils literal notranslate"><span class="pre">blastdb.loc</span></code> or
<code class="docutils literal notranslate"><span class="pre">alignseq.loc</span></code>) must be stored in the configured
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/tool-data">tool_data_path</a>
directory. In this example, the option names and values are taken from column 0
of the file.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;source_select&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">display=</span><span class="s">&quot;radio&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Choose target database&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_file=</span><span class="s">&quot;blastdb.loc&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>In general, <code class="docutils literal notranslate"><span class="pre">from_file</span></code> should be considered deprecated and  <code class="docutils literal notranslate"><span class="pre">from_data_table</span></code>
should be prefered.</p>
</section>
<section id="from-parameter">
<h3><code class="docutils literal notranslate"><span class="pre">from_parameter</span></code><a class="headerlink" href="#from-parameter" title="Link to this heading">¶</a></h3>
<p>This variant of the <code class="docutils literal notranslate"><span class="pre">options</span></code> directive is discouraged because it exposes
internal Galaxy structures. See the older
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/bowtie_wrappers/bowtie_wrapper.xml">bowtie</a>
wrappers for an example of these.</p>
</section>
<section id="other-ways-to-dynamically-generate-options">
<h3>Other Ways to Dynamically Generate Options<a class="headerlink" href="#other-ways-to-dynamically-generate-options" title="Link to this heading">¶</a></h3>
<p>Though deprecated and discouraged, <a class="reference internal" href="#tool-code">code</a> blocks can also be
used to generate dynamic options.</p>
</section>
<section id="id59">
<h3>Attributes<a class="headerlink" href="#id59" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">from_dataset</span></code></p></td>
<td><p>Determine options from (the first MB of) the dataset given in the referred input parameter. If ‘meta_file_key’ is given, the options are determined from (the first MB of) the data in the metadata file of the input.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">from_file</span></code></p></td>
<td><p>Deprecated.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">from_data_table</span></code></p></td>
<td><p>Determine options from a data table.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">from_parameter</span></code></p></td>
<td><p>Deprecated.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">options_filter_attribute</span></code></p></td>
<td><p>Deprecated.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">transform_lines</span></code></p></td>
<td><p>Deprecated.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">startswith</span></code></p></td>
<td><p>Keep only lines starting with the given string.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">meta_file_key</span></code></p></td>
<td><p>Works with from_dataset only. See <a class="reference internal" href="#from-dataset">docs</a></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">separator</span></code></p></td>
<td><p>Split tabular data with this character (default is tab)</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-options-column">
<h2><a class="toc-backref" href="#id327" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">column</span></code></a><a class="headerlink" href="#tool-inputs-param-options-column" title="Link to this heading">¶</a></h2>
<p>Optionally contained within an
<code class="docutils literal notranslate"><span class="pre">&lt;options&gt;</span></code> tag set - specifies columns used in building select options from a
file stored locally (i.e. index or tool data) or a dataset in the
current history.</p>
<p>Any number of columns may be described, but at least one must be given the name
<code class="docutils literal notranslate"><span class="pre">value</span></code> and it will serve as the value of this parameter in the Cheetah
template and elsewhwere (e.g. in API for instance).</p>
<p>If a column named <code class="docutils literal notranslate"><span class="pre">name</span></code> is defined, this too has special meaning and it will
be the value the tool form user sees for each option. If no <code class="docutils literal notranslate"><span class="pre">name</span></code> column
appears, <code class="docutils literal notranslate"><span class="pre">value</span></code> will serve as the name.</p>
<section id="id60">
<h3>Examples<a class="headerlink" href="#id60" title="Link to this heading">¶</a></h3>
<p>The following fragment shows options from the dataset in the current history
that has been selected as the value of the parameter named <code class="docutils literal notranslate"><span class="pre">input1</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_dataset=</span><span class="s">&quot;input1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/options&gt;</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/filters/gff/gff_filter_by_feature_count.xml">gff_filter_by_feature_count</a>
tool makes use of this tag with files from a history, and the
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/star_fusion/star_fusion.xml">star_fusion</a>
tool makes use of this to reference a data table.</p>
</section>
<section id="id61">
<h3>Attributes<a class="headerlink" href="#id61" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name given to the column with index <code class="docutils literal notranslate"><span class="pre">index</span></code>, the names <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> have special meaning as described above.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p>0-based index of the column in the target file.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-options-filter">
<h2><a class="toc-backref" href="#id328" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">options</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a><a class="headerlink" href="#tool-inputs-param-options-filter" title="Link to this heading">¶</a></h2>
<p>Optionally contained within an
<code class="docutils literal notranslate"><span class="pre">&lt;options&gt;</span></code> tag set - modify (e.g. remove, add, sort, …) the list of values obtained from a locally stored file (e.g.
a tool data table) or a dataset in the current history.</p>
<p>Currently the following filters are defined:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">static_value</span></code> filter options for which the entry in a given <code class="docutils literal notranslate"><span class="pre">column</span></code> of the referenced file based on equality to the <code class="docutils literal notranslate"><span class="pre">value</span></code> attribute of the filter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regexp</span></code> similar to the <code class="docutils literal notranslate"><span class="pre">static_value</span></code> filter, but checks if the regular expression given by <code class="docutils literal notranslate"><span class="pre">value</span></code> matches the entry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">param_value</span></code> filter options for which the entry in a given <code class="docutils literal notranslate"><span class="pre">column</span></code> of the referenced file based on properties of another input parameter specified by <code class="docutils literal notranslate"><span class="pre">ref</span></code>. This property is by default the value of the parameter, but also the values of another attribute (<code class="docutils literal notranslate"><span class="pre">ref_attribute</span></code>) of the parameter can be used, e.g. the extension of a data input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_meta</span></code> populate or filter options based on the metadata of another input parameter specified by <code class="docutils literal notranslate"><span class="pre">ref</span></code>. If a <code class="docutils literal notranslate"><span class="pre">column</span></code> is given options are filtered for which the entry in this column <code class="docutils literal notranslate"><span class="pre">column</span></code> is equal to metadata of the input parameter specified by <code class="docutils literal notranslate"><span class="pre">ref</span></code>.
If no <code class="docutils literal notranslate"><span class="pre">column</span></code> is given the metadata value of the referenced input is added to the options list (in this case the corresponding <code class="docutils literal notranslate"><span class="pre">options</span></code> tag must not have the <code class="docutils literal notranslate"><span class="pre">from_data_table</span></code> or <code class="docutils literal notranslate"><span class="pre">from_dataset</span></code> attributes).
In both cases the desired metadata is selected by <code class="docutils literal notranslate"><span class="pre">key</span></code>.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">static_value</span></code> and <code class="docutils literal notranslate"><span class="pre">regexp</span></code> filters can be inverted by setting <code class="docutils literal notranslate"><span class="pre">keep</span></code> to true.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_value</span></code>: add an option with a given <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> to the options. By default, the new option is appended, with <code class="docutils literal notranslate"><span class="pre">index</span></code> the insertion position can be specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_value</span></code>: remove a value from the options. Either specified explicitly with <code class="docutils literal notranslate"><span class="pre">value</span></code>, the value of another input specified with <code class="docutils literal notranslate"><span class="pre">ref</span></code>, or the metadata <code class="docutils literal notranslate"><span class="pre">key</span></code> of another input <code class="docutils literal notranslate"><span class="pre">meta_ref</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unique_value</span></code>: remove options that have duplicate entries in the given <code class="docutils literal notranslate"><span class="pre">column</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sort_by</span></code>: sort options by the entries of a given <code class="docutils literal notranslate"><span class="pre">column</span></code>. If <code class="docutils literal notranslate"><span class="pre">reverse_sort_order</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, reverse sort order from ascending to descending.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiple_splitter</span></code>: split the entries of the specified <code class="docutils literal notranslate"><span class="pre">column</span></code>(s) in the referenced file using a <code class="docutils literal notranslate"><span class="pre">separator</span></code>. Thereby the number of columns is increased.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attribute_value_splitter</span></code>: split the attribute-value pairs within the specified <code class="docutils literal notranslate"><span class="pre">column</span></code> in the referenced file using <code class="docutils literal notranslate"><span class="pre">pair_separator</span></code> and <code class="docutils literal notranslate"><span class="pre">name_val_separator</span></code>. Thereby a new column is introduced before <code class="docutils literal notranslate"><span class="pre">column</span></code> containing a list of all attribute names.</p></li>
</ul>
<section id="id62">
<h3>Examples<a class="headerlink" href="#id62" title="Link to this heading">¶</a></h3>
<p>The following example from Mothur’s
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/mothur/remove.groups.xml">remove.groups.xml</a>
tool demonstrates filtering a select list based on the metadata of an input to
to the tool.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;group_in&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;mothur.groups,mothur.count_table&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;group or count table - Groups&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;groups - Pick groups to remove&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_meta&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;group_in&quot;</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;groups&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>This more advanced example, taken from Mothur’s
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/mothur/remove.lineage.xml">remove.lineage.xml</a>
tool demonstrates using filters to sort a list and remove duplicate entries.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;taxonomy&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;mothur.cons.taxonomy&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;constaxonomy - Constaxonomy file. Provide either a constaxonomy file or a taxonomy file&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;please make sure your file has no quotation marks in it&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;taxons&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Browse Taxons from Taxonomy&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_dataset=</span><span class="s">&quot;taxonomy&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;unique_value&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;unique_taxon&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;sort_by&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sorted_taxon&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="w">    </span><span class="nt">&lt;sanitizer&gt;</span>
<span class="w">        </span><span class="nt">&lt;valid</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;default&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">preset=</span><span class="s">&quot;string.printable&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;;&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;remove</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&amp;quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;remove</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&amp;apos;&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/valid&gt;</span>
<span class="w">    </span><span class="nt">&lt;/sanitizer&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>This example taken from the
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/hisat2/hisat2.xml">hisat2</a>
tool demonstrates filtering values from a tool data table.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;If your genome of interest is not listed, contact the Galaxy team&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select a reference genome&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;index&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_data_table=</span><span class="s">&quot;hisat2_indexes&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;sort_by&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="w">    </span><span class="nt">&lt;validator</span><span class="w"> </span><span class="na">message=</span><span class="s">&quot;No genomes are available for the selected input dataset&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;no_options&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>The
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/gemini/gemini_load.xml">gemini_load.xml</a>
tool demonstrates adding values to an option list using <code class="docutils literal notranslate"><span class="pre">filter</span></code>s.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;infile&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;vcf&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;VCF file to be loaded in the GEMINI database&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;Only build 37 (aka hg19) of the human genome is supported.&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;add_value&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;hg19&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;add_value&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Homo_sapiens_nuHg19_mtrCRS&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;add_value&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;hg_g1k_v37&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>While this fragment from <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/maf/maf_to_interval.xml">maf_to_interval.xml</a> demonstrates removing items.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;species&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Select additional species&quot;</span>
<span class="w">       </span><span class="na">display=</span><span class="s">&quot;checkboxes&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span>
<span class="w">       </span><span class="na">help=</span><span class="s">&quot;The species matching the dbkey of the alignment is always included.</span>
<span class="s">       A separate history item will be created for each species.&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data_meta&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;species&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;remove_value&quot;</span><span class="w"> </span><span class="na">meta_ref=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;dbkey&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>This example taken from
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tool_collections/snpsift/snpsift_dbnsfp/snpSift_dbnsfp.xml">snpSift_dbnsfp.xml</a>
demonstrates splitting up strings into multiple values.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;annotations&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">display=</span><span class="s">&quot;checkboxes&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Annotate with&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_data_table=</span><span class="s">&quot;snpsift_dbnsfps&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;param_value&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;dbnsfp&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;multiple_splitter&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>This example demonstrates compiling a list of available attributes by parsing a GFF containing a column of multiple attribute-value pairs formatted in the input as <code class="docutils literal notranslate"><span class="pre">gene_id=ABC;transcript_id=abc;transcript_biotype=mRNA</span></code></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;available_attributes&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;List of all attributes mentioned in a GFF&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;options</span><span class="w"> </span><span class="na">from_data_table=</span><span class="s">&quot;a_gff_as_table&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;8&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;column</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;8&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;attribute_value_splitter&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;8&quot;</span><span class="w"> </span><span class="na">pair_separator=</span><span class="s">&quot;;&quot;</span><span class="w"> </span><span class="na">name_val_separator=</span><span class="s">&quot;=&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
</section>
<section id="id63">
<h3>Attributes<a class="headerlink" href="#id63" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Currently the filters in the <code class="docutils literal notranslate"><span class="pre">filter_types</span></code> dictionary in the module <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/lib/galaxy/tools/parameters/dynamic_options.py">/lib/galaxy/tools/parameters/dynamic_options.py</a> are defined.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">column</span></code></p></td>
<td><p>Column targeted by this filter given as column index or a column name. Invalid if <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">add_value</span></code> or <code class="docutils literal notranslate"><span class="pre">remove_value</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name displayed for value to add (only used with <code class="docutils literal notranslate"><span class="pre">type</span></code> of <code class="docutils literal notranslate"><span class="pre">add_value</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ref</span></code></p></td>
<td><p>The attribute name of the reference file (tool data) or input dataset. Only used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">data_meta</span></code> (required), <code class="docutils literal notranslate"><span class="pre">param_value</span></code> (required), or <code class="docutils literal notranslate"><span class="pre">remove_value</span></code> (optional).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">data_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">param_value</span></code>, or <code class="docutils literal notranslate"><span class="pre">remove_value</span></code> - this is the name of the metadata key to filter by.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">multiple</span></code></p></td>
<td><p>For types <code class="docutils literal notranslate"><span class="pre">data_meta</span></code> and <code class="docutils literal notranslate"><span class="pre">remove_value</span></code>, whether option values are multiple. Columns will be split by separator. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">separator</span></code></p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">data_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">multiple_splitter</span></code>, or <code class="docutils literal notranslate"><span class="pre">remove_value</span></code> - this is used to split one value into multiple parts. When <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">data_meta</span></code> or <code class="docutils literal notranslate"><span class="pre">remove_value</span></code> this is only used if <code class="docutils literal notranslate"><span class="pre">multiple</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">keep</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, keep columns matching the value, if <code class="docutils literal notranslate"><span class="pre">false</span></code> discard columns matching the value. Used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is either <code class="docutils literal notranslate"><span class="pre">static_value</span></code>, <code class="docutils literal notranslate"><span class="pre">regexp</span></code> or <code class="docutils literal notranslate"><span class="pre">param_value</span></code>. Default: true</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Target value of the operations - has slightly different meanings depending on <code class="docutils literal notranslate"><span class="pre">type</span></code>. For instance when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">add_value</span></code> it is the value to add to the list and when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">static_value</span></code> or <code class="docutils literal notranslate"><span class="pre">regexp</span></code> it is the value compared against.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ref_attribute</span></code></p></td>
<td><p>Only used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">param_value</span></code>. Period (<code class="docutils literal notranslate"><span class="pre">.</span></code>) separated attribute chain of input (<code class="docutils literal notranslate"><span class="pre">ref</span></code>) attributes to use as value for filter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p>Used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">add_value</span></code>, it is the index into the list to add the option to. If not set, the option will be added to the end of the list.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">meta_ref</span></code></p></td>
<td><p>Only used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">remove_value</span></code>. Dataset to look for the value of metadata <code class="docutils literal notranslate"><span class="pre">key</span></code> to remove from the list.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_sort_order</span></code></p></td>
<td><p>Used when <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">sort_by</span></code>, if set to         <code class="docutils literal notranslate"><span class="pre">true</span></code> it will reverse the sort order from ascending to descending. Default         is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pair_separator</span></code></p></td>
<td><p>Only used if <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">attribute_value_splitter</span></code>. This is used to separate attribute-value pairs from other pairs, i.e. <code class="docutils literal notranslate"><span class="pre">;</span></code> if the target content is <code class="docutils literal notranslate"><span class="pre">A=V;</span> <span class="pre">B=W;</span> <span class="pre">C=Y</span></code> . Default is <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name_val_separator</span></code></p></td>
<td><p>Only used if <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">attribute_value_splitter</span></code>. This is used to separate attributes and values from each other within an attribute-value pair, i.e. <code class="docutils literal notranslate"><span class="pre">=</span></code> if the target content is <code class="docutils literal notranslate"><span class="pre">A=V;</span> <span class="pre">B=W;</span> <span class="pre">C=Y</span></code>. Defaults to whitespace.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer">
<h2><a class="toc-backref" href="#id329" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer" title="Link to this heading">¶</a></h2>
<p>See
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/filters/grep.xml">/tools/filters/grep.xml</a>
for a typical example of how to use this tag set. This tag set is used to
replace the basic parameter sanitization with custom directives. This tag set is
contained within the <code class="docutils literal notranslate"><span class="pre">&lt;param&gt;</span></code> tag set - it contains a set of <code class="docutils literal notranslate"><span class="pre">&lt;valid&gt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&lt;mapping&gt;</span></code> tags.</p>
<section id="character-presets">
<h3>Character presets<a class="headerlink" href="#character-presets" title="Link to this heading">¶</a></h3>
<p>The following presets can be used when specifying the valid characters: the
<a class="reference external" href="https://docs.python.org/3/library/string.html#string-constants">constants</a> from the <code class="docutils literal notranslate"><span class="pre">string</span></code> Python3 module,
plus <code class="docutils literal notranslate"><span class="pre">default</span></code> (equal to <code class="docutils literal notranslate"><span class="pre">string.ascii_letters</span> <span class="pre">+</span> <span class="pre">string.digits</span> <span class="pre">+</span> <span class="pre">&quot;</span> <span class="pre">-=_.()/+*^,:?!&quot;</span></code>)
and <code class="docutils literal notranslate"><span class="pre">none</span></code> (empty set).
The <code class="docutils literal notranslate"><span class="pre">string.letters</span></code>, <code class="docutils literal notranslate"><span class="pre">string.lowercase</span></code> and <code class="docutils literal notranslate"><span class="pre">string.uppercase</span></code> Python2
constants are accepted for backward compatibility, but are aliased to the
corresponding not locale-dependent constant (i.e. <code class="docutils literal notranslate"><span class="pre">string.ascii_letters</span></code>,
<code class="docutils literal notranslate"><span class="pre">string.ascii_lowercase</span></code> and <code class="docutils literal notranslate"><span class="pre">string.ascii_uppercase</span></code> respectively).</p>
</section>
<section id="id64">
<h3>Examples<a class="headerlink" href="#id64" title="Link to this heading">¶</a></h3>
<p>This example specifies to use the empty string as the invalid character (instead
of the default <code class="docutils literal notranslate"><span class="pre">X</span></code>, so invalid characters are effectively dropped instead of
replaced with <code class="docutils literal notranslate"><span class="pre">X</span></code>) and indicates that the only valid characters for this input
are ASCII letters, digits, and <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mystring&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Say something interesting&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;sanitizer</span><span class="w"> </span><span class="na">invalid_char=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;valid</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;string.ascii_letters,string.digits&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;_&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/valid&gt;</span>
<span class="w">    </span><span class="nt">&lt;/sanitizer&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>This example allows many more valid characters and specifies that <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> will just
be dropped from the input.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;sanitizer&gt;</span>
<span class="w">    </span><span class="nt">&lt;valid</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;string.printable&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;remove</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&amp;amp;&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/valid&gt;</span>
<span class="w">    </span><span class="nt">&lt;mapping</span><span class="w"> </span><span class="na">initial=</span><span class="s">&quot;none&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">source=</span><span class="s">&quot;&amp;amp;&quot;</span><span class="w"> </span><span class="na">target=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/mapping&gt;</span>
<span class="nt">&lt;/sanitizer&gt;</span>
</pre></div>
</div>
</section>
<section id="id65">
<h3>Attributes<a class="headerlink" href="#id65" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sanitize</span></code></p></td>
<td><p>This boolean parameter determines if the input is sanitized at all (the default is <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">invalid_char</span></code></p></td>
<td><p>The attribute specifies the character used as a replacement for invalid characters (the default is <code class="docutils literal notranslate"><span class="pre">X</span></code>).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-valid">
<h2><a class="toc-backref" href="#id330" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-valid" title="Link to this heading">¶</a></h2>
<p>Contained within the
<code class="docutils literal notranslate"><span class="pre">&lt;sanitizer&gt;</span></code> tag set, these are used to specify a list of allowed characters.
Contains <code class="docutils literal notranslate"><span class="pre">&lt;add&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;remove&gt;</span></code> tags.</p>
<section id="id66">
<h3>Attributes<a class="headerlink" href="#id66" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial</span></code></p></td>
<td><p>This describes the initial characters to allow as valid, specified as a character preset (as defined above). The default is the <code class="docutils literal notranslate"><span class="pre">default</span></code> preset.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-valid-add">
<h2><a class="toc-backref" href="#id331" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">add</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-valid-add" title="Link to this heading">¶</a></h2>
<p>This directive is used to add individual
characters or preset lists of characters. Character must not be allowed as a
valid input for the mapping to occur.</p>
<section id="id67">
<h3>Attributes<a class="headerlink" href="#id67" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">preset</span></code></p></td>
<td><p>Add the characters contained in the specified character preset (as defined above) to the list of valid characters. The default is the <code class="docutils literal notranslate"><span class="pre">none</span></code> preset.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Add a character to the list of valid characters.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-valid-remove">
<h2><a class="toc-backref" href="#id332" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">valid</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">remove</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-valid-remove" title="Link to this heading">¶</a></h2>
<p>This directive is used to remove
individual characters or preset lists of characters.
Character must not be allowed as a valid input for the mapping to occur.</p>
<section id="id68">
<h3>Attributes<a class="headerlink" href="#id68" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">preset</span></code></p></td>
<td><p>Remove the characters contained in the specified character preset (as defined above) from the list of valid characters. The default is the <code class="docutils literal notranslate"><span class="pre">none</span></code> preset.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>A character to remove from the list of valid characters.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-mapping">
<h2><a class="toc-backref" href="#id333" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-mapping" title="Link to this heading">¶</a></h2>
<p>Contained within the <code class="docutils literal notranslate"><span class="pre">&lt;sanitizer&gt;</span></code> tag set. Used to specify a mapping of disallowed character to replacement string. Contains <code class="docutils literal notranslate"><span class="pre">&lt;add&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;remove&gt;</span></code> tags.</p>
<section id="id69">
<h3>Attributes<a class="headerlink" href="#id69" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial</span></code></p></td>
<td><p>Initial character mapping (default is <code class="docutils literal notranslate"><span class="pre">galaxy.util.mapped_chars</span></code>)</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-mapping-add">
<h2><a class="toc-backref" href="#id334" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">add</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-mapping-add" title="Link to this heading">¶</a></h2>
<p>Use to add character mapping during sanitization. Character must not be allowed as a valid input for the mapping to occur.</p>
<section id="id70">
<h3>Attributes<a class="headerlink" href="#id70" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Replace all occurrences of this character with the string of <code class="docutils literal notranslate"><span class="pre">target</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>Replace all occurrences of <code class="docutils literal notranslate"><span class="pre">source</span></code> with this string</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-inputs-param-sanitizer-mapping-remove">
<h2><a class="toc-backref" href="#id335" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">inputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">sanitizer</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">mapping</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">remove</span></code></a><a class="headerlink" href="#tool-inputs-param-sanitizer-mapping-remove" title="Link to this heading">¶</a></h2>
<p>Use to remove character mapping during sanitization.</p>
<section id="id71">
<h3>Attributes<a class="headerlink" href="#id71" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Character to remove from mapping.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-request-param-translation">
<h2><a class="toc-backref" href="#id336" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code></a><a class="headerlink" href="#tool-request-param-translation" title="Link to this heading">¶</a></h2>
<p>See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/data_source/ucsc_tablebrowser.xml">/tools/data_source/ucsc_tablebrowser.xml</a> for an example of how to use this tag set. This tag set is used only in “data_source” tools (i.e. whose <code class="docutils literal notranslate"><span class="pre">tool_type</span></code> attribute is <code class="docutils literal notranslate"><span class="pre">data_source</span></code>). This tag set contains a set of <a class="reference internal" href="#tool-request-param-translation-request-param">request_param</a> elements.</p>
</section>
<section id="tool-request-param-translation-request-param">
<h2><a class="toc-backref" href="#id337" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code></a><a class="headerlink" href="#tool-request-param-translation-request-param" title="Link to this heading">¶</a></h2>
<p>Contained within the <a class="reference internal" href="#tool-request-param-translation">request_param_translation</a> tag set (used only in “data_source” tools). The external data source application may send back parameter names like “GENOME” which must be translated to “dbkey” in Galaxy.</p>
<section id="id72">
<h3>Attributes<a class="headerlink" href="#id72" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">galaxy_name</span></code></p></td>
<td><p>Each of these maps directly to a <code class="docutils literal notranslate"><span class="pre">remote_name</span></code> value</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">remote_name</span></code></p></td>
<td><p>The string representing the name of the parameter in the remote data source</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">missing</span></code></p></td>
<td><p>The default value to use for <code class="docutils literal notranslate"><span class="pre">galaxy_name</span></code> if the <code class="docutils literal notranslate"><span class="pre">remote_name</span></code> parameter is not included in the request</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-request-param-translation-request-param-append-param">
<h2><a class="toc-backref" href="#id338" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">append_param</span></code></a><a class="headerlink" href="#tool-request-param-translation-request-param-append-param" title="Link to this heading">¶</a></h2>
<p>Optionally contained within the <a class="reference internal" href="#tool-request-param-translation-request-param">request_param</a> element if <code class="docutils literal notranslate"><span class="pre">galaxy_name=&quot;URL&quot;</span></code>. Some remote data sources (e.g., Gbrowse, Biomart) send parameters back to Galaxy in the initial response that must be added to the value of “URL” prior to Galaxy sending the secondary request to the remote data source via URL.</p>
<section id="id73">
<h3>Attributes<a class="headerlink" href="#id73" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">separator</span></code></p></td>
<td><p>The text to use to join the requested parameters together (example <code class="docutils literal notranslate"><span class="pre">separator=&quot;&amp;amp;&quot;</span></code>).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">first_separator</span></code></p></td>
<td><p>The text to use to join the <code class="docutils literal notranslate"><span class="pre">request_param</span></code> parameters to the first requested parameter (example <code class="docutils literal notranslate"><span class="pre">first_separator=&quot;?&quot;</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">join</span></code></p></td>
<td><p>The text to use to join the param name to its value (example <code class="docutils literal notranslate"><span class="pre">join=&quot;=&quot;</span></code>).</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-request-param-translation-request-param-append-param-value">
<h2><a class="toc-backref" href="#id339" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">append_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value</span></code></a><a class="headerlink" href="#tool-request-param-translation-request-param-append-param-value" title="Link to this heading">¶</a></h2>
<p>Contained within the <a class="reference internal" href="#tool-request-param-translation-request-param-append-param">append_param</a> tag set. Allows for appending a param name / value pair to the value of URL.</p>
<p>Example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;request_param_translation&gt;</span>
<span class="w">    </span><span class="nt">&lt;request_param</span><span class="w"> </span><span class="na">galaxy_name=</span><span class="s">&quot;URL&quot;</span><span class="w"> </span><span class="na">remote_name=</span><span class="s">&quot;URL&quot;</span><span class="w"> </span><span class="na">missing=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;append_param</span><span class="w"> </span><span class="na">separator=</span><span class="s">&quot;&amp;amp;&quot;</span><span class="w"> </span><span class="na">first_separator=</span><span class="s">&quot;?&quot;</span><span class="w"> </span><span class="na">join=</span><span class="s">&quot;=&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;value</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;_export&quot;</span><span class="w"> </span><span class="na">missing=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/append_param&gt;</span>
<span class="w">    </span><span class="nt">&lt;/request_param&gt;</span>
<span class="nt">&lt;/request_param_tranlsation&gt;</span>
</pre></div>
</div>
<section id="id74">
<h3>Attributes<a class="headerlink" href="#id74" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Any valid HTTP request parameter name. The name / value pair must be received from the remote data source and will be appended to the value of URL as something like <code class="docutils literal notranslate"><span class="pre">&quot;&amp;_export=1&quot;</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">name=&quot;_export&quot;</span></code>).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">missing</span></code></p></td>
<td><p>Must be a valid HTTP request parameter value (e.g. <code class="docutils literal notranslate"><span class="pre">missing=&quot;1&quot;</span></code>).</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-request-param-translation-request-param-value-translation">
<h2><a class="toc-backref" href="#id340" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value_translation</span></code></a><a class="headerlink" href="#tool-request-param-translation-request-param-value-translation" title="Link to this heading">¶</a></h2>
<p>Optionally contained within the <a class="reference internal" href="#tool-request-param-translation-request-param">request_param</a> tag set. The parameter value received from a remote data source may be named differently in Galaxy, and this tag set allows for the value to be appropriately translated.</p>
</section>
<section id="tool-request-param-translation-request-param-value-translation-value">
<h2><a class="toc-backref" href="#id341" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">request_param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value_translation</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">value</span></code></a><a class="headerlink" href="#tool-request-param-translation-request-param-value-translation-value" title="Link to this heading">¶</a></h2>
<p>Contained within the <a class="reference internal" href="#tool-request-param-translation-request-param-value-translation">value_translation</a> tag set - allows for changing the data type value to something supported by Galaxy.</p>
<p>Example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;request_param_translation&gt;</span>
<span class="w">    </span><span class="nt">&lt;request_param</span><span class="w"> </span><span class="na">galaxy_name=</span><span class="s">&quot;data_type&quot;</span><span class="w"> </span><span class="na">remote_name=</span><span class="s">&quot;hgta_outputType&quot;</span><span class="w"> </span><span class="na">missing=</span><span class="s">&quot;bed&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;value_translation&gt;</span>
<span class="w">            </span><span class="nt">&lt;value</span><span class="w"> </span><span class="na">galaxy_value=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">remote_value=</span><span class="s">&quot;primaryTable&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/value_translation&gt;</span>
<span class="w">    </span><span class="nt">&lt;/request_param&gt;</span>
<span class="nt">&lt;/request_param_tranlsation&gt;</span>
</pre></div>
</div>
<section id="id75">
<h3>Attributes<a class="headerlink" href="#id75" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">galaxy_value</span></code></p></td>
<td><p>The target value (e.g. for setting data format: the list of supported data formats is contained in the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">remote_value</span></code></p></td>
<td><p>The value supplied by the remote data source application</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs">
<h2><a class="toc-backref" href="#id342" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code></a><a class="headerlink" href="#tool-outputs" title="Link to this heading">¶</a></h2>
<p>Container tag set for the <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;collection&gt;</span></code> tag sets.
The files and collections created by tools as a result of their execution are
named by Galaxy. You specify the number and type of your output files using the
contained <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;collection&gt;</span></code> tags. These may be passed to your tool
executable through using line variables just like the parameters described in
the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> documentation.</p>
<section id="id76">
<h3>Attributes<a class="headerlink" href="#id76" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">provided_metadata_style</span></code></p></td>
<td><p>Style used for tool provided metadata file (i.e. <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#tool-provided-metadata">galaxy.json</a>) - this can be either “legacy” or “default”. The default of tools with a profile of 17.09 or newer are “default”, and “legacy” for older and tools and tools without a specified profile. A discussion of the differences between the styles can be found <a class="reference external" href="https://github.com/galaxyproject/galaxy/pull/4437">here</a>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">provided_metadata_file</span></code></p></td>
<td><p>Path relative to tool’s working directory to load tool provided metadata from. This metadata can describe dynamic datasets to load, dynamic collection contents, as well as simple metadata (e.g. name, dbkey, etc…) and datatype-specific metadata for declared outputs. More information can be found <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#tool-provided-metadata">here</a>. The default is <code class="docutils literal notranslate"><span class="pre">galaxy.json</span></code>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data">
<h2><a class="toc-backref" href="#id343" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code></a><a class="headerlink" href="#tool-outputs-data" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;outputs&gt;</span></code> tag set, and it defines the
output data description for the files resulting from the tool’s execution. The
value of the attribute <code class="docutils literal notranslate"><span class="pre">label</span></code> can be acquired from input parameters or metadata
in the same way that the command line parameters are (discussed in the
<code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag set section above).</p>
<section id="id77">
<h3>Examples<a class="headerlink" href="#id77" title="Link to this heading">¶</a></h3>
<p>The following will create a variable called <code class="docutils literal notranslate"><span class="pre">$out_file1</span></code> with data type
<code class="docutils literal notranslate"><span class="pre">pdf</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;pdf&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>The valid values for format can be found in
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a>.</p>
<p>The following will create a dataset in the history panel whose data type is the
same as that of the input dataset selected (and named <code class="docutils literal notranslate"><span class="pre">input1</span></code>) for the tool.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format_source=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">metadata_source=</span><span class="s">&quot;input1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>The following will create datasets in the history panel, setting the output data
type to be the same as that of an input dataset named by the <code class="docutils literal notranslate"><span class="pre">format_source</span></code>
attribute. Note that a conditional name is not included, so 2 separate
conditional blocks should not contain parameters with the same name.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inputs&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- fasta may be an aligned fasta that subclasses Fasta --&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;fasta - Sequences&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;qual&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;add&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Trim based on a quality file?&quot;</span><span class="w"> </span><span class="na">help=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;no&quot;</span><span class="nt">&gt;</span>no<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;yes&quot;</span><span class="nt">&gt;</span>yes<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;no&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;yes&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="cm">&lt;!-- qual454, qualsolid, qualillumina --&gt;</span>
<span class="w">            </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;qfile&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;qual&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;qfile - a quality file&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="nt">&lt;/inputs&gt;</span>
<span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format_source=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trim_fasta&quot;</span>
<span class="w">          </span><span class="na">label=</span><span class="s">&quot;${tool.name} on ${on_string}: trim.fasta&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format_source=</span><span class="s">&quot;qfile&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;trim_qual&quot;</span>
<span class="w">          </span><span class="na">label=</span><span class="s">&quot;${tool.name} on ${on_string}: trim.qual&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;filter&gt;</span>qual[&#39;add&#39;]<span class="w"> </span>==<span class="w"> </span>&#39;yes&#39;<span class="nt">&lt;/filter&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>Assume that the tool includes an input parameter named <code class="docutils literal notranslate"><span class="pre">database</span></code> which is a
select list (as shown below). Also assume that the user selects the first option
in the <code class="docutils literal notranslate"><span class="pre">$database</span></code> select list. Then the following will ensure that the tool
produces a tabular data set whose associated history item has the label <code class="docutils literal notranslate"><span class="pre">Blat</span> <span class="pre">on</span> <span class="pre">Human</span> <span class="pre">(hg18)</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Input stuff&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;database&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Database&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;hg18&quot;</span><span class="nt">&gt;</span>Human<span class="w"> </span>(hg18)<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;dm3&quot;</span><span class="nt">&gt;</span>Fly<span class="w"> </span>(dm3)<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;/param&gt;</span>
<span class="nt">&lt;/inputs&gt;</span>
<span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Blat on ${database.value_label}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
</section>
<section id="id78">
<h3>Attributes<a class="headerlink" href="#id78" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>The short name for the output datatype. The valid values for format can be found in <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> (e.g. <code class="docutils literal notranslate"><span class="pre">format=&quot;pdf&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">format=&quot;fastqsanger&quot;</span></code>). For collections this is the default format for all included elements. Note that the format specified here is ignored for discovered data sets.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format_source</span></code></p></td>
<td><p>This sets the data type of the output dataset(s) to be the same format as that of the specified tool input.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>This will be the name of the history item for the output data set. The string can include structure like <code class="docutils literal notranslate"><span class="pre">${&lt;some</span> <span class="pre">param</span> <span class="pre">name&gt;.&lt;some</span> <span class="pre">attribute&gt;}</span></code>, as discussed for command line parameters in the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag set section above. The default label is <code class="docutils literal notranslate"><span class="pre">${tool.name}</span> <span class="pre">on</span> <span class="pre">${on_string}</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this output. This <code class="docutils literal notranslate"><span class="pre">name</span></code> is used as the Cheetah variable containing the Galaxy assigned output path in <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">configfile</span></code> elements. The name should not contain pipes or periods (e.g. <code class="docutils literal notranslate"><span class="pre">.</span></code>).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto_format</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">true</span></code>, this output will sniffed and its format determined automatically by Galaxy.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">default_identifier_source</span></code></p></td>
<td><p>Sets the source of element identifier to the specified input. This only applies to collections that are mapped over a non-collection input and that have equivalent structures. If this references input elements in conditionals, this value should be qualified (e.g. ``cond</p></td>
<td><p>input<code class="docutils literal notranslate"><span class="pre">instead</span> <span class="pre">of</span></code>input<code class="docutils literal notranslate"><span class="pre">if</span></code>input<code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">conditional</span> <span class="pre">with</span></code>name=”cond”``).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">metadata_source</span></code></p></td>
<td><p>This copies the metadata information from the tool’s input dataset. This is particularly useful for interval data types where the order of the columns is not set.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">from_work_dir</span></code></p></td>
<td><p>Relative path to a file produced by the tool in its working directory. Output’s contents are set to this file’s contents. The behaviour when this file does not exist in the working directory is undefined; the resulting dataset could be empty or the tool execution could fail.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code></p></td>
<td><p>Boolean indicating whether to hide dataset in the history view. (Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.)</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-filter">
<h2><a class="toc-backref" href="#id344" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a><a class="headerlink" href="#tool-outputs-data-filter" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tag can contain a <code class="docutils literal notranslate"><span class="pre">&lt;filter&gt;</span></code> tag which includes a Python code
block to be executed to test whether to include this output in the outputs the
tool ultimately creates. If the code, when executed, returns <code class="docutils literal notranslate"><span class="pre">True</span></code>,
the output dataset is retained. In these code blocks the tool parameters appear
as Python variables and are thus referred to without the $ used for the Cheetah
template (used in the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag). Variables that are part of
conditionals are accessed using a dictionary named after the conditional. Boolean
parameters appear as booleans, not the value of their <code class="docutils literal notranslate"><span class="pre">truevalue</span></code> and
<code class="docutils literal notranslate"><span class="pre">falsevalue</span></code> attributes. In the example below, <code class="docutils literal notranslate"><span class="pre">options[&quot;selection_mode&quot;]</span></code> would
appear as <code class="docutils literal notranslate"><span class="pre">$options.selection_mode</span></code> in Cheetah. Similarly <code class="docutils literal notranslate"><span class="pre">options[&quot;vcf_output&quot;]</span></code>
would appear as <code class="docutils literal notranslate"><span class="pre">$options.vcf_output</span></code> having the values <code class="docutils literal notranslate"><span class="pre">'--vcf'</span></code> when true and
<code class="docutils literal notranslate"><span class="pre">''</span></code> when false in Cheetah.
Note that also parameters in sections are accessed via a dictionary.</p>
<section id="id79">
<h3>Example<a class="headerlink" href="#id79" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&lt;inputs&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Reference genome&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;bam&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_bam&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Aligned reads&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;options&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Use advanced options&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;selection_mode&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">selected=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;defaults&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>default<span class="w"> </span>options<span class="nt">&lt;/option&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;advanced&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>advanced<span class="w"> </span>options<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;defaults&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;advanced&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;vcf_output&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;boolean&quot;</span><span class="w"> </span><span class="na">checked=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;VCF output&quot;</span>
<span class="w">            </span><span class="na">truevalue=</span><span class="s">&quot;--vcf&quot;</span><span class="w"> </span><span class="na">falsevalue=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/when&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;outputs&gt;</span>
<span class="w">      </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;txt&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Alignment report on ${on_string}&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_txt&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;vcf&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Variant summary on ${on_string}&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_vcf&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;filter&gt;</span>options[&#39;selection_mode&#39;]<span class="w"> </span>==<span class="w"> </span>&#39;advanced&#39;<span class="w"> </span>and<span class="w"> </span>options[&#39;vcf_output&#39;]<span class="nt">&lt;/filter&gt;</span>
<span class="w">      </span><span class="nt">&lt;/data&gt;</span>
<span class="w">    </span><span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>Note that variables that correspond to optional select parameters are <code class="docutils literal notranslate"><span class="pre">None</span></code> if nothing is selected.
Therefore a filter for such a variable looks like the following example.</p>
</section>
<section id="id80">
<h3>Example<a class="headerlink" href="#id80" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&lt;inputs&gt;</span>
<span class="w">       </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_type&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;save_phase&quot;</span><span class="nt">&gt;</span>Phase<span class="w"> </span>Movie<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;save_period&quot;</span><span class="nt">&gt;</span>Period<span class="w"> </span>Movie<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">    </span><span class="nt">&lt;/inputs&gt;</span>

<span class="w">    </span><span class="nt">&lt;outputs&gt;</span>
<span class="w">        </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;phase_out&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tiff&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter&gt;</span>output_type<span class="w"> </span>and<span class="w"> </span>&quot;save_phase&quot;<span class="w"> </span>in<span class="w"> </span>output_type<span class="nt">&lt;/filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/data&gt;</span>
<span class="w">        </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;period_out&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tiff&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;${movie.name[:-4]}_period&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter&gt;</span>output_type<span class="w"> </span>and<span class="w"> </span>&quot;save_period&quot;<span class="w"> </span>in<span class="w"> </span>output_type<span class="nt">&lt;/filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/data&gt;</span>
<span class="w">    </span><span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="tool-outputs-data-change-format">
<h2><a class="toc-backref" href="#id345" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">change_format</span></code></a><a class="headerlink" href="#tool-outputs-data-change-format" title="Link to this heading">¶</a></h2>
<p>See
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/extract_genomic_dna/extract_genomic_dna.xml">extract_genomic_dna.xml</a>
or the test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/output_format.xml">output_format.xml</a>
for simple examples of how this tag set is used in a tool. This tag set is
optionally contained within the <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tag set and is the container tag set
for the following <code class="docutils literal notranslate"><span class="pre">&lt;when&gt;</span></code> tag set.</p>
</section>
<section id="tool-outputs-data-change-format-when">
<h2><a class="toc-backref" href="#id346" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">change_format</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a><a class="headerlink" href="#tool-outputs-data-change-format-when" title="Link to this heading">¶</a></h2>
<p>If the data type of the output dataset is the specified type, the data type is
changed to the desired type.</p>
<section id="id81">
<h3>Examples<a class="headerlink" href="#id81" title="Link to this heading">¶</a></h3>
<p>Assume that your tool config includes the following select list parameter
structure:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_format&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Output data type&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;fasta&quot;</span><span class="nt">&gt;</span>FASTA<span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;interval&quot;</span><span class="nt">&gt;</span>Interval<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/param&gt;</span>
</pre></div>
</div>
<p>Then whenever the user selects the <code class="docutils literal notranslate"><span class="pre">interval</span></code> option from the select list, the
following structure in your tool config will override the <code class="docutils literal notranslate"><span class="pre">format=&quot;fasta&quot;</span></code> setting
in the <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tag set with <code class="docutils literal notranslate"><span class="pre">format=&quot;interval&quot;</span></code>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;change_format&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">input=</span><span class="s">&quot;out_format&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;interval&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/change_format&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>See
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/extract_genomic_dna/extract_genomic_dna.xml">extract_genomic_dna.xml</a>
or the test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/output_format.xml">output_format.xml</a>
for more examples.</p>
</section>
<section id="id82">
<h3>Attributes<a class="headerlink" href="#id82" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">input</span></code></p></td>
<td><p>This attribute should be the name of the desired input parameter (e.g. <code class="docutils literal notranslate"><span class="pre">input=&quot;out_format&quot;</span></code> above).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>This must be a possible value of the <code class="docutils literal notranslate"><span class="pre">input</span></code> parameter (e.g. <code class="docutils literal notranslate"><span class="pre">value=&quot;interval&quot;</span></code> above), or of the deprecated <code class="docutils literal notranslate"><span class="pre">input_dataset</span></code>’s attribute.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>This value must be a supported data type (e.g. <code class="docutils literal notranslate"><span class="pre">format=&quot;interval&quot;</span></code>). See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> for a list of supported formats.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">input_dataset</span></code></p></td>
<td><p><em>Deprecated</em>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></td>
<td><p><em>Deprecated</em>.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-actions">
<h2><a class="toc-backref" href="#id347" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code></a><a class="headerlink" href="#tool-outputs-data-actions" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">actions</span></code> directive allows tools to dynamically take actions related to an
<code class="docutils literal notranslate"><span class="pre">output</span></code> either unconditionally or conditionally based on inputs. These
actions currently include setting metadata values and the output’s data format.</p>
<p>The examples below will demonstrate that the <code class="docutils literal notranslate"><span class="pre">actions</span></code> tag contains child
<code class="docutils literal notranslate"><span class="pre">conditional</span></code> tags. The these conditionals are met, additional <code class="docutils literal notranslate"><span class="pre">action</span></code>
directives below the conditional are apply to the <code class="docutils literal notranslate"><span class="pre">data</span></code> output.</p>
<section id="metadata">
<h3>Metadata<a class="headerlink" href="#metadata" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;actions&gt;</span></code> in the Bowtie 2 wrapper is used in lieu of the deprecated
<code class="docutils literal notranslate"><span class="pre">&lt;code&gt;</span></code> tag to set the <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> of the output dataset. In
<a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/bowtie2/bowtie2_wrapper.xml">bowtie2_wrapper.xml</a>
(see below), according to the first action block, if the
<code class="docutils literal notranslate"><span class="pre">reference_genome.source</span></code> is <code class="docutils literal notranslate"><span class="pre">indexed</span></code> (not <code class="docutils literal notranslate"><span class="pre">history</span></code>), then it will assign
the <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> of the output file to be the same as that of the reference file. It
does this by looking at through the data table and finding the entry that has the
value that’s been selected in the index dropdown box as column 1 of the loc file
entry and using the dbkey, in column 0 (ignoring comment lines (starting with #)
along the way).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">reference_genome.source</span></code> is <code class="docutils literal notranslate"><span class="pre">history</span></code>, it pulls the <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> from the
supplied file.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;bam&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;${tool.name} on ${on_string}: aligned reads (sorted BAM)&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;filter&gt;</span>analysis_type[&#39;analysis_type_selector&#39;]<span class="w"> </span>==<span class="w"> </span>&quot;simple&quot;<span class="w"> </span>or<span class="w"> </span>analysis_type[&#39;sam_opt&#39;]<span class="w"> </span>is<span class="w"> </span>False<span class="nt">&lt;/filter&gt;</span>
<span class="w">  </span><span class="nt">&lt;actions&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome.source&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_data_table&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bowtie2_indexes&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="na">offset=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;param_value&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;startswith&quot;</span><span class="w"> </span><span class="na">keep=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;param_value&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;reference_genome.index&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">          </span><span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/action&gt;</span>
<span class="w">      </span><span class="nt">&lt;/when&gt;</span>
<span class="w">      </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;history&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_param&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome.own_file&quot;</span><span class="w"> </span><span class="na">param_attribute=</span><span class="s">&quot;dbkey&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/action&gt;</span>
<span class="w">      </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">  </span><span class="nt">&lt;/actions&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
</section>
<section id="format">
<h3>Format<a class="headerlink" href="#format" title="Link to this heading">¶</a></h3>
<p>The Bowtie 2 example also demonstrates conditionally setting an output format
based on inputs, as shown below:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fastqsanger&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_unaligned_reads_r&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;${tool.name} on ${on_string}: unaligned reads (R)&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;filter&gt;</span>(library[&#39;type&#39;]<span class="w"> </span>==<span class="w"> </span>&quot;paired&quot;<span class="w"> </span>or<span class="w"> </span>library[&#39;type&#39;]<span class="w"> </span>==<span class="w"> </span>&quot;paired_collection&quot;)<span class="w"> </span>and<span class="w"> </span>library[&#39;unaligned_file&#39;]<span class="w"> </span>is<span class="w"> </span>True<span class="nt">&lt;/filter&gt;</span>
<span class="w">    </span><span class="nt">&lt;actions&gt;</span>
<span class="w">        </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;library.type&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;paired&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;format&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_param&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;library.input_2&quot;</span><span class="w"> </span><span class="na">param_attribute=</span><span class="s">&quot;ext&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/action&gt;</span>
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">            </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;paired_collection&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;format&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_param&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;library.input_1&quot;</span><span class="w"> </span><span class="na">param_attribute=</span><span class="s">&quot;reverse.ext&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/action&gt;</span>
<span class="w">            </span><span class="nt">&lt;/when&gt;</span>
<span class="w">        </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/actions&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p>Note that the value given in <code class="docutils literal notranslate"><span class="pre">when</span></code> tags needs to be the python string representation
of the value of the referred parameter, e.g. <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> if the referred
parameter is a boolean.</p>
</section>
<section id="unconditional-actions-and-column-names">
<h3>Unconditional Actions and Column Names<a class="headerlink" href="#unconditional-actions-and-column-names" title="Link to this heading">¶</a></h3>
<p>For a static file that contains a fixed number of columns, it is straight forward:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;table&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;actions&gt;</span>
<span class="w">            </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;column_names&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;Firstname,Lastname,Age&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/actions&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>It may also be necessary to use column names based on a variable from another
input file. This is implemented in the
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/htseq_count/htseq-count.xml">htseq-count</a>
and
<a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/featurecounts/featurecounts.xml">featureCounts</a>
wrappers:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_file&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/inputs&gt;</span>
<span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_short&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;actions&gt;</span>
<span class="w">            </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;column_names&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;Geneid,${input_file.name}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/actions&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>Or in case of multiple files:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_files&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">multiple=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/inputs&gt;</span>
<span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_short&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;actions&gt;</span>
<span class="w">            </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;column_names&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;Geneid,${&#39;,&#39;.join([a.name for a in $input_files])}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/actions&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
</section>
<section id="unconditional-actions-an-older-example">
<h3>Unconditional Actions - An Older Example<a class="headerlink" href="#unconditional-actions-an-older-example" title="Link to this heading">¶</a></h3>
<p>The first approach above to setting <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> based on tool data tables is
prefered, but an older example using so called “loc files” directly is found
below.</p>
<p>In addition to demonstrating this lower-level direct access of .loc files, it
demonstrates an unconditional action. The second block would not be needed for
most cases - it was required in this tool to handle the specific case of a small
reference file used for functional testing. It says that if the dbkey has been
set to <code class="docutils literal notranslate"><span class="pre">equCab2chrM</span></code> (which is what the <code class="docutils literal notranslate"><span class="pre">&lt;filter</span> <span class="pre">type=&quot;metadata_value&quot;...</span> <span class="pre">column=&quot;1&quot;</span> <span class="pre">/&gt;</span></code> tag does), then it should be changed to <code class="docutils literal notranslate"><span class="pre">equCab2</span></code> (which is the
<code class="docutils literal notranslate"><span class="pre">&lt;option</span> <span class="pre">type=&quot;from_param&quot;</span> <span class="pre">...</span> <span class="pre">column=&quot;0&quot;</span> <span class="pre">...&gt;</span></code> tag does).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;actions&gt;</span>
<span class="w">   </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;refGenomeSource.genomeSource&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">&gt;</span>
<span class="w">           </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_file&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bowtie_indices.loc&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">offset=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">               </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;param_value&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;#&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;startswith&quot;</span><span class="w"> </span><span class="na">keep=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="w">               </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;param_value&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;refGenomeSource.index&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/option&gt;</span>
<span class="w">         </span><span class="nt">&lt;/action&gt;</span>
<span class="w">       </span><span class="nt">&lt;/when&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Special casing equCab2chrM to equCab2 --&gt;</span>
<span class="w">    </span><span class="nt">&lt;action</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;from_param&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;refGenomeSource.genomeSource&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">offset=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;insert_column&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;equCab2chrM&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;insert_column&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;equCab2&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;metadata_value&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;output&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="w"> </span><span class="na">column=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/option&gt;</span>
<span class="w">    </span><span class="nt">&lt;/action&gt;</span>
<span class="nt">&lt;/actions&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="tool-outputs-data-actions-conditional">
<h2><a class="toc-backref" href="#id348" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a><a class="headerlink" href="#tool-outputs-data-actions-conditional" title="Link to this heading">¶</a></h2>
<p>This directive is contained within an output <code class="docutils literal notranslate"><span class="pre">data</span></code>’s  <code class="docutils literal notranslate"><span class="pre">actions</span></code> directive.
This directive describes the state of the inputs required to apply an <code class="docutils literal notranslate"><span class="pre">action</span></code>
(specified as children of the child <code class="docutils literal notranslate"><span class="pre">when</span></code> directives to this element) to an
output.</p>
<p>See <a class="reference internal" href="#tool-outputs-data-actions">actions</a> documentation for examples
of this directive.</p>
<section id="id83">
<h3>Attributes<a class="headerlink" href="#id83" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the input parameter to base conditional logic on. The value of this parameter will be matched against nested <code class="docutils literal notranslate"><span class="pre">when</span></code> directives.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-actions-conditional-when">
<h2><a class="toc-backref" href="#id349" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">when</span></code></a><a class="headerlink" href="#tool-outputs-data-actions-conditional-when" title="Link to this heading">¶</a></h2>
<p>See <a class="reference internal" href="#tool-outputs-data-actions">actions</a> documentation for examples
of this directive.</p>
<section id="id84">
<h3>Attributes<a class="headerlink" href="#id84" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Value to match conditional input value against. This needs to be the python string representation of the parameter value, e.g. <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> if the referred parameter is a boolean.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">datatype_isinstance</span></code></p></td>
<td><p>Datatype to match against (if <code class="docutils literal notranslate"><span class="pre">value</span></code> is unspecified). This should be the short string describing the format (e.g. <code class="docutils literal notranslate"><span class="pre">interval</span></code>).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-actions-action">
<h2><a class="toc-backref" href="#id350" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">action</span></code></a><a class="headerlink" href="#tool-outputs-data-actions-action" title="Link to this heading">¶</a></h2>
<p>This directive is contained within an output <code class="docutils literal notranslate"><span class="pre">data</span></code>’s  <code class="docutils literal notranslate"><span class="pre">actions</span></code> directive
(either directly or beneath a parent <code class="docutils literal notranslate"><span class="pre">conditional</span></code> tag). This directive
describes modifications to either the output’s format or metadata (based on
whether <code class="docutils literal notranslate"><span class="pre">type</span></code> is <code class="docutils literal notranslate"><span class="pre">format</span></code> or <code class="docutils literal notranslate"><span class="pre">metadata</span></code>).</p>
<p>See <a class="reference internal" href="#tool-outputs-data-actions">actions</a> documentation for examples
of this directive.</p>
<section id="id85">
<h3>Attributes<a class="headerlink" href="#id85" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of action (either <code class="docutils literal notranslate"><span class="pre">format</span></code> or <code class="docutils literal notranslate"><span class="pre">metadata</span></code> currently).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">type=&quot;metadata&quot;</span></code>, the name of the metadata element.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">type=&quot;format&quot;</span></code>, the default format if none of the nested options apply.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-actions-action-option">
<h2><a class="toc-backref" href="#id351" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">actions</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">action</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">option</span></code></a><a class="headerlink" href="#tool-outputs-data-actions-action-option" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Load options from a data table, a parameter (or its metadata), or a file</p></li>
<li><p>Filter the options using all filters defined by the contained <code class="docutils literal notranslate"><span class="pre">filter</span></code> tags.</p></li>
<li><p>Chose a value in a given line (<code class="docutils literal notranslate"><span class="pre">offset</span></code>) and <code class="docutils literal notranslate"><span class="pre">column</span></code></p></li>
</ol>
<p>The options can be considered as a table where each line is an option. The values
in the columns can be used for filtering.</p>
<p>The different data sources can be loaded as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_data_table</span></code>: load the options from the data table with the given <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_param</span></code>: Initialize a single option containing the value of the
referred parameter (<code class="docutils literal notranslate"><span class="pre">name</span></code>) or its metadata (<code class="docutils literal notranslate"><span class="pre">param_attribute</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_file</span></code>: Load the file the given <code class="docutils literal notranslate"><span class="pre">name</span></code> (in Galaxy’s tool data path), columns
are defined by the given <code class="docutils literal notranslate"><span class="pre">separator</span></code> (default is tab).</p></li>
</ul>
<section id="id86">
<h3>Attributes<a class="headerlink" href="#id86" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Source of the tabular data <code class="docutils literal notranslate"><span class="pre">from_data_table</span></code>, <code class="docutils literal notranslate"><span class="pre">from_param</span></code>, or <code class="docutils literal notranslate"><span class="pre">from_file</span></code>.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the referred data table, parameter, or file (required).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">column</span></code></p></td>
<td><p>The column to choose the value from (required)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">offset</span></code></p></td>
<td><p>The row (of the options) to choose the value from (by default -1, ie. last row)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">param_attribute</span></code></p></td>
<td><p>Applies to <code class="docutils literal notranslate"><span class="pre">from_param</span></code>. The attribute of the parameter to use.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-data-discover-datasets">
<h2><a class="toc-backref" href="#id352" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">data</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code></a><a class="headerlink" href="#tool-outputs-data-discover-datasets" title="Link to this heading">¶</a></h2>
<p>Describe datasets to dynamically collect after the job complete.</p>
<p>There are many simple tools with examples of this element distributed with
Galaxy, including:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_output.xml">multi_output.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_output_assign_primary.xml">multi_output_assign_primary.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_output_configured.xml">multi_output_configured.xml</a></p></li>
</ul>
<p>More information can be found on Planemo’s documentation for
<a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#multiple-output-files">multiple output files</a>.</p>
<section id="id87">
<h3>Attributes<a class="headerlink" href="#id87" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">from_provided_metadata</span></code></p></td>
<td><p>Indicate that dataset filenames should simply be read from the provided metadata file (e.g. galaxy.json). If this is set - pattern and sort must not be set.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pattern</span></code></p></td>
<td><p>Regular expression used to find filenames and parse dynamic properties.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directory</span></code></p></td>
<td><p>Directory (relative to working directory) to search for files.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recurse</span></code></p></td>
<td><p>Indicates that the specified directory should be searched recursively for matching files.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">match_relative_path</span></code></p></td>
<td><p>Indicates that the entire path of the discovered dataset relative to the specified directory should be available for matching patterns.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>Format (or datatype) of discovered datasets (an alias with <code class="docutils literal notranslate"><span class="pre">ext</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ext</span></code></p></td>
<td><p>Format (or datatype) of discovered datasets (an alias with <code class="docutils literal notranslate"><span class="pre">format</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sort_by</span></code></p></td>
<td><p>A string <code class="docutils literal notranslate"><span class="pre">[reverse_][SORT_COMP_]SORTBY</span></code> describing the desired sort order of the collection elements. <code class="docutils literal notranslate"><span class="pre">SORTBY</span></code> can be <code class="docutils literal notranslate"><span class="pre">filename</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> and the optional <code class="docutils literal notranslate"><span class="pre">SORT_COMP</span></code> can be either <code class="docutils literal notranslate"><span class="pre">lexical</span></code> or <code class="docutils literal notranslate"><span class="pre">numeric</span></code>. Default is lexical sorting by filename.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">visible</span></code></p></td>
<td><p>Indication if this dataset is visible in output history. This defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>, but probably shouldn’t - be sure to set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if that is your intention.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">assign_primary_output</span></code></p></td>
<td><p>Replace the primary dataset described by the parameter <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter with the first output discovered.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-collection">
<h2><a class="toc-backref" href="#id353" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code></a><a class="headerlink" href="#tool-outputs-collection" title="Link to this heading">¶</a></h2>
<p>This tag set is contained within the <code class="docutils literal notranslate"><span class="pre">&lt;outputs&gt;</span></code> tag set, and it defines the
output dataset collection description resulting from the tool’s execution. The
value of the attribute <code class="docutils literal notranslate"><span class="pre">label</span></code> can be acquired from input parameters or
metadata in the same way that the command line parameters are (discussed in the
<a class="reference internal" href="#tool-command">command</a> directive).</p>
<p>Creating collections in tools is covered in-depth in
<a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#creating-collections">Planemo’s documentation</a>.</p>
<section id="id88">
<h3>Attributes<a class="headerlink" href="#id88" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Collection type for output. Simple collection types are either <code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">paired</span></code>, nested collections are specified as colon separated list of simple collection types (the most common types are <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">paired</span></code>, <code class="docutils literal notranslate"><span class="pre">list:paired</span></code>, or <code class="docutils literal notranslate"><span class="pre">list:list</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type_source</span></code></p></td>
<td><p>This is the name of input collection to derive collection’s type (e.g. <code class="docutils literal notranslate"><span class="pre">collection_type</span></code>) from.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>The short name for the output datatype. The valid values for format can be found in <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/config/datatypes_conf.xml.sample">/config/datatypes_conf.xml.sample</a> (e.g. <code class="docutils literal notranslate"><span class="pre">format=&quot;pdf&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">format=&quot;fastqsanger&quot;</span></code>). For collections this is the default format for all included elements. Note that the format specified here is ignored for discovered data sets.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format_source</span></code></p></td>
<td><p>This sets the data type of the output dataset(s) to be the same format as that of the specified tool input.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>This will be the name of the history item for the output data set. The string can include structure like <code class="docutils literal notranslate"><span class="pre">${&lt;some</span> <span class="pre">param</span> <span class="pre">name&gt;.&lt;some</span> <span class="pre">attribute&gt;}</span></code>, as discussed for command line parameters in the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag set section above. The default label is <code class="docutils literal notranslate"><span class="pre">${tool.name}</span> <span class="pre">on</span> <span class="pre">${on_string}</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name for this output. This <code class="docutils literal notranslate"><span class="pre">name</span></code> is used as the Cheetah variable containing the Galaxy assigned output path in <code class="docutils literal notranslate"><span class="pre">command</span></code> and <code class="docutils literal notranslate"><span class="pre">configfile</span></code> elements. The name should not contain pipes or periods (e.g. <code class="docutils literal notranslate"><span class="pre">.</span></code>).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">structured_like</span></code></p></td>
<td><p>This is the name of input collection or dataset to derive “structure” of the output from (output element count and identifiers). For instance, if the referenced input has three ordered items with identifiers <code class="docutils literal notranslate"><span class="pre">sample1</span></code>, <code class="docutils literal notranslate"><span class="pre">sample2</span></code>,  and <code class="docutils literal notranslate"><span class="pre">sample3</span></code>. If this references input elements in conditionals, this value should be qualified (e.g. ``cond</p></td>
<td><p>input<code class="docutils literal notranslate"><span class="pre">instead</span> <span class="pre">of</span></code>input<code class="docutils literal notranslate"><span class="pre">if</span></code>input<code class="docutils literal notranslate"><span class="pre">is</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">conditional</span> <span class="pre">with</span></code>name=”cond”``).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">inherit_format</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">structured_like</span></code> is set, inherit format of outputs from format of corresponding input.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-outputs-collection-filter">
<h2><a class="toc-backref" href="#id354" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">filter</span></code></a><a class="headerlink" href="#tool-outputs-collection-filter" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tag can contain a <code class="docutils literal notranslate"><span class="pre">&lt;filter&gt;</span></code> tag which includes a Python code
block to be executed to test whether to include this output in the outputs the
tool ultimately creates. If the code, when executed, returns <code class="docutils literal notranslate"><span class="pre">True</span></code>,
the output dataset is retained. In these code blocks the tool parameters appear
as Python variables and are thus referred to without the $ used for the Cheetah
template (used in the <code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> tag). Variables that are part of
conditionals are accessed using a dictionary named after the conditional. Boolean
parameters appear as booleans, not the value of their <code class="docutils literal notranslate"><span class="pre">truevalue</span></code> and
<code class="docutils literal notranslate"><span class="pre">falsevalue</span></code> attributes. In the example below, <code class="docutils literal notranslate"><span class="pre">options[&quot;selection_mode&quot;]</span></code> would
appear as <code class="docutils literal notranslate"><span class="pre">$options.selection_mode</span></code> in Cheetah. Similarly <code class="docutils literal notranslate"><span class="pre">options[&quot;vcf_output&quot;]</span></code>
would appear as <code class="docutils literal notranslate"><span class="pre">$options.vcf_output</span></code> having the values <code class="docutils literal notranslate"><span class="pre">'--vcf'</span></code> when true and
<code class="docutils literal notranslate"><span class="pre">''</span></code> when false in Cheetah.
Note that also parameters in sections are accessed via a dictionary.</p>
<section id="id89">
<h3>Example<a class="headerlink" href="#id89" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&lt;inputs&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;fasta&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;reference_genome&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Reference genome&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;data&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;bam&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_bam&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Aligned reads&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;options&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Use advanced options&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;selection_mode&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">selected=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;defaults&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>default<span class="w"> </span>options<span class="nt">&lt;/option&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;advanced&quot;</span><span class="nt">&gt;</span>Use<span class="w"> </span>advanced<span class="w"> </span>options<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;defaults&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;when</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;advanced&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;vcf_output&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;boolean&quot;</span><span class="w"> </span><span class="na">checked=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;VCF output&quot;</span>
<span class="w">            </span><span class="na">truevalue=</span><span class="s">&quot;--vcf&quot;</span><span class="w"> </span><span class="na">falsevalue=</span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/when&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/inputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;outputs&gt;</span>
<span class="w">      </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;txt&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Alignment report on ${on_string}&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_txt&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;vcf&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;Variant summary on ${on_string}&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_vcf&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;filter&gt;</span>options[&#39;selection_mode&#39;]<span class="w"> </span>==<span class="w"> </span>&#39;advanced&#39;<span class="w"> </span>and<span class="w"> </span>options[&#39;vcf_output&#39;]<span class="nt">&lt;/filter&gt;</span>
<span class="w">      </span><span class="nt">&lt;/data&gt;</span>
<span class="w">    </span><span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
<p>Note that variables that correspond to optional select parameters are <code class="docutils literal notranslate"><span class="pre">None</span></code> if nothing is selected.
Therefore a filter for such a variable looks like the following example.</p>
</section>
<section id="id90">
<h3>Example<a class="headerlink" href="#id90" title="Link to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">&lt;inputs&gt;</span>
<span class="w">       </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_type&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;select&quot;</span><span class="w"> </span><span class="na">optional=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;save_phase&quot;</span><span class="nt">&gt;</span>Phase<span class="w"> </span>Movie<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;save_period&quot;</span><span class="nt">&gt;</span>Period<span class="w"> </span>Movie<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/param&gt;</span>
<span class="w">    </span><span class="nt">&lt;/inputs&gt;</span>

<span class="w">    </span><span class="nt">&lt;outputs&gt;</span>
<span class="w">        </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;phase_out&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tiff&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter&gt;</span>output_type<span class="w"> </span>and<span class="w"> </span>&quot;save_phase&quot;<span class="w"> </span>in<span class="w"> </span>output_type<span class="nt">&lt;/filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/data&gt;</span>
<span class="w">        </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;period_out&quot;</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tiff&quot;</span><span class="w"> </span><span class="na">label=</span><span class="s">&quot;${movie.name[:-4]}_period&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;filter&gt;</span>output_type<span class="w"> </span>and<span class="w"> </span>&quot;save_period&quot;<span class="w"> </span>in<span class="w"> </span>output_type<span class="nt">&lt;/filter&gt;</span>
<span class="w">        </span><span class="nt">&lt;/data&gt;</span>
<span class="w">    </span><span class="nt">&lt;/outputs&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="tool-outputs-collection-discover-datasets">
<h2><a class="toc-backref" href="#id355" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">outputs</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code></a><a class="headerlink" href="#tool-outputs-collection-discover-datasets" title="Link to this heading">¶</a></h2>
<p>This tag allows one to describe the datasets contained within an output
collection dynamically, such that the outputs are “discovered” based on regular
expressions after the job is complete.</p>
<p>There are many simple tools with examples of this element distributed with
Galaxy, including:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/collection_split_on_column.xml">collection_split_on_column.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/collection_creates_dynamic_list_of_pairs.xml">collection_creates_dynamic_list_of_pairs.xml</a></p></li>
<li><p><a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/collection_creates_dynamic_nested.xml">collection_creates_dynamic_nested.xml</a></p></li>
</ul>
<section id="id91">
<h3>Attributes<a class="headerlink" href="#id91" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">from_provided_metadata</span></code></p></td>
<td><p>Indicate that dataset filenames should simply be read from the provided metadata file (e.g. galaxy.json). If this is set - pattern and sort_by must not be set.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pattern</span></code></p></td>
<td><p>Regular expression used to find filenames and parse dynamic properties.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directory</span></code></p></td>
<td><p>Directory (relative to working directory) to search for files.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">recurse</span></code></p></td>
<td><p>Indicates that the specified directory should be searched recursively for matching files.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">match_relative_path</span></code></p></td>
<td><p>Indicates that the entire path of the discovered dataset relative to the specified directory should be available for matching patterns.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>Format (or datatype) of discovered datasets (an alias with <code class="docutils literal notranslate"><span class="pre">ext</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ext</span></code></p></td>
<td><p>Format (or datatype) of discovered datasets (an alias with <code class="docutils literal notranslate"><span class="pre">format</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sort_by</span></code></p></td>
<td><p>A string <code class="docutils literal notranslate"><span class="pre">[reverse_][SORT_COMP_]SORTBY</span></code> describing the desired sort order of the collection elements. <code class="docutils literal notranslate"><span class="pre">SORTBY</span></code> can be <code class="docutils literal notranslate"><span class="pre">filename</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">designation</span></code>, <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> and the optional <code class="docutils literal notranslate"><span class="pre">SORT_COMP</span></code> can be either <code class="docutils literal notranslate"><span class="pre">lexical</span></code> or <code class="docutils literal notranslate"><span class="pre">numeric</span></code>. Default is lexical sorting by filename.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">visible</span></code></p></td>
<td><p>Indication if this dataset is visible in the history. This defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>, but probably shouldn’t - be sure to set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if that is your intention.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests">
<h2><a class="toc-backref" href="#id356" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code></a><a class="headerlink" href="#tool-tests" title="Link to this heading">¶</a></h2>
<p>Container tag set to specify tests via the <code class="docutils literal notranslate"><span class="pre">&lt;test&gt;</span></code> tag sets. Any number of tests can be included,
and each test is wrapped within separate <code class="docutils literal notranslate"><span class="pre">&lt;test&gt;</span></code> tag sets. Functional tests are
executed via <a class="reference external" href="https://planemo.readthedocs.io/">Planemo</a> or the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/run_tests.sh">run_tests.sh</a>
shell script distributed with Galaxy.</p>
<p>The documentation contained here is mostly reference documentation, for
tutorials on writing tool tests please check out Planemo’s
<a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_advanced.html#test-driven-development">Test-Driven Development</a>
documentation or the much older wiki content for
<a class="reference external" href="https://galaxyproject.org/admin/tools/writing-tests/">WritingTests</a>.</p>
<section id="id92">
<h3>Best Practices<a class="headerlink" href="#id92" title="Link to this heading">¶</a></h3>
<p>Find the Intergalactic Utilities Commision suggested best practices for this
element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#tests">here</a>.</p>
</section>
</section>
<section id="tool-tests-test">
<h2><a class="toc-backref" href="#id357" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code></a><a class="headerlink" href="#tool-tests-test" title="Link to this heading">¶</a></h2>
<p>This tag set contains the necessary parameter values for executing the tool via
the functional test framework.</p>
<section id="id93">
<h3>Example<a class="headerlink" href="#id93" title="Link to this heading">¶</a></h3>
<p>The following two tests will execute the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/filters/sorter.xml">/tools/filters/sorter.xml</a>
tool. Notice the way that the tool’s inputs and outputs are defined.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">&lt;tests&gt;</span>
<span class="w">    </span><span class="nt">&lt;test&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1.bed&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;bed&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;column&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;order&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;ASC&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;style&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;num&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;sort1_num.bed&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;bed&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/test&gt;</span>
<span class="w">    </span><span class="nt">&lt;test&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;7.bed&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;bed&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;column&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;order&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;ASC&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;style&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;alpha&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;sort1_alpha.bed&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;bed&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/test&gt;</span>
<span class="w">  </span><span class="nt">&lt;/tests&gt;</span>
</pre></div>
</div>
<p>The following example, tests the execution of the MAF-to-FASTA converter
(<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/tools/maf/maf_to_fasta.xml">/tools/maf/maf_to_fasta.xml</a>).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;tests&gt;</span>
<span class="w">    </span><span class="nt">&lt;test&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3.maf&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;maf&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;species&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;canFam1&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fasta_type&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;concatenated&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;cf_maf2fasta_concat.dat&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;fasta&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/test&gt;</span>
<span class="nt">&lt;/tests&gt;</span>
</pre></div>
</div>
<p>This test demonstrates verifying specific properties about a test output instead
of directly comparing it to another file. Here the file attribute is not
specified and instead a series of assertions is made about the output.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;maf_stats_interval_in.dat&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;lineNum&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;99999&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;chr7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;chr8&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;1274\d+53&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;.*\s+127489808\s+127494553&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="cm">&lt;!-- &amp;#009; is XML escape code for tab --&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;chr7&amp;#009;127471195&amp;#009;127489808&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_n_columns</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_n_lines</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id94">
<h3>Attributes<a class="headerlink" href="#id94" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expect_exit_code</span></code></p></td>
<td><p>Describe the job’s expected exit code.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">expect_num_outputs</span></code></p></td>
<td><p>Assert the number of statically defined items (datasets and collections) this test should produce. Each <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">collection</span></code> tag that is listed in the outputs section is a statically defined output and adds one to this count.  For instance a statically defined pair adds a count of 3; 1 for the collection and 1 for each of the two datasets.  Dynamically defined output datasets (using <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code> tag) are not counted here, but note that the <code class="docutils literal notranslate"><span class="pre">collection</span></code> or <code class="docutils literal notranslate"><span class="pre">data</span></code> tag that includes the <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code> still adds a count of one.  This is useful to ensure <code class="docutils literal notranslate"><span class="pre">filter</span></code> directives are implemented correctly.  See <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/expect_num_outputs.xml">here</a> for examples.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expect_failure</span></code></p></td>
<td><p>Setting this to <code class="docutils literal notranslate"><span class="pre">true</span></code> indicates the expectation is for the job fail. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code> no job output checks may be present in <code class="docutils literal notranslate"><span class="pre">test</span></code> definition.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">expect_test_failure</span></code></p></td>
<td><p>Setting this to <code class="docutils literal notranslate"><span class="pre">true</span></code> indicates that at least one of the assumptions of the test is not met. This is most useful for internal testing.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">maxseconds</span></code></p></td>
<td><p>Maximum amount of time to let test run.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-param">
<h2><a class="toc-backref" href="#id358" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code></a><a class="headerlink" href="#tool-tests-test-param" title="Link to this heading">¶</a></h2>
<p>This tag set defines the tool’s input parameters for executing the tool via the
functional test framework. See <a class="reference internal" href="#tool-tests-test">test</a> documentation for
some simple examples of parameters.</p>
<section id="id95">
<h3>Parameter Types<a class="headerlink" href="#id95" title="Link to this heading">¶</a></h3>
<section id="text-integer-and-float">
<h4><code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>, and <code class="docutils literal notranslate"><span class="pre">float</span></code><a class="headerlink" href="#text-integer-and-float" title="Link to this heading">¶</a></h4>
<p>Values for these parameters are simply given by the desired value.</p>
</section>
<section id="id96">
<h4><code class="docutils literal notranslate"><span class="pre">boolean</span></code><a class="headerlink" href="#id96" title="Link to this heading">¶</a></h4>
<p>The value of the test parameter should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> corresponding
to the cases that the parameter is checked or not. It is also possible, but
discouraged, to use the value specified as <code class="docutils literal notranslate"><span class="pre">truevalue</span></code> or <code class="docutils literal notranslate"><span class="pre">falsevalue</span></code>.</p>
</section>
<section id="id97">
<h4><code class="docutils literal notranslate"><span class="pre">data</span></code><a class="headerlink" href="#id97" title="Link to this heading">¶</a></h4>
<p>Data input parameters can be given as a file name. The file should exist in the
<code class="docutils literal notranslate"><span class="pre">test-data</span></code> folder. Multiple files can be specified as comma separated list.</p>
</section>
<section id="id98">
<h4><code class="docutils literal notranslate"><span class="pre">select</span></code><a class="headerlink" href="#id98" title="Link to this heading">¶</a></h4>
<p>The value of a select parameter should be specified as the value of one of the
legal options. If more than one option is selected (<code class="docutils literal notranslate"><span class="pre">multiple=&quot;true&quot;</span></code>) they
should be given as comma separated list. For optional selects
(<code class="docutils literal notranslate"><span class="pre">optional=&quot;true&quot;</span></code>) the case that no option is selected can be specified with
<code class="docutils literal notranslate"><span class="pre">value=&quot;&quot;</span></code>.</p>
<p>While in general it is preferred to specify the selected cases by their values it
is also possible to specify them by their name (i.e. the content of the
<code class="docutils literal notranslate"><span class="pre">option</span></code> tag that is shown to the user). One use case is a dynamic select that is
generated from a data table with two columns: name and value where the value is
a path. Since the path changes with the test environment it can not be used to
select an option for a test.</p>
</section>
</section>
<section id="id99">
<h3>Attributes<a class="headerlink" href="#id99" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value must match the name of the associated input parameter (<code class="docutils literal notranslate"><span class="pre">param</span></code>).</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>This value must be one of the legal values that can be assigned to an input parameter.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value_json</span></code></p></td>
<td><p>This variant of the value parameters can be used to load typed parameters. This string will be loaded as JSON and its type will attempt to be preserved through API requests to Galaxy.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ftype</span></code></p></td>
<td><p>This attribute name should be included only with parameters of <code class="docutils literal notranslate"><span class="pre">type</span></code> <code class="docutils literal notranslate"><span class="pre">data</span></code> for the tool. If this attribute name is not included, the functional test framework will attempt to determine the data type for the input dataset using the data type sniffers.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dbkey</span></code></p></td>
<td><p>Specifies a <code class="docutils literal notranslate"><span class="pre">dbkey</span></code> value for the referenced input dataset. This is only valid if the corresponding parameter is of <code class="docutils literal notranslate"><span class="pre">type</span></code> <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tags</span></code></p></td>
<td><p>Comma separated list of tags to apply to the dataset (only works for elements of collections - e.g. <code class="docutils literal notranslate"><span class="pre">element</span></code> XML tags).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p></td>
<td><p>URL that points to a remote input file that will be downloaded and used as input. Please use this option only when is not possible to include the files in the <code class="docutils literal notranslate"><span class="pre">test-data</span></code> folder, since this is more error prone due to external factors like remote availability. You can use it in two ways: - If only <code class="docutils literal notranslate"><span class="pre">location</span></code> is given (and <code class="docutils literal notranslate"><span class="pre">value</span></code> is absent), the input file will be uploaded directly to Galaxy from the URL specified by the <code class="docutils literal notranslate"><span class="pre">location</span></code>  (same as regular pasted URL upload). - If <code class="docutils literal notranslate"><span class="pre">location</span></code> as well as <code class="docutils literal notranslate"><span class="pre">value</span></code> are given, the input file specified in <code class="docutils literal notranslate"><span class="pre">value</span></code> will be used from the tes data directory, if it’s not available on disk it will use the <code class="docutils literal notranslate"><span class="pre">location</span></code> to upload the input as the previous case.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-param-metadata">
<h2><a class="toc-backref" href="#id359" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">metadata</span></code></a><a class="headerlink" href="#tool-tests-test-param-metadata" title="Link to this heading">¶</a></h2>
<p>This directive specifies metadata that should be set for a test data parameter.</p>
<p>See <a class="reference external" href="https://planemo.readthedocs.io/en/latest/writing_how_do_i.html#test-metadata">planemo documentation</a></p>
<section id="id100">
<h3>Attributes<a class="headerlink" href="#id100" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the metadata element of the data parameter</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Value to set</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-param-collection">
<h2><a class="toc-backref" href="#id360" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">param</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">collection</span></code></a><a class="headerlink" href="#tool-tests-test-param-collection" title="Link to this heading">¶</a></h2>
<p>Definition of a collection for test input.</p>
<section id="id101">
<h3>Attributes<a class="headerlink" href="#id101" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of collection to create.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>The identifier of the collection. Default is <code class="docutils literal notranslate"><span class="pre">&quot;Unnamed</span> <span class="pre">Collection&quot;</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tags</span></code></p></td>
<td><p>Comma separated list of tags to apply to the dataset (only works for elements of collections - e.g. <code class="docutils literal notranslate"><span class="pre">element</span></code> XML tags).</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-repeat">
<h2><a class="toc-backref" href="#id361" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">repeat</span></code></a><a class="headerlink" href="#tool-tests-test-repeat" title="Link to this heading">¶</a></h2>
<p>Specify test parameters below an iteration of a <code class="docutils literal notranslate"><span class="pre">repeat</span></code> block with this
element.</p>
<p><code class="docutils literal notranslate"><span class="pre">param</span></code> elements in a <code class="docutils literal notranslate"><span class="pre">test</span></code> block can be arranged into nested <code class="docutils literal notranslate"><span class="pre">repeat</span></code>,
<code class="docutils literal notranslate"><span class="pre">conditional</span></code>, and <code class="docutils literal notranslate"><span class="pre">select</span></code> structures to match the inputs. While this might
be overkill for simple tests, it helps prevent ambiguous definitions and keeps
things organized in large test cases. A future <code class="docutils literal notranslate"><span class="pre">profile</span></code> version of Galaxy
tools may require <code class="docutils literal notranslate"><span class="pre">repeat</span></code> blocks be explicitly defined with this directive.</p>
<section id="id102">
<h3>Examples<a class="headerlink" href="#id102" title="Link to this heading">¶</a></h3>
<p>The test tool <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/disambiguate_repeats.xml">disambiguate_repeats.xml</a>
demonstrates the use of this directive.</p>
<p>This first test case demonstrates that this block allows different values for
the <code class="docutils literal notranslate"><span class="pre">param</span></code> named <code class="docutils literal notranslate"><span class="pre">input</span></code> to be tested even though this parameter name
appears in two different <code class="docutils literal notranslate"><span class="pre">&lt;repeat&gt;</span></code> elements in the <code class="docutils literal notranslate"><span class="pre">&lt;inputs&gt;</span></code> definition.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Can disambiguate repeats and specify multiple blocks using,</span>
<span class="cm">     nested structure. --&gt;</span>
<span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;more_queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line_alternative.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;This is a line of text.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;This is a different line of text.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>The second definition in that file demonstrates repeated <code class="docutils literal notranslate"><span class="pre">&lt;repeat&gt;</span></code> blocks
allowing multiple instances of a single repeat to be specified.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Multiple such blocks can be specified but only with newer API</span>
<span class="cm">     driven tests. --&gt;</span>
<span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line_alternative.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;more_queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;repeat</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;more_queries&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line_alternative.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/repeat&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;simple_lines_interleaved.txt&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id103">
<h3>Attributes<a class="headerlink" href="#id103" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value must match the name of the associated input <code class="docutils literal notranslate"><span class="pre">repeat</span></code>.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-section">
<h2><a class="toc-backref" href="#id362" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">section</span></code></a><a class="headerlink" href="#tool-tests-test-section" title="Link to this heading">¶</a></h2>
<p>Specify test parameters below a named of a <code class="docutils literal notranslate"><span class="pre">section</span></code> block matching
one in <code class="docutils literal notranslate"><span class="pre">inputs</span></code> with this element.</p>
<p><code class="docutils literal notranslate"><span class="pre">param</span></code> elements in a <code class="docutils literal notranslate"><span class="pre">test</span></code> block can be arranged into nested <code class="docutils literal notranslate"><span class="pre">repeat</span></code>,
<code class="docutils literal notranslate"><span class="pre">conditional</span></code>, and <code class="docutils literal notranslate"><span class="pre">select</span></code> structures to match the inputs. While this might
be overkill for simple tests, it helps prevent ambiguous definitions and keeps
things organized in large test cases. A future <code class="docutils literal notranslate"><span class="pre">profile</span></code> version of Galaxy
tools may require <code class="docutils literal notranslate"><span class="pre">section</span></code> blocks be explicitly defined with this
directive.</p>
<section id="id104">
<h3>Examples<a class="headerlink" href="#id104" title="Link to this heading">¶</a></h3>
<p>The test tool demonstrating sections
(<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/section.xml">section.xml</a>)
contains a test case demonstrating this block. This test case appears below:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;section</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;int&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;inttest&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;12456&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/section&gt;</span>
<span class="w">    </span><span class="nt">&lt;section</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;float&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;floattest&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;6.789&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/section&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;12456&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;6.789&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id105">
<h3>Attributes<a class="headerlink" href="#id105" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value must match the name of the associated input <code class="docutils literal notranslate"><span class="pre">section</span></code>.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-conditional">
<h2><a class="toc-backref" href="#id363" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">conditional</span></code></a><a class="headerlink" href="#tool-tests-test-conditional" title="Link to this heading">¶</a></h2>
<p>Specify test parameters below a named of a <code class="docutils literal notranslate"><span class="pre">conditional</span></code> block matching
one in <code class="docutils literal notranslate"><span class="pre">inputs</span></code> with this element.</p>
<p><code class="docutils literal notranslate"><span class="pre">param</span></code> elements in a <code class="docutils literal notranslate"><span class="pre">test</span></code> block can be arranged into nested <code class="docutils literal notranslate"><span class="pre">repeat</span></code>,
<code class="docutils literal notranslate"><span class="pre">conditional</span></code>, and <code class="docutils literal notranslate"><span class="pre">select</span></code> structures to match the inputs. While this might
be overkill for simple tests, it helps prevent ambiguous definitions and keeps
things organized in large test cases. A future <code class="docutils literal notranslate"><span class="pre">profile</span></code> version of Galaxy
tools may require <code class="docutils literal notranslate"><span class="pre">conditional</span></code> blocks be explicitly defined with this
directive.</p>
<section id="id106">
<h3>Examples<a class="headerlink" href="#id106" title="Link to this heading">¶</a></h3>
<p>The following example demonstrates disambiguation of a parameter (named <code class="docutils literal notranslate"><span class="pre">use</span></code>)
which appears in multiple <code class="docutils literal notranslate"><span class="pre">param</span></code> names in <code class="docutils literal notranslate"><span class="pre">conditional</span></code>s in the <code class="docutils literal notranslate"><span class="pre">inputs</span></code>
definition of the <a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/disambiguate_cond.xml">disambiguate_cond.xml</a>
tool.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Can use nested conditional blocks as shown below to disambiguate</span>
<span class="cm">     various nested parameters. --&gt;</span>
<span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;p1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;False&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;p2&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;True&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;p3&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;False&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;files&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;attach_files&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;True&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;p4&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;True&quot;</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;file&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line_alternative.txt&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;7 4 7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;This is a different line of text.&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://github.com/galaxyproject/tools-devteam/blob/main/tools/tophat2/tophat2_wrapper.xml">tophat2</a>
tool demonstrates a real tool that benefits from more structured test cases
using the <code class="docutils literal notranslate"><span class="pre">conditional</span></code> test directive. One such test case from that tool is
shown below.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- Test base-space paired-end reads with user-supplied reference fasta and full parameters --&gt;</span>
<span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- TopHat commands:</span>
<span class="cm">    tophat2 -o tmp_dir -r 20 -p 1 -a 8 -m 0 -i 70 -I 500000 -g 40 +coverage-search +min-coverage-intron 50 +max-coverage-intro 20000 +segment-mismatches 2 +segment-length 25 +microexon-search +report_discordant_pairs tophat_in1 test-data/tophat_in2.fastqsanger test-data/tophat_in3.fastqsanger</span>
<span class="cm">    Replace the + with double-dash</span>
<span class="cm">    Rename the files in tmp_dir appropriately</span>
<span class="cm">    --&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;singlePaired&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sPaired&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;paired&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;fastqsanger&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tophat_in2.fastqsanger&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input2&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;fastqsanger&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tophat_in3.fastqsanger&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mate_inner_distance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;report_discordant_pairs&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Yes&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;genomeSource&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;indexed&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;index&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;tophat_test&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;params&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;settingsType&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;full&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;library_type&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;FR Unstranded&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;read_mismatches&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="cm">&lt;!-- Error: the read mismatches (5) and the read gap length (2) should be less than or equal to the read edit dist (2) --&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;read_edit_dist&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bowtie_n&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Yes&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mate_std_dev&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;anchor_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;8&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;splice_mismatches&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;min_intron_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;70&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_intron_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;500000&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_multihits&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;40&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;min_segment_intron&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;max_segment_intron&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;500000&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;seg_mismatches&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;seg_length&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;indel_search&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;allow_indel_search&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;own_junctions&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_junctions&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Yes&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;gene_model_ann&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_annotations&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">        </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;raw_juncs&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_juncs&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">        </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;no_novel_juncs&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;no_novel_juncs&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;coverage_search&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_search&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;microexon_search&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Yes&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bowtie2_settings&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;b2_settings&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;No&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">      </span><span class="cm">&lt;!-- Fusion search params --&gt;</span>
<span class="w">      </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fusion_search&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;do_search&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Yes&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;anchor_len&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;21&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;min_dist&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10000021&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;read_mismatches&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;multireads&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;multipairs&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ignore_chromosomes&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;chrM&quot;</span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;conditional</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;readGroup&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;specReadGroup&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;no&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/conditional&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;junctions&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;tophat2_out4j.bed&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;accepted_hits&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;tophat_out4h.bam&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;sim_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id107">
<h3>Attributes<a class="headerlink" href="#id107" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value must match the name of the associated input <code class="docutils literal notranslate"><span class="pre">conditional</span></code>.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-output">
<h2><a class="toc-backref" href="#id364" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code></a><a class="headerlink" href="#tool-tests-test-output" title="Link to this heading">¶</a></h2>
<p>This tag set defines the variable that names the output dataset for the
functional test framework. The functional test framework will execute the tool
using the parameters defined in the <code class="docutils literal notranslate"><span class="pre">&lt;param&gt;</span></code> tag sets and generate a
temporary file, which will either be compared with the file named in the
<code class="docutils literal notranslate"><span class="pre">file</span></code> attribute value or checked against assertions made by a child
<code class="docutils literal notranslate"><span class="pre">assert_contents</span></code> tag to verify that the tool is functionally correct.</p>
<p>Different methods can be chosen for the comparison with the local file specified
by <code class="docutils literal notranslate"><span class="pre">file</span></code> using the <code class="docutils literal notranslate"><span class="pre">compare</span></code> attribute:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">diff</span></code>: uses diff to compare the history data set and the file provided by
<code class="docutils literal notranslate"><span class="pre">file</span></code>. Compressed files are decompressed before the compariopm if
<code class="docutils literal notranslate"><span class="pre">decompress</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. BAM files are converted to SAM before the
comparision and for pdf some special rules are implemented. The number of
allowed differences can be set with <code class="docutils literal notranslate"><span class="pre">lines_diff</span></code>.  If <code class="docutils literal notranslate"><span class="pre">sort=&quot;true&quot;</span></code> history
and local data is sorted before the comparison.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">re_match</span></code>: each line of the history data set is compared to the regular
expression specified in the corresponding line of the <code class="docutils literal notranslate"><span class="pre">file</span></code>. The allowed
number of non matching lines can be set with <code class="docutils literal notranslate"><span class="pre">lines_diff</span></code> and the history
dataset is sorted if <code class="docutils literal notranslate"><span class="pre">sort</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">re_match_multiline</span></code>: it is checked if the history data sets matches the
multi line regular expression given in <code class="docutils literal notranslate"><span class="pre">file</span></code>. The history dataset is sorted
before the comparison if the <code class="docutils literal notranslate"><span class="pre">sort</span></code> atrribute is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contains</span></code>: check if each line in <code class="docutils literal notranslate"><span class="pre">file</span></code> is contained in the history data set.
The allowed number of lines that are not contained in the history dataset
can be set with <code class="docutils literal notranslate"><span class="pre">lines_diff</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sim_size</span></code>: compares the size of the history dataset and the <code class="docutils literal notranslate"><span class="pre">file</span></code> subject to
the values of the <code class="docutils literal notranslate"><span class="pre">delta</span></code> and <code class="docutils literal notranslate"><span class="pre">delta_frac</span></code> attributes. Note that a <code class="docutils literal notranslate"><span class="pre">has_size</span></code>
content assertion should be preferred, because this avoids storing the test file.</p></li>
</ul>
<section id="id108">
<h3>Attributes<a class="headerlink" href="#id108" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value is the same as the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">&lt;data&gt;</span></code> tag set contained within the tool’s <code class="docutils literal notranslate"><span class="pre">&lt;outputs&gt;</span></code> tag set.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><p>If specified, this value is the name of the output file stored in the target <code class="docutils literal notranslate"><span class="pre">test-data</span></code> directory which will be used to compare the results of executing the tool via the functional test framework.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value_json</span></code></p></td>
<td><p>If specified, this value will be loaded as JSON and compared against the output generated as JSON. This can be useful for testing tool outputs that are not files.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ftype</span></code></p></td>
<td><p>If specified, this value will be checked against the corresponding output’s data type. If these do not match, the test will fail.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sort</span></code></p></td>
<td><p>Applies only if <code class="docutils literal notranslate"><span class="pre">compare</span></code> is <code class="docutils literal notranslate"><span class="pre">diff</span></code>, <code class="docutils literal notranslate"><span class="pre">re_match</span></code> or <code class="docutils literal notranslate"><span class="pre">re_match_multiline</span></code>. This flag causes the lines of the history data set to be sorted before the comparison. In case of <code class="docutils literal notranslate"><span class="pre">diff</span></code> and <code class="docutils literal notranslate"><span class="pre">re_match</span></code> also the local file is sorted. This could be useful for non-deterministic output.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>An alias for <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">md5</span></code></p></td>
<td><p>If specified, the target output’s MD5 hash should match the value specified here. For large static files it may be inconvenient to upload the entiry file and this can be used instead.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">checksum</span></code></p></td>
<td><p>If specified, the target output’s checksum should match the value specified here. This value should have the form <code class="docutils literal notranslate"><span class="pre">hash_type$hash_value</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">sha1$8156d7ca0f46ed7abac98f82e36cfaddb2aca041</span></code>). For large static files it may be inconvenient to upload the entiry file and this can be used instead.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compare</span></code></p></td>
<td><p>Type of comparison to use when comparing test generated output files to expected output files. Currently valid value are <code class="docutils literal notranslate"><span class="pre">diff</span></code> (the default), <code class="docutils literal notranslate"><span class="pre">re_match</span></code>, <code class="docutils literal notranslate"><span class="pre">re_match_multiline</span></code>, and <code class="docutils literal notranslate"><span class="pre">contains</span></code>. In addition there is <code class="docutils literal notranslate"><span class="pre">sim_size</span></code> which is discouraged in favour of a <code class="docutils literal notranslate"><span class="pre">has_size</span></code> assertion.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lines_diff</span></code></p></td>
<td><p>Applies only if <code class="docutils literal notranslate"><span class="pre">compare</span></code> is set to <code class="docutils literal notranslate"><span class="pre">diff</span></code>, <code class="docutils literal notranslate"><span class="pre">re_match</span></code>, and <code class="docutils literal notranslate"><span class="pre">contains</span></code>. If <code class="docutils literal notranslate"><span class="pre">compare</span></code> is set to <code class="docutils literal notranslate"><span class="pre">diff</span></code>, the number of lines of difference to allow (each line with a modification is a line added and a line removed so this counts as two lines).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">decompress</span></code></p></td>
<td><p>If this attribute is true then try to decompress files if needed. This applies to test assertions expressed with <code class="docutils literal notranslate"><span class="pre">assert_contents</span></code> or <code class="docutils literal notranslate"><span class="pre">compare</span></code> set to anything but <code class="docutils literal notranslate"><span class="pre">sim_size</span></code>.  This flag is useful for testing compressed outputs that are non-deterministic despite having deterministic decompressed contents. By default, only files compressed with bz2, gzip and zip will be automatically decompressed. Note, for specifying assertions for compressed as well as decompressed output the corresponding output tag can be specified multiple times. This is available in Galaxy since release 17.05 and was introduced in <a class="reference external" href="https://github.com/galaxyproject/galaxy/pull/3550">pull request #3550</a>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">compare</span></code> is set to <code class="docutils literal notranslate"><span class="pre">sim_size</span></code>, this is the maximum allowed absolute size difference (in bytes) between the data set that is generated in the test and the file in <code class="docutils literal notranslate"><span class="pre">test-data/</span></code> that is referenced by the <code class="docutils literal notranslate"><span class="pre">file</span></code> attribute. Default value is 10000 bytes. Can be combined with <code class="docutils literal notranslate"><span class="pre">delta_frac</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta_frac</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">compare</span></code> is set to <code class="docutils literal notranslate"><span class="pre">sim_size</span></code>, this is the maximum allowed relative size difference between the data set that is generated in the test and the file in <code class="docutils literal notranslate"><span class="pre">test-data/</span></code> that is referenced by the <code class="docutils literal notranslate"><span class="pre">file</span></code> attribute. A value of 0.1 means that the file that is generated in the test can differ by at most 10% of the file in <code class="docutils literal notranslate"><span class="pre">test-data</span></code>. The default is not to check for  relative size difference. Can be combined with <code class="docutils literal notranslate"><span class="pre">delta</span></code>.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">count</span></code></p></td>
<td><p>Number or datasets for this output. Should be used for outputs with <code class="docutils literal notranslate"><span class="pre">discover_datasets</span></code></p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p></td>
<td><p>URL that points to a remote output file that will downloaded and used for output comparison. Please use this option only when is not possible to include the files in the <code class="docutils literal notranslate"><span class="pre">test-data</span></code> folder, since this is more error prone due to external factors like remote availability. You can use it in two ways: - In combination with <code class="docutils literal notranslate"><span class="pre">file</span></code> it will look for the output file in the <code class="docutils literal notranslate"><span class="pre">test-data</span></code> folder, if it’s not available on disk it will download the file pointed by <code class="docutils literal notranslate"><span class="pre">location</span></code> using the same name as in <code class="docutils literal notranslate"><span class="pre">file</span></code> (or <code class="docutils literal notranslate"><span class="pre">value</span></code>). - Specifiying the <code class="docutils literal notranslate"><span class="pre">location</span></code> without a <code class="docutils literal notranslate"><span class="pre">file</span></code> (or <code class="docutils literal notranslate"><span class="pre">value</span></code>), it will download the file and use it as an alias of <code class="docutils literal notranslate"><span class="pre">file</span></code>. The name of the file will be infered from the last component of the location URL. For example, <code class="docutils literal notranslate"><span class="pre">location=&quot;https://my_url/my_file.txt&quot;</span></code> will be equivalent to <code class="docutils literal notranslate"><span class="pre">file=&quot;my_file.txt&quot;</span></code>. If you specify a <code class="docutils literal notranslate"><span class="pre">checksum</span></code>, it will be also used to check the integrity of the download.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-output-discovered-dataset">
<h2><a class="toc-backref" href="#id365" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">discovered_dataset</span></code></a><a class="headerlink" href="#tool-tests-test-output-discovered-dataset" title="Link to this heading">¶</a></h2>
<p>This directive specifies a test for an output’s discovered dataset. It acts as an
<code class="docutils literal notranslate"><span class="pre">output</span></code> test tag in many ways and can define any tests of that tag (e.g.
<code class="docutils literal notranslate"><span class="pre">assert_contents</span></code>, <code class="docutils literal notranslate"><span class="pre">value</span></code>, <code class="docutils literal notranslate"><span class="pre">compare</span></code>, <code class="docutils literal notranslate"><span class="pre">md5</span></code>, <code class="docutils literal notranslate"><span class="pre">checksum</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata</span></code>, etc…).</p>
<section id="id109">
<h3>Example<a class="headerlink" href="#id109" title="Link to this heading">¶</a></h3>
<p>The functional test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/multi_output_assign_primary.xml">multi_output_assign_primary.xml</a>
provides a demonstration of using this tag.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;outputs&gt;</span>
<span class="w">    </span><span class="nt">&lt;data</span><span class="w"> </span><span class="na">format=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sample&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;discover_datasets</span><span class="w"> </span><span class="na">pattern=</span><span class="s">&quot;(?P&amp;lt;designation&amp;gt;.+)\.report\.tsv&quot;</span><span class="w"> </span><span class="na">ext=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="na">visible=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">assign_primary_output=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/data&gt;</span>
<span class="nt">&lt;/outputs&gt;</span>
<span class="nt">&lt;test&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;num_param&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;txt&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sample&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- no sample1 it was consumed by named output &quot;sample&quot; --&gt;</span>
<span class="w">    </span><span class="nt">&lt;discovered_dataset</span><span class="w"> </span><span class="na">designation=</span><span class="s">&quot;sample2&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;assert_contents&gt;&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;2&quot;</span><span class="w"> </span><span class="nt">/&gt;&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/discovered_dataset&gt;</span>
<span class="w">    </span><span class="nt">&lt;discovered_dataset</span><span class="w"> </span><span class="na">designation=</span><span class="s">&quot;sample3&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;assert_contents&gt;&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;&lt;/assert_contents&gt;</span>
<span class="w">    </span><span class="nt">&lt;/discovered_dataset&gt;</span>
<span class="w">  </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>Note that this tool uses <code class="docutils literal notranslate"><span class="pre">assign_primary_output=&quot;true&quot;</span></code> for <code class="docutils literal notranslate"><span class="pre">&lt;discover_datasets&gt;</span></code>. Hence, the content of the first discovered dataset (which is the first in the alphabetically sorted list of discovered designations) is checked directly in the <code class="docutils literal notranslate"><span class="pre">&lt;output&gt;</span></code> tag of the test.</p>
</section>
<section id="id110">
<h3>Attributes<a class="headerlink" href="#id110" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">designation</span></code></p></td>
<td><p>The designation of the discovered dataset.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-output-metadata">
<h2><a class="toc-backref" href="#id366" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">metadata</span></code></a><a class="headerlink" href="#tool-tests-test-output-metadata" title="Link to this heading">¶</a></h2>
<p>This directive specifies a test for an output’s metadata as an expected key-value pair.</p>
<section id="id111">
<h3>Example<a class="headerlink" href="#id111" title="Link to this heading">¶</a></h3>
<p>The functional test tool
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/tool_provided_metadata_1.xml">tool_provided_metadata_1.xml</a>
provides a demonstration of using this tag.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input1&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;simple_line.txt&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;txt&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;metadata</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;my dynamic name&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;metadata</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;info&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;my dynamic info&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;metadata</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;dbkey&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cust1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/output&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id112">
<h3>Attributes<a class="headerlink" href="#id112" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>Name of the metadata element to check.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Expected value (as a string) of metadata value.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-output-assert-contents">
<h2><a class="toc-backref" href="#id367" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_contents</span></code></a><a class="headerlink" href="#tool-tests-test-output-assert-contents" title="Link to this heading">¶</a></h2>
<p>This tag set defines a sequence of checks or assertions to run against the
target output. This tag requires no attributes, but child tags should be used to
define the assertions to make about the output. The functional test framework
makes it easy to extend Galaxy with such tags, the following table summarizes
many of the default assertion tags that come with Galaxy and examples of each
can be found below.</p>
<p>The implementation of these tags are simply Python functions defined in the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/lib/galaxy/tool_util/verify/asserts">/lib/galaxy/tool_util/verify/asserts</a>
module.</p>
<section id="general-assertions">
<h3>General assertions<a class="headerlink" href="#general-assertions" title="Link to this heading">¶</a></h3>
<section id="has-size">
<h4><code class="docutils literal notranslate"><span class="pre">has_size</span></code>:<a class="headerlink" href="#has-size" title="Link to this heading">¶</a></h4>
<p>Asserts the output has a specific size (in bytes) of <code class="docutils literal notranslate"><span class="pre">value</span></code> plus minus
<code class="docutils literal notranslate"><span class="pre">delta</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_size</span> <span class="pre">value=&quot;10000&quot;</span> <span class="pre">delta=&quot;100&quot;</span> <span class="pre">/&gt;</span></code>.
Alternatively the range of the expected size can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id113">
<h5>Attributes<a class="headerlink" href="#id113" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Desired size of the output (in bytes), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Maximum allowed size difference (default is 0). The observed size has to be in the range <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">+-</span> <span class="pre">delta</span></code>. Can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-text-data">
<h3>Assertions for text data<a class="headerlink" href="#assertions-for-text-data" title="Link to this heading">¶</a></h3>
<section id="has-text">
<h4><code class="docutils literal notranslate"><span class="pre">has_text</span></code>:<a class="headerlink" href="#has-text" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text</span> <span class="pre">text=&quot;chr7&quot;&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">text</span></code> is expected to occur a particular number of
times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>. Optionally also with a certain
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id114">
<h5>Attributes<a class="headerlink" href="#id114" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="not-has-text">
<h4><code class="docutils literal notranslate"><span class="pre">not_has_text</span></code>:<a class="headerlink" href="#not-has-text" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> does not appear in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;not_has_text</span> <span class="pre">text=&quot;chr8&quot;</span> <span class="pre">/&gt;</span></code>).</p>
<section id="id115">
<h5>Attributes<a class="headerlink" href="#id115" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-text-matching">
<h4><code class="docutils literal notranslate"><span class="pre">has_text_matching</span></code>:<a class="headerlink" href="#has-text-matching" title="Link to this heading">¶</a></h4>
<p>Asserts text matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>) appears
in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text_matching</span> <span class="pre">expression=&quot;1274\d+53&quot;</span> <span class="pre">/&gt;</span></code> ). If the
regular expression is expected to match a particular number of times, this value
can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Note only non-overlapping occurences are counted.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id116">
<h5>Attributes<a class="headerlink" href="#id116" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-line">
<h4><code class="docutils literal notranslate"><span class="pre">has_line</span></code>:<a class="headerlink" href="#has-line" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified string (<code class="docutils literal notranslate"><span class="pre">line</span></code>) appears in the output
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line</span> <span class="pre">line=&quot;A</span> <span class="pre">full</span> <span class="pre">example</span> <span class="pre">line.&quot;</span> <span class="pre">/&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">line</span></code> is expected
to occur a particular number of times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id117">
<h5>Attributes<a class="headerlink" href="#id117" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">line</span></code></p></td>
<td><p>The line to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-line-matching">
<h4><code class="docutils literal notranslate"><span class="pre">has_line_matching</span></code>:<a class="headerlink" href="#has-line-matching" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>)
appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line_matching</span> <span class="pre">expression=&quot;.*\s+127489808\s+127494553&quot;</span> <span class="pre">/&gt;</span></code>).
If a particular number of matching lines is expected, this value can be
specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Optionally also with <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range
of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id118">
<h5>Attributes<a class="headerlink" href="#id118" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-n-lines">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_lines</span></code>:<a class="headerlink" href="#has-n-lines" title="Link to this heading">¶</a></h4>
<p>Asserts that an output contains <code class="docutils literal notranslate"><span class="pre">n</span></code> lines, allowing for a difference of
<code class="docutils literal notranslate"><span class="pre">delta</span></code> (default is 0), e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_lines</span> <span class="pre">n=&quot;3&quot;</span> <span class="pre">delta=&quot;1&quot;/&gt;</span></code>.
Alternatively the range of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id119">
<h5>Attributes<a class="headerlink" href="#id119" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-tabular-data">
<h3>Assertions for tabular data<a class="headerlink" href="#assertions-for-tabular-data" title="Link to this heading">¶</a></h3>
<section id="has-n-columns">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_columns</span></code>:<a class="headerlink" href="#has-n-columns" title="Link to this heading">¶</a></h4>
<p>Asserts tabular output (actually only the first line) contains the specified
number (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of columns (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_columns</span> <span class="pre">n=&quot;3&quot;/&gt;</span></code>) optionally also with
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.  Optionally a column separator (<code class="docutils literal notranslate"><span class="pre">sep</span></code>, default is
<code class="docutils literal notranslate"><span class="pre">\t</span></code>) `and comment character(s) can be specified (<code class="docutils literal notranslate"><span class="pre">comment</span></code>, default is
empty string), then the first non-comment line is used for determining the
number of columns.</p>
<section id="id120">
<h5>Attributes<a class="headerlink" href="#id120" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sep</span></code></p></td>
<td><p>Separator defining columns, default: tab</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Comment character(s) used to skip comment lines (which should not be used for counting columns)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-archives-zip-tar">
<h3>Assertions for archives (zip/tar)<a class="headerlink" href="#assertions-for-archives-zip-tar" title="Link to this heading">¶</a></h3>
<section id="has-archive-member">
<h4><code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code>:<a class="headerlink" href="#has-archive-member" title="Link to this heading">¶</a></h4>
<p>This tag allows to check if <code class="docutils literal notranslate"><span class="pre">path</span></code> is contained in a compressed file. The path
is a regular expression that is matched against the full paths of the objects in
the compressed file (remember that “matching” means it is checked if a prefix of
the full path of an archive member is described by the regular expression).
Valid archive formats include <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, and <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>. Note that
depending on the archive creation method:</p>
<ul class="simple">
<li><p>full paths of the members may be prefixed with <code class="docutils literal notranslate"><span class="pre">./</span></code></p></li>
<li><p>directories may be treated as empty files</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./path/to/my-file.txt&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> (or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>) assertions on the number of
archive members matching <code class="docutils literal notranslate"><span class="pre">path</span></code> can be expressed. The following could be used,
e.g., to assert an archive containing n±1 elements out of which at least
4 need to have a <code class="docutils literal notranslate"><span class="pre">txt</span></code> extension.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*\.txt&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In addition the tag can contain additional assertions as child elements about
the first member in the archive matching the regular expression <code class="docutils literal notranslate"><span class="pre">path</span></code>. For
instance</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*/my-file.txt&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/has_archive_member&gt;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">all</span></code> attribute is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then all archive members are subject
to the assertions. Note that, archive members matching the <code class="docutils literal notranslate"><span class="pre">path</span></code> are sorted
alphabetically.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code> assertion only affects
the asserts on the presence and number of matching archive members, but not any
sub-assertions (which can offer the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute on their own).  The
check if the file is an archive at all, which is also done by the function, is
not affected.</p>
<section id="id121">
<h5>Attributes<a class="headerlink" href="#id121" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>The regular expression specifying the archive member.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-xml-data">
<h3>Assertions for XML data<a class="headerlink" href="#assertions-for-xml-data" title="Link to this heading">¶</a></h3>
<section id="is-valid-xml">
<h4><code class="docutils literal notranslate"><span class="pre">is_valid_xml</span></code>:<a class="headerlink" href="#is-valid-xml" title="Link to this heading">¶</a></h4>
<p>Asserts the output is a valid XML file (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;is_valid_xml</span> <span class="pre">/&gt;</span></code>).</p>
</section>
<section id="xml-element">
<h4><code class="docutils literal notranslate"><span class="pre">xml_element</span></code>:<a class="headerlink" href="#xml-element" title="Link to this heading">¶</a></h4>
<p>Assert if the XML file contains element(s) or tag(s) with the specified
<a class="reference external" href="https://lxml.de/xpathxslt.html">XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code></a>.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> are given also the number of occurences is checked.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.//more&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code> the outcome of the assertions wrt the precence and number
of <code class="docutils literal notranslate"><span class="pre">path</span></code> can be negated. If there are any sub assertions then check them against</p>
<ul class="simple">
<li><p>the content of the attribute <code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></li>
<li><p>the element’s text if no attribute is given</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;foo$&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/xml_element&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>Sub-assertions are not subject to the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">xml_element</span></code>.
If <code class="docutils literal notranslate"><span class="pre">all</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then the sub assertions are checked for all occurences.</p>
<p>Note that all other XML assertions can be expressed by this assertion (Galaxy
also implements the other assertions by calling this one).</p>
<section id="id122">
<h5>Attributes<a class="headerlink" href="#id122" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></td>
<td><p>The name of the attribute to apply sub-assertion on. If not given then the element text is used</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-element-with-path">
<h4><code class="docutils literal notranslate"><span class="pre">has_element_with_path</span></code>:<a class="headerlink" href="#has-element-with-path" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains at least one element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_element_with_path</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_param/Parameters/Parameters_matrix&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id123">
<h5>Attributes<a class="headerlink" href="#id123" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-n-elements-with-path">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_elements_with_path</span></code>:<a class="headerlink" href="#has-n-elements-with-path" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains the specified number (<code class="docutils literal notranslate"><span class="pre">n</span></code>, optionally with <code class="docutils literal notranslate"><span class="pre">delta</span></code>) of elements (or
tags) with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_n_elements_with_path</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_num&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively to <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> also the <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> attributes
can be used to specify the range of the expected number of occurences.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id124">
<h5>Attributes<a class="headerlink" href="#id124" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="element-text-matches">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_matches</span></code>:<a class="headerlink" href="#element-text-matches" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>
matches the regular expression defined by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_version&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;BLASTP\s+2\.2.*&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id125">
<h5>Attributes<a class="headerlink" href="#id125" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="element-text-is">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_is</span></code>:<a class="headerlink" href="#element-text-is" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is
the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_program&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;blastp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id126">
<h5>Attributes<a class="headerlink" href="#id126" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="attribute-matches">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_matches</span></code>:<a class="headerlink" href="#attribute-matches" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> matches the regular expression specified by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement2&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo2&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;bar\d+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id127">
<h5>Attributes<a class="headerlink" href="#id127" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="attribute-is">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_is</span></code>:<a class="headerlink" href="#attribute-is" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement1&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id128">
<h5>Attributes<a class="headerlink" href="#id128" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="element-text">
<h4><code class="docutils literal notranslate"><span class="pre">element_text</span></code>:<a class="headerlink" href="#element-text" title="Link to this heading">¶</a></h4>
<p>This tag allows the developer to recurisively specify additional assertions as
child elements about just the text contained in the element specified by the
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_def&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element_text&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the implicit assertions can be inverted.
The sub-assertions, which have their own <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute, are not affected
by <code class="docutils literal notranslate"><span class="pre">negate</span></code>.</p>
<section id="id129">
<h5>Attributes<a class="headerlink" href="#id129" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-json-data">
<h3>Assertions for JSON data<a class="headerlink" href="#assertions-for-json-data" title="Link to this heading">¶</a></h3>
<section id="has-json-property-with-value">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_value</span></code>:<a class="headerlink" href="#has-json-property-with-value" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified JSON value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_value</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;skipped_columns&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;[1, 3, 5]&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id130">
<h5>Attributes<a class="headerlink" href="#id130" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>JSON-ified value to search for. This will be converted from an XML string to JSON with Python’s json.loads function.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-json-property-with-text">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_text</span></code>:<a class="headerlink" href="#has-json-property-with-text" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified text (i.e. string) value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_text</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;red&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id131">
<h5>Attributes<a class="headerlink" href="#id131" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text value to search for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="assertions-for-h5-data">
<h3>Assertions for H5 data<a class="headerlink" href="#assertions-for-h5-data" title="Link to this heading">¶</a></h3>
<section id="has-h5-keys">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_keys</span></code>:<a class="headerlink" href="#has-h5-keys" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output has a set of attributes (<code class="docutils literal notranslate"><span class="pre">keys</span></code>), specified as a
comma-separated list, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_keys</span><span class="w"> </span><span class="na">keys=</span><span class="s">&quot;bins,chroms,indexes,pixels,chroms/lengths&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id132">
<h5>Attributes<a class="headerlink" href="#id132" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><p>Comma-separated list of HDF5 attributes to check for.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="has-h5-attribute">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_attribute</span></code>:<a class="headerlink" href="#has-h5-attribute" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output contains the specified <code class="docutils literal notranslate"><span class="pre">value</span></code> for an attribute (<code class="docutils literal notranslate"><span class="pre">key</span></code>), e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_attribute</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;nchroms&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id133">
<h5>Attributes<a class="headerlink" href="#id133" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>HDF5 attribute to check value of.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Expected value of HDF5 attribute to check.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id134">
<h3>Examples<a class="headerlink" href="#id134" title="Link to this heading">¶</a></h3>
<p>The following demonstrates a wide variety of text-based and tabular
assertion statements.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;chr7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;chr8&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;1274\d+53&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_line_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;.*\s+127489808\s+127494553&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- &amp;#009; is XML escape code for tab --&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_line</span><span class="w"> </span><span class="na">line=</span><span class="s">&quot;chr7&amp;#009;127471195&amp;#009;127489808&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_n_columns</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="nt">&lt;/output&gt;</span>
</pre></div>
</div>
<p>The following demonstrates a wide variety of XML assertion statements.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">        </span><span class="nt">&lt;is_valid_xml</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_element_with_path</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_param/Parameters/Parameters_matrix&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;has_n_elements_with_path</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_num&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;element_text_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_version&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;BLASTP\s+2\.2.*&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;element_text_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_program&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;blastp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;element_text</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_def&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;ABK[\d\.]+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/element_text&gt;</span>
<span class="w">    </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="nt">&lt;/output&gt;</span>
</pre></div>
</div>
<p>The following demonstrates verifying XML content with XPath-like expressions.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;out_file1&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">        </span><span class="nt">&lt;attribute_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement1&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;attribute_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement2&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo2&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;bar\d+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="nt">&lt;/output&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="tool-tests-test-output-collection">
<h2><a class="toc-backref" href="#id368" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">output_collection</span></code></a><a class="headerlink" href="#tool-tests-test-output-collection" title="Link to this heading">¶</a></h2>
<p>Define tests for extra datasets and metadata corresponding to an output collection.</p>
<p><code class="docutils literal notranslate"><span class="pre">output_collection</span></code> directives should specify a <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">type</span></code>
attribute to describe the expected output collection as a whole.</p>
<p>Expectations about collection contents are described using child <code class="docutils literal notranslate"><span class="pre">element</span></code>
directives. For nested collections, these child <code class="docutils literal notranslate"><span class="pre">element</span></code> directives may
themselves contain children.</p>
<p>For tools marked as having profile 20.09 or newer, the order of elements within
an <code class="docutils literal notranslate"><span class="pre">output_collection</span></code> declaration are meaningful. The test definition may
omit any number of elements from a collection, but the ones that are specified
will be checked against the actual resulting collection from the tool run and the
order within the collection verified.</p>
<section id="id135">
<h3>Examples<a class="headerlink" href="#id135" title="Link to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/genetrack/genetrack.xml">genetrack</a>
tool demonstrates basic usage of an <code class="docutils literal notranslate"><span class="pre">output_collection</span></code> test expectation.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;genetrack_input2.gff&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input_format&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;sigma&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;exclusion&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;up_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;down_width&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;filter&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output_collection</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;genetrack_output&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;list&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;s5e20u10d10F3_on_data_1&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;genetrack_output2.gff&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output_collection&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>The <a class="reference external" href="https://github.com/galaxyproject/tools-iuc/blob/main/tools/cwpair2/cwpair2.xml">CWPair2</a>
tool demonstrates that <code class="docutils literal notranslate"><span class="pre">element</span></code>s can specify a <code class="docutils literal notranslate"><span class="pre">compare</span></code> attribute just
like <a class="reference internal" href="#tool-tests-test-output">output</a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cwpair2_input1.gff&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;up_distance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;down_distance&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;method&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;all&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;binsize&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;threshold_format&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;relative_threshold&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;relative_threshold&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;0.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output_files&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;matched_pair&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;statistics_output&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;statistics1.tabular&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;tabular&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;output_collection</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;MP&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;list&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;data_MP_closest_f0u25d100_on_data_1.gff&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;closest_mp_output1.gff&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;contains&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;data_MP_largest_f0u25d100_on_data_1.gff&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;largest_mp_output1.gff&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;contains&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;data_MP_mode_f0u25d100_on_data_1.gff&quot;</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;mode_mp_output1.gff&quot;</span><span class="w"> </span><span class="na">ftype=</span><span class="s">&quot;gff&quot;</span><span class="w"> </span><span class="na">compare=</span><span class="s">&quot;contains&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/output_collection&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
<p>The
<a class="reference external" href="https://github.com/galaxyproject/galaxy/blob/dev/test/functional/tools/collection_creates_dynamic_nested.xml">collection_creates_dynamic_nested</a>
test tool demonstrates the use of nested <code class="docutils literal notranslate"><span class="pre">element</span></code> directives as described
above. Notice also that it tests the output with <code class="docutils literal notranslate"><span class="pre">assert_contents</span></code> instead of
supplying a <code class="docutils literal notranslate"><span class="pre">file</span></code> attribute. Like hinted at with with <code class="docutils literal notranslate"><span class="pre">compare</span></code> attribute
above, the <code class="docutils literal notranslate"><span class="pre">element</span></code> tag can specify any of the test attributes that apply to
the <a class="reference internal" href="#tool-tests-test-output">output</a> (e.g. <code class="docutils literal notranslate"><span class="pre">md5</span></code>, <code class="docutils literal notranslate"><span class="pre">compare</span></code>, <code class="docutils literal notranslate"><span class="pre">diff</span></code>,
etc…).</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;test&gt;</span>
<span class="w">  </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;output_collection</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;list_output&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;list:list&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;oe1&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^A\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie2&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^B\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">    </span><span class="nt">&lt;/element&gt;</span>
<span class="w">    </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;oe2&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^C\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie2&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^D\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">    </span><span class="nt">&lt;/element&gt;</span>
<span class="w">    </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;oe3&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie1&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^E\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">      </span><span class="nt">&lt;element</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ie2&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">          </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;^F\n$&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/assert_contents&gt;</span>
<span class="w">      </span><span class="nt">&lt;/element&gt;</span>
<span class="w">    </span><span class="nt">&lt;/element&gt;</span>
<span class="w">  </span><span class="nt">&lt;/output_collection&gt;</span>
<span class="nt">&lt;/test&gt;</span>
</pre></div>
</div>
</section>
<section id="id136">
<h3>Attributes<a class="headerlink" href="#id136" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p>This value is the same as the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">&lt;collection&gt;</span></code> tag set contained within the tool’s <code class="docutils literal notranslate"><span class="pre">&lt;outputs&gt;</span></code> tag set.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Expected collection type (<code class="docutils literal notranslate"><span class="pre">list</span></code> or <code class="docutils literal notranslate"><span class="pre">paired</span></code>), nested collections are specified as colon separated list (the most common types are <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">paired</span></code>, <code class="docutils literal notranslate"><span class="pre">list:paired</span></code>, or <code class="docutils literal notranslate"><span class="pre">list:list</span></code>).</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">count</span></code></p></td>
<td><p>Number of elements in output collection.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tool-tests-test-assert-command">
<h2><a class="toc-backref" href="#id369" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_command</span></code></a><a class="headerlink" href="#tool-tests-test-assert-command" title="Link to this heading">¶</a></h2>
<p>Describe assertions about the job’s
generated command-line.</p>
<p>This tag set defines a sequence of checks or assertions to run against the
target output. This tag requires no attributes, but child tags should be used to
define the assertions to make about the output. The functional test framework
makes it easy to extend Galaxy with such tags, the following table summarizes
many of the default assertion tags that come with Galaxy and examples of each
can be found below.</p>
<p>The implementation of these tags are simply Python functions defined in the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/lib/galaxy/tool_util/verify/asserts">/lib/galaxy/tool_util/verify/asserts</a>
module.</p>
<section id="id137">
<h3>General assertions<a class="headerlink" href="#id137" title="Link to this heading">¶</a></h3>
<section id="id138">
<h4><code class="docutils literal notranslate"><span class="pre">has_size</span></code>:<a class="headerlink" href="#id138" title="Link to this heading">¶</a></h4>
<p>Asserts the output has a specific size (in bytes) of <code class="docutils literal notranslate"><span class="pre">value</span></code> plus minus
<code class="docutils literal notranslate"><span class="pre">delta</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_size</span> <span class="pre">value=&quot;10000&quot;</span> <span class="pre">delta=&quot;100&quot;</span> <span class="pre">/&gt;</span></code>.
Alternatively the range of the expected size can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id139">
<h5>Attributes<a class="headerlink" href="#id139" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Desired size of the output (in bytes), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Maximum allowed size difference (default is 0). The observed size has to be in the range <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">+-</span> <span class="pre">delta</span></code>. Can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id140">
<h3>Assertions for text data<a class="headerlink" href="#id140" title="Link to this heading">¶</a></h3>
<section id="id141">
<h4><code class="docutils literal notranslate"><span class="pre">has_text</span></code>:<a class="headerlink" href="#id141" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text</span> <span class="pre">text=&quot;chr7&quot;&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">text</span></code> is expected to occur a particular number of
times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>. Optionally also with a certain
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id142">
<h5>Attributes<a class="headerlink" href="#id142" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id143">
<h4><code class="docutils literal notranslate"><span class="pre">not_has_text</span></code>:<a class="headerlink" href="#id143" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> does not appear in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;not_has_text</span> <span class="pre">text=&quot;chr8&quot;</span> <span class="pre">/&gt;</span></code>).</p>
<section id="id144">
<h5>Attributes<a class="headerlink" href="#id144" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id145">
<h4><code class="docutils literal notranslate"><span class="pre">has_text_matching</span></code>:<a class="headerlink" href="#id145" title="Link to this heading">¶</a></h4>
<p>Asserts text matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>) appears
in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text_matching</span> <span class="pre">expression=&quot;1274\d+53&quot;</span> <span class="pre">/&gt;</span></code> ). If the
regular expression is expected to match a particular number of times, this value
can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Note only non-overlapping occurences are counted.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id146">
<h5>Attributes<a class="headerlink" href="#id146" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id147">
<h4><code class="docutils literal notranslate"><span class="pre">has_line</span></code>:<a class="headerlink" href="#id147" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified string (<code class="docutils literal notranslate"><span class="pre">line</span></code>) appears in the output
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line</span> <span class="pre">line=&quot;A</span> <span class="pre">full</span> <span class="pre">example</span> <span class="pre">line.&quot;</span> <span class="pre">/&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">line</span></code> is expected
to occur a particular number of times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id148">
<h5>Attributes<a class="headerlink" href="#id148" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">line</span></code></p></td>
<td><p>The line to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id149">
<h4><code class="docutils literal notranslate"><span class="pre">has_line_matching</span></code>:<a class="headerlink" href="#id149" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>)
appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line_matching</span> <span class="pre">expression=&quot;.*\s+127489808\s+127494553&quot;</span> <span class="pre">/&gt;</span></code>).
If a particular number of matching lines is expected, this value can be
specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Optionally also with <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range
of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id150">
<h5>Attributes<a class="headerlink" href="#id150" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id151">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_lines</span></code>:<a class="headerlink" href="#id151" title="Link to this heading">¶</a></h4>
<p>Asserts that an output contains <code class="docutils literal notranslate"><span class="pre">n</span></code> lines, allowing for a difference of
<code class="docutils literal notranslate"><span class="pre">delta</span></code> (default is 0), e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_lines</span> <span class="pre">n=&quot;3&quot;</span> <span class="pre">delta=&quot;1&quot;/&gt;</span></code>.
Alternatively the range of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id152">
<h5>Attributes<a class="headerlink" href="#id152" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id153">
<h3>Assertions for tabular data<a class="headerlink" href="#id153" title="Link to this heading">¶</a></h3>
<section id="id154">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_columns</span></code>:<a class="headerlink" href="#id154" title="Link to this heading">¶</a></h4>
<p>Asserts tabular output (actually only the first line) contains the specified
number (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of columns (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_columns</span> <span class="pre">n=&quot;3&quot;/&gt;</span></code>) optionally also with
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.  Optionally a column separator (<code class="docutils literal notranslate"><span class="pre">sep</span></code>, default is
<code class="docutils literal notranslate"><span class="pre">\t</span></code>) `and comment character(s) can be specified (<code class="docutils literal notranslate"><span class="pre">comment</span></code>, default is
empty string), then the first non-comment line is used for determining the
number of columns.</p>
<section id="id155">
<h5>Attributes<a class="headerlink" href="#id155" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sep</span></code></p></td>
<td><p>Separator defining columns, default: tab</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Comment character(s) used to skip comment lines (which should not be used for counting columns)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id156">
<h3>Assertions for archives (zip/tar)<a class="headerlink" href="#id156" title="Link to this heading">¶</a></h3>
<section id="id157">
<h4><code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code>:<a class="headerlink" href="#id157" title="Link to this heading">¶</a></h4>
<p>This tag allows to check if <code class="docutils literal notranslate"><span class="pre">path</span></code> is contained in a compressed file. The path
is a regular expression that is matched against the full paths of the objects in
the compressed file (remember that “matching” means it is checked if a prefix of
the full path of an archive member is described by the regular expression).
Valid archive formats include <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, and <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>. Note that
depending on the archive creation method:</p>
<ul class="simple">
<li><p>full paths of the members may be prefixed with <code class="docutils literal notranslate"><span class="pre">./</span></code></p></li>
<li><p>directories may be treated as empty files</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./path/to/my-file.txt&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> (or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>) assertions on the number of
archive members matching <code class="docutils literal notranslate"><span class="pre">path</span></code> can be expressed. The following could be used,
e.g., to assert an archive containing n±1 elements out of which at least
4 need to have a <code class="docutils literal notranslate"><span class="pre">txt</span></code> extension.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*\.txt&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In addition the tag can contain additional assertions as child elements about
the first member in the archive matching the regular expression <code class="docutils literal notranslate"><span class="pre">path</span></code>. For
instance</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*/my-file.txt&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/has_archive_member&gt;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">all</span></code> attribute is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then all archive members are subject
to the assertions. Note that, archive members matching the <code class="docutils literal notranslate"><span class="pre">path</span></code> are sorted
alphabetically.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code> assertion only affects
the asserts on the presence and number of matching archive members, but not any
sub-assertions (which can offer the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute on their own).  The
check if the file is an archive at all, which is also done by the function, is
not affected.</p>
<section id="id158">
<h5>Attributes<a class="headerlink" href="#id158" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>The regular expression specifying the archive member.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id159">
<h3>Assertions for XML data<a class="headerlink" href="#id159" title="Link to this heading">¶</a></h3>
<section id="id160">
<h4><code class="docutils literal notranslate"><span class="pre">is_valid_xml</span></code>:<a class="headerlink" href="#id160" title="Link to this heading">¶</a></h4>
<p>Asserts the output is a valid XML file (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;is_valid_xml</span> <span class="pre">/&gt;</span></code>).</p>
</section>
<section id="id161">
<h4><code class="docutils literal notranslate"><span class="pre">xml_element</span></code>:<a class="headerlink" href="#id161" title="Link to this heading">¶</a></h4>
<p>Assert if the XML file contains element(s) or tag(s) with the specified
<a class="reference external" href="https://lxml.de/xpathxslt.html">XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code></a>.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> are given also the number of occurences is checked.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.//more&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code> the outcome of the assertions wrt the precence and number
of <code class="docutils literal notranslate"><span class="pre">path</span></code> can be negated. If there are any sub assertions then check them against</p>
<ul class="simple">
<li><p>the content of the attribute <code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></li>
<li><p>the element’s text if no attribute is given</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;foo$&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/xml_element&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>Sub-assertions are not subject to the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">xml_element</span></code>.
If <code class="docutils literal notranslate"><span class="pre">all</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then the sub assertions are checked for all occurences.</p>
<p>Note that all other XML assertions can be expressed by this assertion (Galaxy
also implements the other assertions by calling this one).</p>
<section id="id162">
<h5>Attributes<a class="headerlink" href="#id162" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></td>
<td><p>The name of the attribute to apply sub-assertion on. If not given then the element text is used</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id163">
<h4><code class="docutils literal notranslate"><span class="pre">has_element_with_path</span></code>:<a class="headerlink" href="#id163" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains at least one element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_element_with_path</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_param/Parameters/Parameters_matrix&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id164">
<h5>Attributes<a class="headerlink" href="#id164" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id165">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_elements_with_path</span></code>:<a class="headerlink" href="#id165" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains the specified number (<code class="docutils literal notranslate"><span class="pre">n</span></code>, optionally with <code class="docutils literal notranslate"><span class="pre">delta</span></code>) of elements (or
tags) with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_n_elements_with_path</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_num&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively to <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> also the <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> attributes
can be used to specify the range of the expected number of occurences.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id166">
<h5>Attributes<a class="headerlink" href="#id166" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id167">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_matches</span></code>:<a class="headerlink" href="#id167" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>
matches the regular expression defined by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_version&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;BLASTP\s+2\.2.*&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id168">
<h5>Attributes<a class="headerlink" href="#id168" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id169">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_is</span></code>:<a class="headerlink" href="#id169" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is
the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_program&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;blastp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id170">
<h5>Attributes<a class="headerlink" href="#id170" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id171">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_matches</span></code>:<a class="headerlink" href="#id171" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> matches the regular expression specified by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement2&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo2&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;bar\d+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id172">
<h5>Attributes<a class="headerlink" href="#id172" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id173">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_is</span></code>:<a class="headerlink" href="#id173" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement1&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id174">
<h5>Attributes<a class="headerlink" href="#id174" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id175">
<h4><code class="docutils literal notranslate"><span class="pre">element_text</span></code>:<a class="headerlink" href="#id175" title="Link to this heading">¶</a></h4>
<p>This tag allows the developer to recurisively specify additional assertions as
child elements about just the text contained in the element specified by the
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_def&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element_text&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the implicit assertions can be inverted.
The sub-assertions, which have their own <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute, are not affected
by <code class="docutils literal notranslate"><span class="pre">negate</span></code>.</p>
<section id="id176">
<h5>Attributes<a class="headerlink" href="#id176" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id177">
<h3>Assertions for JSON data<a class="headerlink" href="#id177" title="Link to this heading">¶</a></h3>
<section id="id178">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_value</span></code>:<a class="headerlink" href="#id178" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified JSON value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_value</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;skipped_columns&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;[1, 3, 5]&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id179">
<h5>Attributes<a class="headerlink" href="#id179" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>JSON-ified value to search for. This will be converted from an XML string to JSON with Python’s json.loads function.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id180">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_text</span></code>:<a class="headerlink" href="#id180" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified text (i.e. string) value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_text</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;red&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id181">
<h5>Attributes<a class="headerlink" href="#id181" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text value to search for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id182">
<h3>Assertions for H5 data<a class="headerlink" href="#id182" title="Link to this heading">¶</a></h3>
<section id="id183">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_keys</span></code>:<a class="headerlink" href="#id183" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output has a set of attributes (<code class="docutils literal notranslate"><span class="pre">keys</span></code>), specified as a
comma-separated list, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_keys</span><span class="w"> </span><span class="na">keys=</span><span class="s">&quot;bins,chroms,indexes,pixels,chroms/lengths&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id184">
<h5>Attributes<a class="headerlink" href="#id184" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><p>Comma-separated list of HDF5 attributes to check for.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id185">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_attribute</span></code>:<a class="headerlink" href="#id185" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output contains the specified <code class="docutils literal notranslate"><span class="pre">value</span></code> for an attribute (<code class="docutils literal notranslate"><span class="pre">key</span></code>), e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_attribute</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;nchroms&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id186">
<h5>Attributes<a class="headerlink" href="#id186" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>HDF5 attribute to check value of.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Expected value of HDF5 attribute to check.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="tool-tests-test-assert-stdout">
<h2><a class="toc-backref" href="#id370" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_stdout</span></code></a><a class="headerlink" href="#tool-tests-test-assert-stdout" title="Link to this heading">¶</a></h2>
<p>Describe assertions about the job’s
standard output.</p>
<p>This tag set defines a sequence of checks or assertions to run against the
target output. This tag requires no attributes, but child tags should be used to
define the assertions to make about the output. The functional test framework
makes it easy to extend Galaxy with such tags, the following table summarizes
many of the default assertion tags that come with Galaxy and examples of each
can be found below.</p>
<p>The implementation of these tags are simply Python functions defined in the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/lib/galaxy/tool_util/verify/asserts">/lib/galaxy/tool_util/verify/asserts</a>
module.</p>
<section id="id187">
<h3>General assertions<a class="headerlink" href="#id187" title="Link to this heading">¶</a></h3>
<section id="id188">
<h4><code class="docutils literal notranslate"><span class="pre">has_size</span></code>:<a class="headerlink" href="#id188" title="Link to this heading">¶</a></h4>
<p>Asserts the output has a specific size (in bytes) of <code class="docutils literal notranslate"><span class="pre">value</span></code> plus minus
<code class="docutils literal notranslate"><span class="pre">delta</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_size</span> <span class="pre">value=&quot;10000&quot;</span> <span class="pre">delta=&quot;100&quot;</span> <span class="pre">/&gt;</span></code>.
Alternatively the range of the expected size can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id189">
<h5>Attributes<a class="headerlink" href="#id189" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Desired size of the output (in bytes), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Maximum allowed size difference (default is 0). The observed size has to be in the range <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">+-</span> <span class="pre">delta</span></code>. Can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id190">
<h3>Assertions for text data<a class="headerlink" href="#id190" title="Link to this heading">¶</a></h3>
<section id="id191">
<h4><code class="docutils literal notranslate"><span class="pre">has_text</span></code>:<a class="headerlink" href="#id191" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text</span> <span class="pre">text=&quot;chr7&quot;&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">text</span></code> is expected to occur a particular number of
times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>. Optionally also with a certain
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id192">
<h5>Attributes<a class="headerlink" href="#id192" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id193">
<h4><code class="docutils literal notranslate"><span class="pre">not_has_text</span></code>:<a class="headerlink" href="#id193" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> does not appear in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;not_has_text</span> <span class="pre">text=&quot;chr8&quot;</span> <span class="pre">/&gt;</span></code>).</p>
<section id="id194">
<h5>Attributes<a class="headerlink" href="#id194" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id195">
<h4><code class="docutils literal notranslate"><span class="pre">has_text_matching</span></code>:<a class="headerlink" href="#id195" title="Link to this heading">¶</a></h4>
<p>Asserts text matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>) appears
in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text_matching</span> <span class="pre">expression=&quot;1274\d+53&quot;</span> <span class="pre">/&gt;</span></code> ). If the
regular expression is expected to match a particular number of times, this value
can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Note only non-overlapping occurences are counted.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id196">
<h5>Attributes<a class="headerlink" href="#id196" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id197">
<h4><code class="docutils literal notranslate"><span class="pre">has_line</span></code>:<a class="headerlink" href="#id197" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified string (<code class="docutils literal notranslate"><span class="pre">line</span></code>) appears in the output
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line</span> <span class="pre">line=&quot;A</span> <span class="pre">full</span> <span class="pre">example</span> <span class="pre">line.&quot;</span> <span class="pre">/&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">line</span></code> is expected
to occur a particular number of times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id198">
<h5>Attributes<a class="headerlink" href="#id198" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">line</span></code></p></td>
<td><p>The line to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id199">
<h4><code class="docutils literal notranslate"><span class="pre">has_line_matching</span></code>:<a class="headerlink" href="#id199" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>)
appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line_matching</span> <span class="pre">expression=&quot;.*\s+127489808\s+127494553&quot;</span> <span class="pre">/&gt;</span></code>).
If a particular number of matching lines is expected, this value can be
specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Optionally also with <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range
of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id200">
<h5>Attributes<a class="headerlink" href="#id200" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id201">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_lines</span></code>:<a class="headerlink" href="#id201" title="Link to this heading">¶</a></h4>
<p>Asserts that an output contains <code class="docutils literal notranslate"><span class="pre">n</span></code> lines, allowing for a difference of
<code class="docutils literal notranslate"><span class="pre">delta</span></code> (default is 0), e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_lines</span> <span class="pre">n=&quot;3&quot;</span> <span class="pre">delta=&quot;1&quot;/&gt;</span></code>.
Alternatively the range of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id202">
<h5>Attributes<a class="headerlink" href="#id202" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id203">
<h3>Assertions for tabular data<a class="headerlink" href="#id203" title="Link to this heading">¶</a></h3>
<section id="id204">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_columns</span></code>:<a class="headerlink" href="#id204" title="Link to this heading">¶</a></h4>
<p>Asserts tabular output (actually only the first line) contains the specified
number (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of columns (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_columns</span> <span class="pre">n=&quot;3&quot;/&gt;</span></code>) optionally also with
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.  Optionally a column separator (<code class="docutils literal notranslate"><span class="pre">sep</span></code>, default is
<code class="docutils literal notranslate"><span class="pre">\t</span></code>) `and comment character(s) can be specified (<code class="docutils literal notranslate"><span class="pre">comment</span></code>, default is
empty string), then the first non-comment line is used for determining the
number of columns.</p>
<section id="id205">
<h5>Attributes<a class="headerlink" href="#id205" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sep</span></code></p></td>
<td><p>Separator defining columns, default: tab</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Comment character(s) used to skip comment lines (which should not be used for counting columns)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id206">
<h3>Assertions for archives (zip/tar)<a class="headerlink" href="#id206" title="Link to this heading">¶</a></h3>
<section id="id207">
<h4><code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code>:<a class="headerlink" href="#id207" title="Link to this heading">¶</a></h4>
<p>This tag allows to check if <code class="docutils literal notranslate"><span class="pre">path</span></code> is contained in a compressed file. The path
is a regular expression that is matched against the full paths of the objects in
the compressed file (remember that “matching” means it is checked if a prefix of
the full path of an archive member is described by the regular expression).
Valid archive formats include <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, and <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>. Note that
depending on the archive creation method:</p>
<ul class="simple">
<li><p>full paths of the members may be prefixed with <code class="docutils literal notranslate"><span class="pre">./</span></code></p></li>
<li><p>directories may be treated as empty files</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./path/to/my-file.txt&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> (or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>) assertions on the number of
archive members matching <code class="docutils literal notranslate"><span class="pre">path</span></code> can be expressed. The following could be used,
e.g., to assert an archive containing n±1 elements out of which at least
4 need to have a <code class="docutils literal notranslate"><span class="pre">txt</span></code> extension.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*\.txt&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In addition the tag can contain additional assertions as child elements about
the first member in the archive matching the regular expression <code class="docutils literal notranslate"><span class="pre">path</span></code>. For
instance</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*/my-file.txt&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/has_archive_member&gt;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">all</span></code> attribute is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then all archive members are subject
to the assertions. Note that, archive members matching the <code class="docutils literal notranslate"><span class="pre">path</span></code> are sorted
alphabetically.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code> assertion only affects
the asserts on the presence and number of matching archive members, but not any
sub-assertions (which can offer the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute on their own).  The
check if the file is an archive at all, which is also done by the function, is
not affected.</p>
<section id="id208">
<h5>Attributes<a class="headerlink" href="#id208" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>The regular expression specifying the archive member.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id209">
<h3>Assertions for XML data<a class="headerlink" href="#id209" title="Link to this heading">¶</a></h3>
<section id="id210">
<h4><code class="docutils literal notranslate"><span class="pre">is_valid_xml</span></code>:<a class="headerlink" href="#id210" title="Link to this heading">¶</a></h4>
<p>Asserts the output is a valid XML file (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;is_valid_xml</span> <span class="pre">/&gt;</span></code>).</p>
</section>
<section id="id211">
<h4><code class="docutils literal notranslate"><span class="pre">xml_element</span></code>:<a class="headerlink" href="#id211" title="Link to this heading">¶</a></h4>
<p>Assert if the XML file contains element(s) or tag(s) with the specified
<a class="reference external" href="https://lxml.de/xpathxslt.html">XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code></a>.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> are given also the number of occurences is checked.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.//more&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code> the outcome of the assertions wrt the precence and number
of <code class="docutils literal notranslate"><span class="pre">path</span></code> can be negated. If there are any sub assertions then check them against</p>
<ul class="simple">
<li><p>the content of the attribute <code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></li>
<li><p>the element’s text if no attribute is given</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;foo$&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/xml_element&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>Sub-assertions are not subject to the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">xml_element</span></code>.
If <code class="docutils literal notranslate"><span class="pre">all</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then the sub assertions are checked for all occurences.</p>
<p>Note that all other XML assertions can be expressed by this assertion (Galaxy
also implements the other assertions by calling this one).</p>
<section id="id212">
<h5>Attributes<a class="headerlink" href="#id212" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></td>
<td><p>The name of the attribute to apply sub-assertion on. If not given then the element text is used</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id213">
<h4><code class="docutils literal notranslate"><span class="pre">has_element_with_path</span></code>:<a class="headerlink" href="#id213" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains at least one element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_element_with_path</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_param/Parameters/Parameters_matrix&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id214">
<h5>Attributes<a class="headerlink" href="#id214" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id215">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_elements_with_path</span></code>:<a class="headerlink" href="#id215" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains the specified number (<code class="docutils literal notranslate"><span class="pre">n</span></code>, optionally with <code class="docutils literal notranslate"><span class="pre">delta</span></code>) of elements (or
tags) with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_n_elements_with_path</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_num&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively to <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> also the <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> attributes
can be used to specify the range of the expected number of occurences.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id216">
<h5>Attributes<a class="headerlink" href="#id216" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id217">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_matches</span></code>:<a class="headerlink" href="#id217" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>
matches the regular expression defined by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_version&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;BLASTP\s+2\.2.*&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id218">
<h5>Attributes<a class="headerlink" href="#id218" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id219">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_is</span></code>:<a class="headerlink" href="#id219" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is
the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_program&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;blastp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id220">
<h5>Attributes<a class="headerlink" href="#id220" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id221">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_matches</span></code>:<a class="headerlink" href="#id221" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> matches the regular expression specified by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement2&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo2&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;bar\d+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id222">
<h5>Attributes<a class="headerlink" href="#id222" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id223">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_is</span></code>:<a class="headerlink" href="#id223" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement1&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id224">
<h5>Attributes<a class="headerlink" href="#id224" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id225">
<h4><code class="docutils literal notranslate"><span class="pre">element_text</span></code>:<a class="headerlink" href="#id225" title="Link to this heading">¶</a></h4>
<p>This tag allows the developer to recurisively specify additional assertions as
child elements about just the text contained in the element specified by the
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_def&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element_text&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the implicit assertions can be inverted.
The sub-assertions, which have their own <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute, are not affected
by <code class="docutils literal notranslate"><span class="pre">negate</span></code>.</p>
<section id="id226">
<h5>Attributes<a class="headerlink" href="#id226" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id227">
<h3>Assertions for JSON data<a class="headerlink" href="#id227" title="Link to this heading">¶</a></h3>
<section id="id228">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_value</span></code>:<a class="headerlink" href="#id228" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified JSON value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_value</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;skipped_columns&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;[1, 3, 5]&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id229">
<h5>Attributes<a class="headerlink" href="#id229" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>JSON-ified value to search for. This will be converted from an XML string to JSON with Python’s json.loads function.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id230">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_text</span></code>:<a class="headerlink" href="#id230" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified text (i.e. string) value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_text</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;red&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id231">
<h5>Attributes<a class="headerlink" href="#id231" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text value to search for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id232">
<h3>Assertions for H5 data<a class="headerlink" href="#id232" title="Link to this heading">¶</a></h3>
<section id="id233">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_keys</span></code>:<a class="headerlink" href="#id233" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output has a set of attributes (<code class="docutils literal notranslate"><span class="pre">keys</span></code>), specified as a
comma-separated list, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_keys</span><span class="w"> </span><span class="na">keys=</span><span class="s">&quot;bins,chroms,indexes,pixels,chroms/lengths&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id234">
<h5>Attributes<a class="headerlink" href="#id234" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><p>Comma-separated list of HDF5 attributes to check for.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id235">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_attribute</span></code>:<a class="headerlink" href="#id235" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output contains the specified <code class="docutils literal notranslate"><span class="pre">value</span></code> for an attribute (<code class="docutils literal notranslate"><span class="pre">key</span></code>), e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_attribute</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;nchroms&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id236">
<h5>Attributes<a class="headerlink" href="#id236" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>HDF5 attribute to check value of.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Expected value of HDF5 attribute to check.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="tool-tests-test-assert-stderr">
<h2><a class="toc-backref" href="#id371" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">tests</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">test</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">assert_stderr</span></code></a><a class="headerlink" href="#tool-tests-test-assert-stderr" title="Link to this heading">¶</a></h2>
<p>Describe assertions about the job’s
standard error.</p>
<p>This tag set defines a sequence of checks or assertions to run against the
target output. This tag requires no attributes, but child tags should be used to
define the assertions to make about the output. The functional test framework
makes it easy to extend Galaxy with such tags, the following table summarizes
many of the default assertion tags that come with Galaxy and examples of each
can be found below.</p>
<p>The implementation of these tags are simply Python functions defined in the
<a class="reference external" href="https://github.com/galaxyproject/galaxy/tree/dev/lib/galaxy/tool_util/verify/asserts">/lib/galaxy/tool_util/verify/asserts</a>
module.</p>
<section id="id237">
<h3>General assertions<a class="headerlink" href="#id237" title="Link to this heading">¶</a></h3>
<section id="id238">
<h4><code class="docutils literal notranslate"><span class="pre">has_size</span></code>:<a class="headerlink" href="#id238" title="Link to this heading">¶</a></h4>
<p>Asserts the output has a specific size (in bytes) of <code class="docutils literal notranslate"><span class="pre">value</span></code> plus minus
<code class="docutils literal notranslate"><span class="pre">delta</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_size</span> <span class="pre">value=&quot;10000&quot;</span> <span class="pre">delta=&quot;100&quot;</span> <span class="pre">/&gt;</span></code>.
Alternatively the range of the expected size can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or
<code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id239">
<h5>Attributes<a class="headerlink" href="#id239" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Desired size of the output (in bytes), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Maximum allowed size difference (default is 0). The observed size has to be in the range <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">+-</span> <span class="pre">delta</span></code>. Can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum expected size, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id240">
<h3>Assertions for text data<a class="headerlink" href="#id240" title="Link to this heading">¶</a></h3>
<section id="id241">
<h4><code class="docutils literal notranslate"><span class="pre">has_text</span></code>:<a class="headerlink" href="#id241" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text</span> <span class="pre">text=&quot;chr7&quot;&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">text</span></code> is expected to occur a particular number of
times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>. Optionally also with a certain
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id242">
<h5>Attributes<a class="headerlink" href="#id242" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id243">
<h4><code class="docutils literal notranslate"><span class="pre">not_has_text</span></code>:<a class="headerlink" href="#id243" title="Link to this heading">¶</a></h4>
<p>Asserts the specified <code class="docutils literal notranslate"><span class="pre">text</span></code> does not appear in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;not_has_text</span> <span class="pre">text=&quot;chr8&quot;</span> <span class="pre">/&gt;</span></code>).</p>
<section id="id244">
<h5>Attributes<a class="headerlink" href="#id244" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id245">
<h4><code class="docutils literal notranslate"><span class="pre">has_text_matching</span></code>:<a class="headerlink" href="#id245" title="Link to this heading">¶</a></h4>
<p>Asserts text matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>) appears
in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_text_matching</span> <span class="pre">expression=&quot;1274\d+53&quot;</span> <span class="pre">/&gt;</span></code> ). If the
regular expression is expected to match a particular number of times, this value
can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Note only non-overlapping occurences are counted.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id246">
<h5>Attributes<a class="headerlink" href="#id246" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id247">
<h4><code class="docutils literal notranslate"><span class="pre">has_line</span></code>:<a class="headerlink" href="#id247" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified string (<code class="docutils literal notranslate"><span class="pre">line</span></code>) appears in the output
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line</span> <span class="pre">line=&quot;A</span> <span class="pre">full</span> <span class="pre">example</span> <span class="pre">line.&quot;</span> <span class="pre">/&gt;</span></code>). If the <code class="docutils literal notranslate"><span class="pre">line</span></code> is expected
to occur a particular number of times, this value can be specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.
Optionally also with a certain <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected
occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id248">
<h5>Attributes<a class="headerlink" href="#id248" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">line</span></code></p></td>
<td><p>The line to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id249">
<h4><code class="docutils literal notranslate"><span class="pre">has_line_matching</span></code>:<a class="headerlink" href="#id249" title="Link to this heading">¶</a></h4>
<p>Asserts a line matching the specified regular expression (<code class="docutils literal notranslate"><span class="pre">expression</span></code>)
appears in the output (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_line_matching</span> <span class="pre">expression=&quot;.*\s+127489808\s+127494553&quot;</span> <span class="pre">/&gt;</span></code>).
If a particular number of matching lines is expected, this value can be
specified using <code class="docutils literal notranslate"><span class="pre">n</span></code>.  Optionally also with <code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range
of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id250">
<h5>Attributes<a class="headerlink" href="#id250" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>Regular expression to check for</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id251">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_lines</span></code>:<a class="headerlink" href="#id251" title="Link to this heading">¶</a></h4>
<p>Asserts that an output contains <code class="docutils literal notranslate"><span class="pre">n</span></code> lines, allowing for a difference of
<code class="docutils literal notranslate"><span class="pre">delta</span></code> (default is 0), e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_lines</span> <span class="pre">n=&quot;3&quot;</span> <span class="pre">delta=&quot;1&quot;/&gt;</span></code>.
Alternatively the range of expected occurences can be specified by <code class="docutils literal notranslate"><span class="pre">min</span></code>
and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<section id="id252">
<h5>Attributes<a class="headerlink" href="#id252" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id253">
<h3>Assertions for tabular data<a class="headerlink" href="#id253" title="Link to this heading">¶</a></h3>
<section id="id254">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_columns</span></code>:<a class="headerlink" href="#id254" title="Link to this heading">¶</a></h4>
<p>Asserts tabular output (actually only the first line) contains the specified
number (<code class="docutils literal notranslate"><span class="pre">n</span></code>) of columns (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;has_n_columns</span> <span class="pre">n=&quot;3&quot;/&gt;</span></code>) optionally also with
<code class="docutils literal notranslate"><span class="pre">delta</span></code>. Alternatively the range of expected occurences can be specified by
<code class="docutils literal notranslate"><span class="pre">min</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max</span></code>.  Optionally a column separator (<code class="docutils literal notranslate"><span class="pre">sep</span></code>, default is
<code class="docutils literal notranslate"><span class="pre">\t</span></code>) `and comment character(s) can be specified (<code class="docutils literal notranslate"><span class="pre">comment</span></code>, default is
empty string), then the first non-comment line is used for determining the
number of columns.</p>
<section id="id255">
<h5>Attributes<a class="headerlink" href="#id255" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sep</span></code></p></td>
<td><p>Separator defining columns, default: tab</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">comment</span></code></p></td>
<td><p>Comment character(s) used to skip comment lines (which should not be used for counting columns)</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id256">
<h3>Assertions for archives (zip/tar)<a class="headerlink" href="#id256" title="Link to this heading">¶</a></h3>
<section id="id257">
<h4><code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code>:<a class="headerlink" href="#id257" title="Link to this heading">¶</a></h4>
<p>This tag allows to check if <code class="docutils literal notranslate"><span class="pre">path</span></code> is contained in a compressed file. The path
is a regular expression that is matched against the full paths of the objects in
the compressed file (remember that “matching” means it is checked if a prefix of
the full path of an archive member is described by the regular expression).
Valid archive formats include <code class="docutils literal notranslate"><span class="pre">.zip</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, and <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>. Note that
depending on the archive creation method:</p>
<ul class="simple">
<li><p>full paths of the members may be prefixed with <code class="docutils literal notranslate"><span class="pre">./</span></code></p></li>
<li><p>directories may be treated as empty files</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./path/to/my-file.txt&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> (or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code>) assertions on the number of
archive members matching <code class="docutils literal notranslate"><span class="pre">path</span></code> can be expressed. The following could be used,
e.g., to assert an archive containing n±1 elements out of which at least
4 need to have a <code class="docutils literal notranslate"><span class="pre">txt</span></code> extension.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;10&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*\.txt&quot;</span><span class="w"> </span><span class="na">min=</span><span class="s">&quot;4&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>In addition the tag can contain additional assertions as child elements about
the first member in the archive matching the regular expression <code class="docutils literal notranslate"><span class="pre">path</span></code>. For
instance</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_archive_member</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.*/my-file.txt&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/has_archive_member&gt;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">all</span></code> attribute is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> then all archive members are subject
to the assertions. Note that, archive members matching the <code class="docutils literal notranslate"><span class="pre">path</span></code> are sorted
alphabetically.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">has_archive_member</span></code> assertion only affects
the asserts on the presence and number of matching archive members, but not any
sub-assertions (which can offer the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute on their own).  The
check if the file is an archive at all, which is also done by the function, is
not affected.</p>
<section id="id258">
<h5>Attributes<a class="headerlink" href="#id258" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>The regular expression specifying the archive member.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id259">
<h3>Assertions for XML data<a class="headerlink" href="#id259" title="Link to this heading">¶</a></h3>
<section id="id260">
<h4><code class="docutils literal notranslate"><span class="pre">is_valid_xml</span></code>:<a class="headerlink" href="#id260" title="Link to this heading">¶</a></h4>
<p>Asserts the output is a valid XML file (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;is_valid_xml</span> <span class="pre">/&gt;</span></code>).</p>
</section>
<section id="id261">
<h4><code class="docutils literal notranslate"><span class="pre">xml_element</span></code>:<a class="headerlink" href="#id261" title="Link to this heading">¶</a></h4>
<p>Assert if the XML file contains element(s) or tag(s) with the specified
<a class="reference external" href="https://lxml.de/xpathxslt.html">XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code></a>.  If <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code>
or <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> are given also the number of occurences is checked.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;.//more&quot;</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;3&quot;</span><span class="w"> </span><span class="na">delta=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate=&quot;true&quot;</span></code> the outcome of the assertions wrt the precence and number
of <code class="docutils literal notranslate"><span class="pre">path</span></code> can be negated. If there are any sub assertions then check them against</p>
<ul class="simple">
<li><p>the content of the attribute <code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></li>
<li><p>the element’s text if no attribute is given</p></li>
</ul>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;assert_contents&gt;</span>
<span class="w">  </span><span class="nt">&lt;xml_element</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;./elem/more[2]&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;has_text_matching</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;foo$&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/xml_element&gt;</span>
<span class="nt">&lt;/assert_contents&gt;</span>
</pre></div>
</div>
<p>Sub-assertions are not subject to the <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">xml_element</span></code>.
If <code class="docutils literal notranslate"><span class="pre">all</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> then the sub assertions are checked for all occurences.</p>
<p>Note that all other XML assertions can be expressed by this assertion (Galaxy
also implements the other assertions by calling this one).</p>
<section id="id262">
<h5>Attributes<a class="headerlink" href="#id262" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>Check the sub-assertions for all paths matching the path. Default: false, i.e. only the first</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">attribute</span></code></p></td>
<td><p>The name of the attribute to apply sub-assertion on. If not given then the element text is used</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id263">
<h4><code class="docutils literal notranslate"><span class="pre">has_element_with_path</span></code>:<a class="headerlink" href="#id263" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains at least one element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_element_with_path</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_param/Parameters/Parameters_matrix&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id264">
<h5>Attributes<a class="headerlink" href="#id264" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id265">
<h4><code class="docutils literal notranslate"><span class="pre">has_n_elements_with_path</span></code>:<a class="headerlink" href="#id265" title="Link to this heading">¶</a></h4>
<p>Asserts the XML output contains the specified number (<code class="docutils literal notranslate"><span class="pre">n</span></code>, optionally with <code class="docutils literal notranslate"><span class="pre">delta</span></code>) of elements (or
tags) with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_n_elements_with_path</span><span class="w"> </span><span class="na">n=</span><span class="s">&quot;9&quot;</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_num&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Alternatively to <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">delta</span></code> also the <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> attributes
can be used to specify the range of the expected number of occurences.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion can be inverted.</p>
<section id="id266">
<h5>Attributes<a class="headerlink" href="#id266" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p>Desired number, can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">delta</span></code></p></td>
<td><p>Allowed difference with respect to n (default: 0), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p>Minimum number (default: -infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p>Maximum number (default: infinity), can be suffixed by ``(k</p></td>
<td><p>M</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id267">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_matches</span></code>:<a class="headerlink" href="#id267" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>
matches the regular expression defined by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_version&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;BLASTP\s+2\.2.*&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id268">
<h5>Attributes<a class="headerlink" href="#id268" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id269">
<h4><code class="docutils literal notranslate"><span class="pre">element_text_is</span></code>:<a class="headerlink" href="#id269" title="Link to this heading">¶</a></h4>
<p>Asserts the text of the XML element with the specified XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is
the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_program&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;blastp&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id270">
<h5>Attributes<a class="headerlink" href="#id270" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id271">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_matches</span></code>:<a class="headerlink" href="#id271" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> matches the regular expression specified by <code class="docutils literal notranslate"><span class="pre">expression</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_matches</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement2&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo2&quot;</span><span class="w"> </span><span class="na">expression=</span><span class="s">&quot;bar\d+&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the matching) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id272">
<h5>Attributes<a class="headerlink" href="#id272" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expression</span></code></p></td>
<td><p>The regular expression to use.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id273">
<h4><code class="docutils literal notranslate"><span class="pre">attribute_is</span></code>:<a class="headerlink" href="#id273" title="Link to this heading">¶</a></h4>
<p>Asserts the XML <code class="docutils literal notranslate"><span class="pre">attribute</span></code> for the element (or tag) with the specified
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code> is the specified <code class="docutils literal notranslate"><span class="pre">text</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;attribute_is</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;outerElement/innerElement1&quot;</span><span class="w"> </span><span class="na">attribute=</span><span class="s">&quot;foo&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;bar&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the assertion (on the equality) can be inverted (the
implicit assertion on the existence of the path is not affected).</p>
<section id="id274">
<h5>Attributes<a class="headerlink" href="#id274" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text to check for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id275">
<h4><code class="docutils literal notranslate"><span class="pre">element_text</span></code>:<a class="headerlink" href="#id275" title="Link to this heading">¶</a></h4>
<p>This tag allows the developer to recurisively specify additional assertions as
child elements about just the text contained in the element specified by the
XPath-like <code class="docutils literal notranslate"><span class="pre">path</span></code>, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;element_text</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;BlastOutput_iterations/Iteration/Iteration_hits/Hit/Hit_def&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;not_has_text</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;EDK72998.1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/element_text&gt;</span>
</pre></div>
</div>
<p>The assertion implicitly also asserts that an element matching <code class="docutils literal notranslate"><span class="pre">path</span></code> exists.
With <code class="docutils literal notranslate"><span class="pre">negate</span></code> the result of the implicit assertions can be inverted.
The sub-assertions, which have their own <code class="docutils literal notranslate"><span class="pre">negate</span></code> attribute, are not affected
by <code class="docutils literal notranslate"><span class="pre">negate</span></code>.</p>
<section id="id276">
<h5>Attributes<a class="headerlink" href="#id276" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p>Path to check for. Valid paths are the simplified subsets of XPath implemented by lxml.etree; https://lxml.de/xpathxslt.html for more information.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">negate</span></code></p></td>
<td><p>Negate the outcome of the assertion.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id277">
<h3>Assertions for JSON data<a class="headerlink" href="#id277" title="Link to this heading">¶</a></h3>
<section id="id278">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_value</span></code>:<a class="headerlink" href="#id278" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified JSON value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_value</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;skipped_columns&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;[1, 3, 5]&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id279">
<h5>Attributes<a class="headerlink" href="#id279" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>JSON-ified value to search for. This will be converted from an XML string to JSON with Python’s json.loads function.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id280">
<h4><code class="docutils literal notranslate"><span class="pre">has_json_property_with_text</span></code>:<a class="headerlink" href="#id280" title="Link to this heading">¶</a></h4>
<p>Asserts the JSON document contains a property or key with the specified text (i.e. string) value.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_json_property_with_text</span><span class="w"> </span><span class="na">property=</span><span class="s">&quot;color&quot;</span><span class="w"> </span><span class="na">text=</span><span class="s">&quot;red&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id281">
<h5>Attributes<a class="headerlink" href="#id281" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td><p>Text value to search for.</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">property</span></code></p></td>
<td><p>JSON property to search the target for.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="id282">
<h3>Assertions for H5 data<a class="headerlink" href="#id282" title="Link to this heading">¶</a></h3>
<section id="id283">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_keys</span></code>:<a class="headerlink" href="#id283" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output has a set of attributes (<code class="docutils literal notranslate"><span class="pre">keys</span></code>), specified as a
comma-separated list, e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_keys</span><span class="w"> </span><span class="na">keys=</span><span class="s">&quot;bins,chroms,indexes,pixels,chroms/lengths&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id284">
<h5>Attributes<a class="headerlink" href="#id284" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">keys</span></code></p></td>
<td><p>Comma-separated list of HDF5 attributes to check for.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id285">
<h4><code class="docutils literal notranslate"><span class="pre">has_h5_attribute</span></code>:<a class="headerlink" href="#id285" title="Link to this heading">¶</a></h4>
<p>Asserts HDF5 output contains the specified <code class="docutils literal notranslate"><span class="pre">value</span></code> for an attribute (<code class="docutils literal notranslate"><span class="pre">key</span></code>), e.g.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;has_h5_attribute</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;nchroms&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</pre></div>
</div>
<section id="id286">
<h5>Attributes<a class="headerlink" href="#id286" title="Link to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key</span></code></p></td>
<td><p>HDF5 attribute to check value of.</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">value</span></code></p></td>
<td><p>Expected value of HDF5 attribute to check.</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="tool-help">
<h2><a class="toc-backref" href="#id372" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">help</span></code></a><a class="headerlink" href="#tool-help" title="Link to this heading">¶</a></h2>
<p>This tag set includes all of the necessary details of how to use the tool. This tag set should be included as the next to the last tag set, before citations, in the tool config. Tool help is written in reStructuredText. Included here is only an overview of a subset of features. For more information see <a class="reference external" href="https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html">here</a>.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>tag</p></th>
<th class="head"><p>details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">class::</span> <span class="pre">warningmark</span></code></p></td>
<td><p>a yellow warning symbol</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">class::</span> <span class="pre">infomark</span></code></p></td>
<td><p>a blue information symbol</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">image::</span> <span class="pre">path-of-the-file.png</span> <span class="pre">:height:</span> <span class="pre">500</span> <span class="pre">:width:</span> <span class="pre">600</span></code></p></td>
<td><p>insert a png file of height 500 and width 600 at this position</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">**bold**</span></code></p></td>
<td><p>bold</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*italic*</span></code></p></td>
<td><p>italic</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p>list</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>list</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">::</span></code></p></td>
<td><p>paragraph</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-----</span></code></p></td>
<td><p>a horizontal line</p></td>
</tr>
</tbody>
</table>
<section id="id287">
<h3>Examples<a class="headerlink" href="#id287" title="Link to this heading">¶</a></h3>
<p>Show a warning sign to remind users that this tool accept fasta format files only, followed by an example of the query sequence and a figure.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;help&gt;</span>

..<span class="w"> </span>class::<span class="w"> </span>warningmark

&#39;&#39;&#39;TIP&#39;&#39;&#39;<span class="w"> </span>This<span class="w"> </span>tool<span class="w"> </span>requires<span class="w"> </span>*fasta*<span class="w"> </span>format.

----

&#39;&#39;&#39;Example&#39;&#39;&#39;

Query<span class="w"> </span>sequence::
<span class="w">    </span>&gt;seq1
<span class="w">    </span>ATCG...

..<span class="w"> </span>image::<span class="w"> </span>my_figure.png
<span class="w">    </span>:height:<span class="w"> </span>500
<span class="w">    </span>:width:<span class="w"> </span>600

<span class="nt">&lt;/help&gt;</span>
</pre></div>
</div>
</section>
<section id="id288">
<h3>Best Practices<a class="headerlink" href="#id288" title="Link to this heading">¶</a></h3>
<p>Find the Intergalactic Utilities Commision suggested best practices for this
element <a class="reference external" href="https://planemo.readthedocs.io/en/latest/standards/docs/best_practices/tool_xml.html#help-tag">here</a>.</p>
</section>
</section>
<section id="tool-citations">
<h2><a class="toc-backref" href="#id373" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citations</span></code></a><a class="headerlink" href="#tool-citations" title="Link to this heading">¶</a></h2>
<p>Tool files may declare one
citations element. Each citations element can contain one or more citation tag
elements - each of which specifies tool citation information using either a DOI
or a BibTeX entry.</p>
<p>These citations will appear at the bottom of the tool form in a formatted way
but the user will have to option to select RAW BibTeX for copying and pasting as
well. Likewise, the history menu includes an option allowing users to aggregate
all such citations across an analysis in a list of citations.</p>
<p>BibTeX entries for citations annotated with DOIs will be fetched by Galaxy from
https://doi.org/ and cached.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;citations&gt;</span>
<span class="w">   </span><span class="cm">&lt;!-- Example of annotating a citation using a DOI. --&gt;</span>
<span class="w">   </span><span class="nt">&lt;citation</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;doi&quot;</span><span class="nt">&gt;</span>10.1093/bioinformatics/btq281<span class="nt">&lt;/citation&gt;</span>

<span class="w">   </span><span class="cm">&lt;!-- Example of annotating a citation using a BibTex entry. --&gt;</span>
<span class="w">   </span><span class="nt">&lt;citation</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;bibtex&quot;</span><span class="nt">&gt;</span>@ARTICLE{Kim07aninterior-point,
<span class="w">   </span>author<span class="w"> </span>=<span class="w"> </span>{Seung-jean<span class="w"> </span>Kim<span class="w"> </span>and<span class="w"> </span>Kwangmoo<span class="w"> </span>Koh<span class="w"> </span>and<span class="w"> </span>Michael<span class="w"> </span>Lustig<span class="w"> </span>and<span class="w"> </span>Stephen<span class="w"> </span>Boyd<span class="w"> </span>and<span class="w"> </span>Dimitry<span class="w"> </span>Gorinevsky},
<span class="w">   </span>title<span class="w"> </span>=<span class="w"> </span>{An<span class="w"> </span>interior-point<span class="w"> </span>method<span class="w"> </span>for<span class="w"> </span>large-scale<span class="w"> </span>l1-regularized<span class="w"> </span>logistic<span class="w"> </span>regression},
<span class="w">   </span>journal<span class="w"> </span>=<span class="w"> </span>{Journal<span class="w"> </span>of<span class="w"> </span>Machine<span class="w"> </span>Learning<span class="w"> </span>Research},
<span class="w">   </span>year<span class="w"> </span>=<span class="w"> </span>{2007},
<span class="w">   </span>volume<span class="w"> </span>=<span class="w"> </span>{8},
<span class="w">   </span>pages<span class="w"> </span>=<span class="w"> </span>{1519-1555}
<span class="w">   </span>}<span class="nt">&lt;/citation&gt;</span>
<span class="w"> </span><span class="nt">&lt;/citations&gt;</span>
</pre></div>
</div>
<p>For more implementation information see the
<a class="reference external" href="https://bitbucket.org/galaxy/galaxy-central/pull-requests/440/initial-bibtex-doi-citation-support-in/diff">pull request</a>
adding this feature. For more examples of how to add this to tools checkout the
following commits adding this to the
<a class="reference external" href="https://github.com/peterjc/galaxy_blast/commit/9d2e3906915895765ecc3f48421b91fabf2ccd8b">NCBI BLAST+ suite</a>,
<a class="reference external" href="https://bitbucket.org/galaxy/galaxy-central/commits/39c983151fe328ff5d415f6da81ce5b21a7e18a4">phenotype association tools</a>,
<a class="reference external" href="https://bitbucket.org/galaxy/galaxy-central/commits/60f63d6d4cb7b73286f3c747e8acaa475e4b6fa8">MAF suite</a>,
and <a class="reference external" href="https://github.com/jmchilton/galaxytools/commit/184971dea73e236f11e82b77adb5cab615b8391b">MACS2 suite</a>.</p>
<p>This feature was added to the August 2014 release of Galaxy, tools annotated
with citations will work in older releases of Galaxy but no citation information
will be available to the end user.</p>
</section>
<section id="tool-citations-citation">
<h2><a class="toc-backref" href="#id374" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">tool</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citations</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">citation</span></code></a><a class="headerlink" href="#tool-citations-citation" title="Link to this heading">¶</a></h2>
<p>Each citations element can contain one or
more <code class="docutils literal notranslate"><span class="pre">citation</span></code> tag elements - each of which specifies tool citation
information using either a DOI or a BibTeX entry.</p>
<section id="id289">
<h3>Attributes<a class="headerlink" href="#id289" title="Link to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute</p></th>
<th class="head"><p>Details</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></td>
<td><p>Type of citation - currently <code class="docutils literal notranslate"><span class="pre">doi</span></code> and <code class="docutils literal notranslate"><span class="pre">bibtex</span></code> are the only supported options.</p></td>
<td><p>True</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Development Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api_guidelines.html" class="btn btn-neutral float-right" title="API Design Guidelines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Galaxy Committers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>